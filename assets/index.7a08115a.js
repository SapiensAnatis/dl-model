import{N as Oi,_ as xe,T as El,h as Ae,o as h,l as Al,u as Be,U as Ln,d as Li,a as _e,c as Fn,v as F,i as Fi,g as kl,b as Tl,e as Rl,f as Kr,j as we,p as ie,k as Pl,m as dr,n as zi,q as zr,t as Bl,s as Hi,F as hr,r as zn,y as Ml,w as Nl,x as Ol,P as Ll,z as xr,A as Gt,B as Fl,C as Gi,D as zl,E as Wt,G as Wi,H as ya,I as Hl,J as Gl,K as Wl,L as $l,M as Ul}from"./index.19018b9b.js";import{c as Me}from"./createSvgIcon.5e1872c3.js";import{M as $i,F as kn,a as ql,b as Vl,P as Zl,O as jl,T as Kl,c as Yl,d as Xl,B as Jl,A as Ql,D as es,S as rs,e as ts,I as ns,f as ur,g as as,h as $t,C as Ut}from"./BoneManager.390e2a1a.js";import{L as Hn}from"./lists.4969ae67.js";import{I as mr,C as Gn}from"./Close.cedcdb1d.js";import{B as Yr}from"./Box.85a0e464.js";import{u as Ui,c as is}from"./styles.3c03db76.js";import{u as br}from"./useKey.9f9040b9.js";import{B as fe}from"./Button.c9a02474.js";import{A as Ve,a as os,b as ls}from"./Accordion.627d3e09.js";import{M as ss,T as Rt,u as cs}from"./Gallery.eabfae36.js";import"./GlowToggle.ac057ec9.js";import{M as us}from"./filterConfig.7d2a29f2.js";import"./Selector.3106a991.js";import{g as ds,a as fs,E as ps,M as vs}from"./MeshMouthSelect.d7859ee2.js";import"./FaceSelect.7cab2f68.js";import"./FaceTexture.66c79100.js";/* empty css               */import{M as qi}from"./ModelIcon.e611d612.js";import{u as gs}from"./useToggleState.e1079926.js";import{_ as Lr,u as hs,a as ee,g as ms,b as bs,s as Wn,r as ws,c as Pt,d as ys,e as Ct,f as xs,h as xa,i as Vi}from"./ButtonBase.83a82a9d.js";import{P as Ds,a as $n,B as Cs,S as Ss}from"./SkipPrevious.73730bac.js";import{T as _s}from"./TabBar.78c4a342.js";import{u as Zi,d as Is,o as ji,T as Es,r as As,g as Da,M as ks,P as Ts}from"./Popover.4818578b.js";import{i as Rs}from"./aniFunction.820218d2.js";import"./ColorButton.05258836.js";import"./DialogTitle.bf0d78bc.js";import"./AddWeapon.8b518414.js";import"./index.cea1d0ea.js";import"./FacePartSelector.3d444f8f.js";const Ps=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Bs(e,r,t){const n=r.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),a=ji(r);let i;if(r.fakeTransform)i=r.fakeTransform;else{const p=a.getComputedStyle(r);i=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let o=0,s=0;if(i&&i!=="none"&&typeof i=="string"){const p=i.split("(")[1].split(")")[0].split(",");o=parseInt(p[4],10),s=parseInt(p[5],10)}return e==="left"?l?`translateX(${l.right+o-n.left}px)`:`translateX(${a.innerWidth+o-n.left}px)`:e==="right"?l?`translateX(-${n.right-l.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:e==="up"?l?`translateY(${l.bottom+s-n.top}px)`:`translateY(${a.innerHeight+s-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-s}px)`:`translateY(-${n.top+n.height-s}px)`}function Ms(e){return typeof e=="function"?e():e}function St(e,r,t){const n=Ms(t),l=Bs(e,r,n);l&&(r.style.webkitTransform=l,r.style.transform=l)}const Ns=Oi(function(r,t){const n=Zi(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,container:p,direction:f="down",easing:c=l,in:d,onEnter:g,onEntered:v,onEntering:D,onExit:C,onExited:b,onExiting:y,style:S,timeout:_=a,TransitionComponent:k=Es}=r,T=Lr(r,Ps),I=xe(null),B=hs(s.ref,I,t),O=G=>re=>{G&&(re===void 0?G(I.current):G(I.current,re))},z=O((G,re)=>{St(f,G,p),As(G),g&&g(G,re)}),L=O((G,re)=>{const ve=Da({timeout:_,style:S,easing:c},{mode:"enter"});G.style.webkitTransition=n.transitions.create("-webkit-transform",ee({},ve)),G.style.transition=n.transitions.create("transform",ee({},ve)),G.style.webkitTransform="none",G.style.transform="none",D&&D(G,re)}),U=O(v),H=O(y),q=O(G=>{const re=Da({timeout:_,style:S,easing:c},{mode:"exit"});G.style.webkitTransition=n.transitions.create("-webkit-transform",re),G.style.transition=n.transitions.create("transform",re),St(f,G,p),C&&C(G)}),Q=O(G=>{G.style.webkitTransition="",G.style.transition="",b&&b(G)}),K=G=>{i&&i(I.current,G)},j=El(()=>{I.current&&St(f,I.current,p)},[f,p]);return Ae(()=>{if(d||f==="down"||f==="right")return;const G=Is(()=>{I.current&&St(f,I.current,p)}),re=ji(I.current);return re.addEventListener("resize",G),()=>{G.clear(),re.removeEventListener("resize",G)}},[f,d,p]),Ae(()=>{d||j()},[d,j]),h(k,ee({nodeRef:I,onEnter:z,onEntered:U,onEntering:L,onExit:q,onExited:Q,onExiting:H,addEndListener:K,appear:o,in:d,timeout:_},T,{children:(G,re)=>Al(s,ee({ref:B,style:ee({visibility:G==="exited"&&!d?"hidden":void 0},S,s.props.style)},re))}))}),Os=Ns;function Ls(e){return ms("MuiDrawer",e)}bs("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Fs=["BackdropProps"],zs=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Ki=(e,r)=>{const{ownerState:t}=e;return[r.root,(t.variant==="permanent"||t.variant==="persistent")&&r.docked,r.modal]},Hs=e=>{const{classes:r,anchor:t,variant:n}=e,l={root:["root"],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Pt(t)}`,n!=="temporary"&&`paperAnchorDocked${Pt(t)}`]};return xs(l,Ls,r)},Gs=Wn(ks,{name:"MuiDrawer",slot:"Root",overridesResolver:Ki})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),Ca=Wn("div",{shouldForwardProp:ws,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Ki})({flex:"0 0 auto"}),Ws=Wn(Ts,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.paper,r[`paperAnchor${Pt(t.anchor)}`],t.variant!=="temporary"&&r[`paperAnchorDocked${Pt(t.anchor)}`]]}})(({theme:e,ownerState:r})=>ee({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},r.anchor==="left"&&{left:0},r.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},r.anchor==="right"&&{right:0},r.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},r.anchor==="left"&&r.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="top"&&r.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="right"&&r.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="bottom"&&r.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),Yi={left:"right",right:"left",top:"down",bottom:"up"};function $s(e){return["left","right"].indexOf(e)!==-1}function Us(e,r){return e.direction==="rtl"&&$s(r)?Yi[r]:r}const qs=Oi(function(r,t){const n=ys({props:r,name:"MuiDrawer"}),l=Zi(),a={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:i="left",BackdropProps:o,children:s,className:p,elevation:f=16,hideBackdrop:c=!1,ModalProps:{BackdropProps:d}={},onClose:g,open:v=!1,PaperProps:D={},SlideProps:C,TransitionComponent:b=Os,transitionDuration:y=a,variant:S="temporary"}=n,_=Lr(n.ModalProps,Fs),k=Lr(n,zs),T=xe(!1);Ae(()=>{T.current=!0},[]);const I=Us(l,i),O=ee({},n,{anchor:i,elevation:f,open:v,variant:S},k),z=Hs(O),L=h(Ws,ee({elevation:S==="temporary"?f:0,square:!0},D,{className:Ct(z.paper,D.className),ownerState:O,children:s}));if(S==="permanent")return h(Ca,ee({className:Ct(z.root,z.docked,p),ownerState:O,ref:t},k,{children:L}));const U=h(b,ee({in:v,direction:Yi[I],timeout:y,appear:T.current},C,{children:L}));return S==="persistent"?h(Ca,ee({className:Ct(z.root,z.docked,p),ownerState:O,ref:t},k,{children:U})):h(Gs,ee({BackdropProps:ee({},o,d,{transitionDuration:y}),className:Ct(z.root,z.modal,p),open:v,ownerState:O,onClose:g,hideBackdrop:c,ref:t},k,_,{children:U}))}),Xi=qs,Vs=Me(h("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),Zs=Me(h("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew"),js=Me(h("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z"}),"Camera"),Ks=Me([h("circle",{cx:"12",cy:"12",r:"3.2"},"0"),h("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt"),Ys=Me(h("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy"),Or=Me(h("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download"),qt=Me(h("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),Un=Me(h("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"}),"Gif"),Xs=Me(h("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),Js=Me(h("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"}),"LightMode"),Qs=Me(h("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),ec=Me(h("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z"}),"Monitor"),Ji=Me(h("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}),"Panorama"),rc=Me(h("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People"),tc=Me(h("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),nc=Me(h("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt"),ac=Me(h("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart"),ic=Me(h("path",{d:"M6 6h12v12H6z"}),"Stop"),oc=Me(h("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility"),lc=Me(h("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),sc="/dl-model/assets/Rose-Petals.5387a4b1.svg",Sa="17rem",cc="#1f0000",Tn={sidebar:{minWidth:Sa},sidebarHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem",position:"sticky",top:0,height:"2.75rem",backgroundColor:"#101010",zIndex:6},paper:{width:Sa,backgroundColor:cc,border:"none",backgroundImage:`url(${sc})`,backgroundSize:"cover",backgroundPosition:"center",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.8) rgba(0, 0, 0, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"2px"},"& > .QuickAction":{position:"sticky",top:"2.75rem",zIndex:6,height:"2rem"},"& > .TabBar":{position:"sticky",top:"4.75rem",zIndex:6,marginBottom:"0.5rem"},"& > button":{backgroundColor:"rgba(16, 16, 16, 0.5)",minHeight:"2.5rem",borderRadius:"unset",padding:"0.5rem 1.5rem",justifyContent:"flex-start",gap:"1rem","& .btn-icon":{maxHeight:"1.5rem"}},"& > button:hover":{backgroundColor:"rgba(16, 16, 16, 0.8)"},"& .break":{minHeight:"0.5rem"},"& .break + .break":{minHeight:0},"& .bottom-space":{minHeight:"2rem"}}},uc=h("a",{href:"https://ko-fi.com/L4L83VOAP",rel:"noreferrer",target:"_blank",children:h("img",{style:{height:"2rem"},src:"https://cdn.ko-fi.com/cdn/kofi5.png?v=2",alt:"Buy Me a Coffee"})}),dc=h("a",{href:"https://github.com/dgk3593/dl-model",target:"_blank",children:h(Xs,{style:{width:"2rem",margin:"0.5rem 1rem",color:"white"},titleAccess:"Source Code"})});const fc=({onClick:e,color:r="#101010"})=>h(Yr,{position:"absolute",top:"2rem",right:0,children:h(mr,{className:"DockButton",sx:{color:r},onClick:e,title:"Send to Dock",size:"large",children:h(Vs,{})})});function pc(){var o;const{mode:e,handleSelect:r,close:t}=Be(s=>s.sidebar.modal),n=Be(s=>s.dock.open),l=()=>{n(e,r),t()},a=Ui("(min-width:640px)"),i=(o=Li[e])!=null?o:Yr;return h($i,{closeModal:t,open:!!e,children:[a&&h(fc,{onClick:l}),h(Ln,{fallback:h(Hn,{}),children:h(i,{onSelect:r,onAfterSelect:t})})]})}const{setLoadingMsg:_a}=Be.getState(),vc=(e,r,t)=>{const n=_e.getState().activeModel;n==null||n.animation.addChain(e);const l=Fn(e,r);!(n!=null&&n.userData)||(n.userData.aniSelectState=t,n.userData.chain?n.userData.chain.splice(0,1/0,...l):n.userData.chain=l)},gc=async(e,r)=>{var s,p;_a("Loading");const t=_e.getState().setActiveModel,n=_e.getState().activeModel,l=await F.loadDLModel(e);l.userData.name=r,l.material.code=(s=n==null?void 0:n.material.code)!=null?s:"",l.outline.code=(p=n==null?void 0:n.outline.code)!=null?p:"",Fi(l);const{parent:a,parentBone:i}=n!=null?n:{},o=(n==null?void 0:n.type)==="adventurer"&&l.type==="adventurer";if(o)l.userData.chain=n.userData.chain,l.animation.addChain(n.animation.current.chainCode),n.attachment.list.forEach(f=>l.attach(f,f.parentBone));else if((n==null?void 0:n.animation.current.chainCode)||!i){const f=kl(e);if(f){const{code:c,name:d}=f;l.animation.addChain(c),l.userData.chain=Fn(c,d)}}if(n==null||n.dispose(),i)a.attach(l,i);else{if(F.add(l),!o){const c=Tl(e);F.camera.position.set(...c);const d=Rl(e);F.controls.target.set(...d)}const f=l.type==="adventurer"?"Adv":"Personal";Kr.getState().setCategory(f)}t(l),_a("")},hc=(e,r)=>{const t=_e.getState().activeModel;!(t!=null&&t.face)||e===void 0||e===null||(t.face[`${r}BaseIdx`]=e)},mc=(e,r)=>{const t=_e.getState().activeModel;!e||!(t!=null&&t.face)||(t.face[`${r}Texture`]=e)},kt={model:gc,animation:vc,face:hc,faceTexture:mc},bc=h("img",{className:"btn-icon",src:"img/appIcon/weapon.png",alt:"Add Weapon"});function wc({openModal:e}){const{activeModel:r}=_e(),[t,n]=br(),l=xe(()=>{}),a=r==null?void 0:r.bones.list.includes("jWeaponR"),i=r==null?void 0:r.attachment.jWeaponL,o=r==null?void 0:r.attachment.jWeaponR,s=()=>e("weapon",kt.weapon);return Ae(()=>{l.current();const p=r==null?void 0:r.addEventListener("AttachmentChanged",n);return l.current=()=>r==null?void 0:r.removeEventListener("AttachmentChanged",p),l.current},[r]),a?h(ie,{children:[h(fe,{variant:"contained","data-mode":"weapon",onClick:s,startIcon:bc,children:"Add Weapon"}),h(we.Fragment,{children:[i==null?void 0:i.map(p=>h(kn,{target:p,label:"Left Weapon"},p.uniqueId)),o==null?void 0:o.map(p=>h(kn,{target:p,label:"Right Weapon"},p.uniqueId))]},t)]}):h(ie,{})}function yc({handleClick:e}){const{activeModel:r}=_e(),t=r==null?void 0:r.face;return t?h(ie,{children:[h(fe,{variant:"contained","data-mode":"face",onClick:e,startIcon:h(ql,{}),children:"Facial Expression"}),t.type==="uv"&&h(fe,{variant:"contained","data-mode":"faceTexture",onClick:e,startIcon:h(Vl,{}),children:"Face Texture"})]}):h(ie,{})}function Qi({label:e,handleSelect:r}){const t=Be(i=>i.sidebar.modal.open),{setIndex:n}=Pl(),l=i=>{i.stopPropagation();const{index:o}=i.currentTarget.dataset;o!==void 0&&n(0,o),t("model",r)},a=is.map((i,o)=>{const{label:s,icon:p}=i;return h(fe,{title:s,"data-index":o,onClick:l,children:h("img",{src:p,alt:s})})});return h(Ve,{className:"ModelSelect",defaultOpen:!0,disableGutters:!0,children:[h(fe,{variant:"contained",onClick:l,children:e}),h("div",{className:"ModelSelect-groups",children:a})]})}function xc(){const{activeModel:e}=_e(),r=e==null?void 0:e.outline;if(!r)return h(ie,{});const[t,n]=br(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.outline.code=i})},a=i=>{i.stopPropagation(),r.enabled=!r.enabled,l(),n()};return h(Ve,{disableGutters:!0,className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(Zl,{}),"Outline"]}),h(fe,{onClick:a,title:"Toggle Outline",variant:"contained",children:"Toggle"})]}),h(jl,{target:e},t)]})}function Dc(){const{activeModel:e}=_e(),{material:r}=e,[t,n]=br(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.material.code=i})},a=i=>{i.stopPropagation(),r.code="",l(),n()};return h(Ve,{disableGutters:!0,className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(Kl,{}),"Material"]}),h(fe,{onClick:a,title:"Reset to default",variant:"contained",children:"Reset"})]}),h(Yl,{target:e},t)]})}const Cc=e=>{const{setCategory:r,loadState:t}=Kr.getState();_e.getState().setActiveModel(e),r(e.type==="adventurer"?"Adv":"Personal"),t(e.userData.aniSelectState)};function eo(){var o,s;const{activeModel:e}=_e(),r=e==null?void 0:e.id,[t,n]=dr((o=e==null?void 0:e.userData)==null?void 0:o.name),l=Be(p=>p.sidebar.modal.open),a=()=>l("target",Cc);Ae(()=>{var p;n((p=e==null?void 0:e.userData)==null?void 0:p.name),!(t||!e)&&zi(r).then(f=>{!f||(n(f.name),e.userData.name=f.name)})},[e]);const i=(s=t!=null?t:r)!=null?s:"None";return h("div",{className:"ModelSettings-target",children:["Current",h(fe,{onClick:a,title:"Click to change",children:[h(qi,{modelId:r,alt:i}),h("span",{className:"name",children:i})]})]})}const Ia={change:"Change Model",select:"Select Model"};function Sc(){const{activeModel:e}=_e(),{loadState:r}=Kr(),t=Be(s=>s.sidebar.modal.open),{toggle:n,setTarget:l}=zr(),a=s=>{const{mode:p}=s.currentTarget.dataset;t(p,kt[p])},i=()=>{r(e==null?void 0:e.userData.aniSelectState),t("animation",kt.animation)},o=()=>{l(e),n()};return h(ie,{children:[h(eo,{}),h(Qi,{label:e?Ia.change:Ia.select,handleSelect:kt.model}),h("span",{className:"break"}),e&&h(ie,{children:[h(Xl,{target:e},e.uniqueId),(e==null?void 0:e.parts)&&h(ie,{children:[h(Jl,{target:e},e.uniqueId),h("span",{className:"break"})]}),(e==null?void 0:e.face)&&h(yc,{handleClick:a}),h("span",{className:"break"}),h(fe,{variant:"contained","data-mode":"attachment",onClick:a,startIcon:h(Ql,{}),children:"Manage Attachments"}),h(wc,{openModal:t}),h("span",{className:"break"}),h(fe,{variant:"contained","data-mode":"animation",onClick:i,startIcon:h(es,{}),children:"Animation Select"}),h(fe,{variant:"contained",onClick:o,startIcon:h(rs,{}),title:"Create Animation Chain",children:"Chain Maker"}),h("span",{className:"break"}),h(xc,{}),h(Dc,{}),h(ts,{target:e})]})]})}const{setLoadingMsg:Ea}=Be.getState(),_c=async(e,r)=>{Ea("Loading");const t=await F.loadDLModel(e);t.userData.name=r,Fi(t),F.add(t),Ea("")};function Ic(){const[e,r]=br();Ae(()=>{const n=F.model.addEventListener("change",r);return()=>{F.model.removeEventListener("change",n)}},[]);const t=()=>{F.loadedModel.forEach(({animation:n})=>{n.stop(),n.play()})};return h(ie,{children:[h(Qi,{label:"Add Model",handleSelect:_c}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:t,startIcon:h(nc,{}),children:"Restart All Animation"}),h("span",{className:"break"}),h(we.Fragment,{children:F.model.map(n=>h("div",{children:h(kn,{target:n})},n.uniqueId))},e)]})}const Ec=[{title:"Single Model",value:"single",icon:h(tc,{})},{title:"Multiple Model",value:"multi",icon:h(rc,{})}],Ac={single:Sc,multi:Ic},kc={ModeSelect:{backgroundColor:"#101010",color:"#eee",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:"2rem",marginBottom:"0.3rem",cursor:"default",position:"sticky",top:"7.75rem",zIndex:"6"}};function Tc(){var n;const{manageMode:e,setManageMode:r}=Be(l=>l.sidebar),t=(n=Ac[e])!=null?n:we.Fragment;return h(ie,{children:[h(Yr,{className:"ModeSelect",sx:kc.ModeSelect,children:["Mode",h(ns,{tabs:Ec,className:"ModeSelect-tabs",value:e,onChange:r})]}),h(t,{})]})}const Rc=Object.keys(Bl).map(e=>({value:e,label:e})),Pc=[{propName:"pixelRatio",label:"Pixel Ratio",type:"slider",title:"Pixel Ratio, used to increase image quality on high DPI screens",min:.1,max:window.devicePixelRatio,step:.1},{propName:"toneMapping",label:"Tone Mapping",type:"select",options:Rc}];function Bc(){const[e,r]=br(),t=a=>{a.stopPropagation(),F.setViewport(),F.pixelRatio=1,F.toneMapping="No Mapping",setTimeout(()=>{r()},200)},n=()=>{const{viewport:{width:a,height:i}}=F;F.setViewport(a,i)};Ae(()=>{const a=()=>setTimeout(()=>{r()},200);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const l=[{propName:"width",label:"Width",type:"number",min:0,max:window.innerWidth,step:32,onChange:n},{propName:"height",label:"Height",type:"number",min:0,max:window.innerHeight,step:32,onChange:n}];return h(Ve,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[h(ie,{children:[h("div",{className:"title",children:[h(ec,{}),"Display"]}),h(fe,{onClick:t,title:"Reset display settings",variant:"contained",children:"Reset"})]}),h(we.Fragment,{children:[h(ur,{target:F.viewport,propList:l}),h(ur,{target:F,propList:Pc})]},e)]})}const Mc=[{propName:"autoRotate",label:"Enabled",type:"boolean"},{propName:"autoRotateSpeed",label:"Speed",type:"slider",min:-10,max:10,step:1}];function Nc(){const{controls:e}=F,[r,t]=br(),n=l=>{l.stopPropagation(),e.autoRotate=!1,e.autoRotateSpeed=2,t()};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(as,{}),"Auto Rotate"]}),h(fe,{onClick:n,title:"Reset Auto Rotate Settings",variant:"contained",children:"Reset"})]}),h(ur,{target:e,propList:Mc},r)]})}function ro({children:e,onClick:r,options:t,title:n}){const[l,a]=dr(null),i=p=>{p.stopPropagation(),a(p.currentTarget)},o=()=>a(null),s=p=>{p.stopPropagation();const{value:f}=p.currentTarget.dataset;r(f),o()};return h(ie,{children:[h(fe,{onClick:i,title:n,variant:"contained",children:e}),h(ss,{anchorEl:l,open:!!l,onClose:o,children:t.map(({value:p,label:f})=>h(us,{"data-value":p,onClick:s,children:f!=null?f:p},p))})]})}const to={DirectionalLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"position",label:"Position",type:"vector",step:.05}],AmbientLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"}],PointLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"decay",label:"Dacay",type:"slider",min:1,max:2,step:.05},{propName:"position",label:"Position",type:"vector",step:.05}]};function Oc({target:e}){const{type:r,name:t}=e,l=h(mr,{title:"Remove",className:"closeButton",onClick:i=>{i.stopPropagation(),e.remove()},children:h(Gn,{})}),a=to[r];return r==="DirectionalLight"&&(a.find(i=>i.propName==="position").onChange=()=>{var i,o;return(o=(i=e.helper)==null?void 0:i.update)==null?void 0:o.call(i)}),h(Ve,{disableGutters:!0,className:"LightController",children:[h(ie,{children:[t,l]}),h(ie,{children:h(ur,{target:e,propList:a})})]})}const Lc=Object.keys(to).map(e=>{const r=e.replace("Light","");return{label:r,value:r.toLowerCase()}});function Fc(){const[e,r]=br(),t=F.light.list;Ae(()=>{const l=t.addEventListener("change",r);return()=>t.removeEventListener("change",l)},[]);const n=l=>F.light.add(l);return h(Ve,{disableGutters:!0,className:"LightControl SettingGroup with-subgroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(Js,{}),"Light"]}),h(ro,{title:"Add Light",onClick:n,options:Lc,children:h($t,{})})]}),h(we.Fragment,{children:t.length?t.map((l,a)=>h(Oc,{target:l},`${e+a}`)):"Click + to add light"},e)]})}function zc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Aa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function ka(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Aa(Object(t),!0).forEach(function(n){zc(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Xe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ta=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ra={INIT:"@@redux/INIT"+rn(),REPLACE:"@@redux/REPLACE"+rn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+rn()}};function Hc(e){if(typeof e!="object"||e===null)return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function no(e,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Xe(1));return t(no)(e,r)}if(typeof e!="function")throw new Error(Xe(2));var l=e,a=r,i=[],o=i,s=!1;function p(){o===i&&(o=i.slice())}function f(){if(s)throw new Error(Xe(3));return a}function c(D){if(typeof D!="function")throw new Error(Xe(4));if(s)throw new Error(Xe(5));var C=!0;return p(),o.push(D),function(){if(!!C){if(s)throw new Error(Xe(6));C=!1,p();var y=o.indexOf(D);o.splice(y,1),i=null}}}function d(D){if(!Hc(D))throw new Error(Xe(7));if(typeof D.type>"u")throw new Error(Xe(8));if(s)throw new Error(Xe(9));try{s=!0,a=l(a,D)}finally{s=!1}for(var C=i=o,b=0;b<C.length;b++){var y=C[b];y()}return D}function g(D){if(typeof D!="function")throw new Error(Xe(10));l=D,d({type:Ra.REPLACE})}function v(){var D,C=c;return D={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Xe(11));function S(){y.next&&y.next(f())}S();var _=C(S);return{unsubscribe:_}}},D[Ta]=function(){return this},D}return d({type:Ra.INIT}),n={dispatch:d,subscribe:c,getState:f,replaceReducer:g},n[Ta]=v,n}function Pa(e,r){return function(){return r(e.apply(this,arguments))}}function Ba(e,r){if(typeof e=="function")return Pa(e,r);if(typeof e!="object"||e===null)throw new Error(Xe(16));var t={};for(var n in e){var l=e[n];typeof l=="function"&&(t[n]=Pa(l,r))}return t}function ao(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,l){return function(){return n(l.apply(void 0,arguments))}})}function Gc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(){var l=n.apply(void 0,arguments),a=function(){throw new Error(Xe(15))},i={getState:l.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=r.map(function(s){return s(i)});return a=ao.apply(void 0,o)(l.dispatch),ka(ka({},l),{},{dispatch:a})}}}var io=we.createContext(null);function Wc(e){e()}var oo=Wc,$c=function(r){return oo=r},Uc=function(){return oo};function qc(){var e=Uc(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var l=r;l;)l.callback(),l=l.next})},get:function(){for(var l=[],a=r;a;)l.push(a),a=a.next;return l},subscribe:function(l){var a=!0,i=t={callback:l,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!a||r===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Ma={notify:function(){},get:function(){return[]}};function lo(e,r){var t,n=Ma;function l(c){return s(),n.subscribe(c)}function a(){n.notify()}function i(){f.onStateChange&&f.onStateChange()}function o(){return Boolean(t)}function s(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=qc())}function p(){t&&(t(),t=void 0,n.clear(),n=Ma)}var f={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:o,trySubscribe:s,tryUnsubscribe:p,getListeners:function(){return n}};return f}var so=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Hi:Ae;function Vc(e){var r=e.store,t=e.context,n=e.children,l=hr(function(){var o=lo(r);return{store:r,subscription:o}},[r]),a=hr(function(){return r.getState()},[r]);so(function(){var o=l.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==r.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[l,a]);var i=t||io;return we.createElement(i.Provider,{value:l},n)}var co={exports:{}},Ce={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vt=60103,Zt=60106,ut=60107,dt=60108,ft=60114,pt=60109,vt=60110,gt=60112,ht=60113,qn=60120,mt=60115,bt=60116,uo=60121,fo=60122,po=60117,vo=60129,go=60131;if(typeof Symbol=="function"&&Symbol.for){var Ue=Symbol.for;Vt=Ue("react.element"),Zt=Ue("react.portal"),ut=Ue("react.fragment"),dt=Ue("react.strict_mode"),ft=Ue("react.profiler"),pt=Ue("react.provider"),vt=Ue("react.context"),gt=Ue("react.forward_ref"),ht=Ue("react.suspense"),qn=Ue("react.suspense_list"),mt=Ue("react.memo"),bt=Ue("react.lazy"),uo=Ue("react.block"),fo=Ue("react.server.block"),po=Ue("react.fundamental"),vo=Ue("react.debug_trace_mode"),go=Ue("react.legacy_hidden")}function fr(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case Vt:switch(e=e.type,e){case ut:case ft:case dt:case ht:case qn:return e;default:switch(e=e&&e.$$typeof,e){case vt:case gt:case bt:case mt:case pt:return e;default:return r}}case Zt:return r}}}var Zc=pt,jc=Vt,Kc=gt,Yc=ut,Xc=bt,Jc=mt,Qc=Zt,eu=ft,ru=dt,tu=ht;Ce.ContextConsumer=vt;Ce.ContextProvider=Zc;Ce.Element=jc;Ce.ForwardRef=Kc;Ce.Fragment=Yc;Ce.Lazy=Xc;Ce.Memo=Jc;Ce.Portal=Qc;Ce.Profiler=eu;Ce.StrictMode=ru;Ce.Suspense=tu;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(e){return fr(e)===vt};Ce.isContextProvider=function(e){return fr(e)===pt};Ce.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vt};Ce.isForwardRef=function(e){return fr(e)===gt};Ce.isFragment=function(e){return fr(e)===ut};Ce.isLazy=function(e){return fr(e)===bt};Ce.isMemo=function(e){return fr(e)===mt};Ce.isPortal=function(e){return fr(e)===Zt};Ce.isProfiler=function(e){return fr(e)===ft};Ce.isStrictMode=function(e){return fr(e)===dt};Ce.isSuspense=function(e){return fr(e)===ht};Ce.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ut||e===ft||e===vo||e===dt||e===ht||e===qn||e===go||typeof e=="object"&&e!==null&&(e.$$typeof===bt||e.$$typeof===mt||e.$$typeof===pt||e.$$typeof===vt||e.$$typeof===gt||e.$$typeof===po||e.$$typeof===uo||e[0]===fo)};Ce.typeOf=fr;(function(e){e.exports=Ce})(co);var nu=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],au=["reactReduxForwardedRef"],iu=[],ou=[null,null];function lu(e,r){var t=e[1];return[r.payload,t+1]}function Na(e,r,t){so(function(){return e.apply(void 0,r)},t)}function su(e,r,t,n,l,a,i){e.current=n,r.current=l,t.current=!1,a.current&&(a.current=null,i())}function cu(e,r,t,n,l,a,i,o,s,p){if(!!e){var f=!1,c=null,d=function(){if(!f){var D=r.getState(),C,b;try{C=n(D,l.current)}catch(y){b=y,c=y}b||(c=null),C===a.current?i.current||s():(a.current=C,o.current=C,i.current=!0,p({type:"STORE_UPDATED",payload:{error:b}}))}};t.onStateChange=d,t.trySubscribe(),d();var g=function(){if(f=!0,t.tryUnsubscribe(),t.onStateChange=null,c)throw c};return g}}var uu=function(){return[null,0]};function du(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,l=n===void 0?function(S){return"ConnectAdvanced("+S+")"}:n,a=t.methodName,i=a===void 0?"connectAdvanced":a,o=t.renderCountProp,s=o===void 0?void 0:o,p=t.shouldHandleStateChanges,f=p===void 0?!0:p,c=t.storeKey,d=c===void 0?"store":c;t.withRef;var g=t.forwardRef,v=g===void 0?!1:g,D=t.context,C=D===void 0?io:D,b=Lr(t,nu),y=C;return function(_){var k=_.displayName||_.name||"Component",T=l(k),I=ee({},b,{getDisplayName:l,methodName:i,renderCountProp:s,shouldHandleStateChanges:f,storeKey:d,displayName:T,wrappedComponentName:k,WrappedComponent:_}),B=b.pure;function O(q){return e(q.dispatch,I)}var z=B?hr:function(q){return q()};function L(q){var Q=hr(function(){var Le=q.reactReduxForwardedRef,pr=Lr(q,au);return[q.context,Le,pr]},[q]),K=Q[0],j=Q[1],G=Q[2],re=hr(function(){return K&&K.Consumer&&co.exports.isContextConsumer(we.createElement(K.Consumer,null))?K:y},[K,y]),ve=zn(re),Ie=Boolean(q.store)&&Boolean(q.store.getState)&&Boolean(q.store.dispatch);Boolean(ve)&&Boolean(ve.store);var de=Ie?q.store:ve.store,De=hr(function(){return O(de)},[de]),Se=hr(function(){if(!f)return ou;var Le=lo(de,Ie?null:ve.subscription),pr=Le.notifyNestedSubs.bind(Le);return[Le,pr]},[de,Ie,ve]),ge=Se[0],ce=Se[1],be=hr(function(){return Ie?ve:ee({},ve,{subscription:ge})},[Ie,ve,ge]),se=Ml(lu,iu,uu),ae=se[0],ke=ae[0],Ne=se[1];if(ke&&ke.error)throw ke.error;var oe=xe(),Ee=xe(G),Ge=xe(),We=xe(!1),Re=z(function(){return Ge.current&&G===Ee.current?Ge.current:De(de.getState(),G)},[de,ke,G]);Na(su,[Ee,oe,We,G,Re,Ge,ce]),Na(cu,[f,de,ge,De,Ee,oe,We,Ge,ce,Ne],[de,ge,De]);var ye=hr(function(){return we.createElement(_,ee({},Re,{ref:j}))},[j,_,Re]),ue=hr(function(){return f?we.createElement(re.Provider,{value:be},ye):ye},[re,ye,be]);return ue}var U=B?we.memo(L):L;if(U.WrappedComponent=_,U.displayName=L.displayName=T,v){var H=we.forwardRef(function(Q,K){return we.createElement(U,ee({},Q,{reactReduxForwardedRef:K}))});return H.displayName=T,H.WrappedComponent=_,xa(H,_)}return xa(U,_)}}function Oa(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function tn(e,r){if(Oa(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!Object.prototype.hasOwnProperty.call(r,t[l])||!Oa(e[t[l]],r[t[l]]))return!1;return!0}function fu(e,r){var t={},n=function(i){var o=e[i];typeof o=="function"&&(t[i]=function(){return r(o.apply(void 0,arguments))})};for(var l in e)n(l);return t}function Vn(e){return function(t,n){var l=e(t,n);function a(){return l}return a.dependsOnOwnProps=!1,a}}function La(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?Boolean(e.dependsOnOwnProps):e.length!==1}function ho(e,r){return function(n,l){l.displayName;var a=function(o,s){return a.dependsOnOwnProps?a.mapToProps(o,s):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,s){a.mapToProps=e,a.dependsOnOwnProps=La(e);var p=a(o,s);return typeof p=="function"&&(a.mapToProps=p,a.dependsOnOwnProps=La(p),p=a(o,s)),p},a}}function pu(e){return typeof e=="function"?ho(e):void 0}function vu(e){return e?void 0:Vn(function(r){return{dispatch:r}})}function gu(e){return e&&typeof e=="object"?Vn(function(r){return fu(e,r)}):void 0}const hu=[pu,vu,gu];function mu(e){return typeof e=="function"?ho(e):void 0}function bu(e){return e?void 0:Vn(function(){return{}})}const wu=[mu,bu];function yu(e,r,t){return ee({},t,e,r)}function xu(e){return function(t,n){n.displayName;var l=n.pure,a=n.areMergedPropsEqual,i=!1,o;return function(p,f,c){var d=e(p,f,c);return i?(!l||!a(d,o))&&(o=d):(i=!0,o=d),o}}}function Du(e){return typeof e=="function"?xu(e):void 0}function Cu(e){return e?void 0:function(){return yu}}const Su=[Du,Cu];var _u=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Iu(e,r,t,n){return function(a,i){return t(e(a,i),r(n,i),i)}}function Eu(e,r,t,n,l){var a=l.areStatesEqual,i=l.areOwnPropsEqual,o=l.areStatePropsEqual,s=!1,p,f,c,d,g;function v(S,_){return p=S,f=_,c=e(p,f),d=r(n,f),g=t(c,d,f),s=!0,g}function D(){return c=e(p,f),r.dependsOnOwnProps&&(d=r(n,f)),g=t(c,d,f),g}function C(){return e.dependsOnOwnProps&&(c=e(p,f)),r.dependsOnOwnProps&&(d=r(n,f)),g=t(c,d,f),g}function b(){var S=e(p,f),_=!o(S,c);return c=S,_&&(g=t(c,d,f)),g}function y(S,_){var k=!i(_,f),T=!a(S,p,_,f);return p=S,f=_,k&&T?D():k?C():T?b():g}return function(_,k){return s?y(_,k):v(_,k)}}function Au(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,l=r.initMergeProps,a=Lr(r,_u),i=t(e,a),o=n(e,a),s=l(e,a),p=a.pure?Eu:Iu;return p(i,o,s,e,a)}var ku=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function nn(e,r,t){for(var n=r.length-1;n>=0;n--){var l=r[n](e);if(l)return l}return function(a,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function Tu(e,r){return e===r}function Ru(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?du:t,l=r.mapStateToPropsFactories,a=l===void 0?wu:l,i=r.mapDispatchToPropsFactories,o=i===void 0?hu:i,s=r.mergePropsFactories,p=s===void 0?Su:s,f=r.selectorFactory,c=f===void 0?Au:f;return function(g,v,D,C){C===void 0&&(C={});var b=C,y=b.pure,S=y===void 0?!0:y,_=b.areStatesEqual,k=_===void 0?Tu:_,T=b.areOwnPropsEqual,I=T===void 0?tn:T,B=b.areStatePropsEqual,O=B===void 0?tn:B,z=b.areMergedPropsEqual,L=z===void 0?tn:z,U=Lr(b,ku),H=nn(g,a,"mapStateToProps"),q=nn(v,o,"mapDispatchToProps"),Q=nn(D,p,"mergeProps");return n(c,ee({methodName:"connect",getDisplayName:function(j){return"Connect("+j+")"},shouldHandleStateChanges:Boolean(g),initMapStateToProps:H,initMapDispatchToProps:q,initMergeProps:Q,pure:S,areStatesEqual:k,areOwnPropsEqual:I,areStatePropsEqual:O,areMergedPropsEqual:L},U))}}const mo=Ru();$c(Nl);function Pu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function bo(e,r){var t=dr(function(){return{inputs:r,result:e()}})[0],n=xe(!0),l=xe(t),a=n.current||Boolean(r&&l.current.inputs&&Pu(r,l.current.inputs)),i=a?l.current:{inputs:r,result:e()};return Ae(function(){n.current=!1,l.current=i},[i]),i.result}function Bu(e,r){return bo(function(){return e},r)}var me=bo,ne=Bu,Mu=!0,an="Invariant failed";function Nu(e,r){if(!e){if(Mu)throw new Error(an);var t=typeof r=="function"?r():r,n=t?"".concat(an,": ").concat(t):an;throw new Error(n)}}var cr=function(r){var t=r.top,n=r.right,l=r.bottom,a=r.left,i=n-a,o=l-t,s={top:t,right:n,bottom:l,left:a,width:i,height:o,x:a,y:t,center:{x:(n+a)/2,y:(l+t)/2}};return s},Zn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Fa=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Ou=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},on={top:0,right:0,bottom:0,left:0},jn=function(r){var t=r.borderBox,n=r.margin,l=n===void 0?on:n,a=r.border,i=a===void 0?on:a,o=r.padding,s=o===void 0?on:o,p=cr(Zn(t,l)),f=cr(Fa(t,i)),c=cr(Fa(f,s));return{marginBox:p,borderBox:cr(t),paddingBox:f,contentBox:c,margin:l,border:i,padding:s}},nr=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var l=Number(t);return isNaN(l)&&Nu(!1),l},Lu=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Bt=function(r,t){var n=r.borderBox,l=r.border,a=r.margin,i=r.padding,o=Ou(n,t);return jn({borderBox:o,border:l,margin:a,padding:i})},Mt=function(r,t){return t===void 0&&(t=Lu()),Bt(r,t)},wo=function(r,t){var n={top:nr(t.marginTop),right:nr(t.marginRight),bottom:nr(t.marginBottom),left:nr(t.marginLeft)},l={top:nr(t.paddingTop),right:nr(t.paddingRight),bottom:nr(t.paddingBottom),left:nr(t.paddingLeft)},a={top:nr(t.borderTopWidth),right:nr(t.borderRightWidth),bottom:nr(t.borderBottomWidth),left:nr(t.borderLeftWidth)};return jn({borderBox:r,margin:n,padding:l,border:a})},yo=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return wo(t,n)},za=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Fu(e,r){return!!(e===r||za(e)&&za(r))}function zu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!Fu(e[t],r[t]))return!1;return!0}function ze(e,r){r===void 0&&(r=zu);var t,n=[],l,a=!1;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&t===this&&r(o,n)||(l=e.apply(this,o),a=!0,t=this,n=o),l}return i}var Hu=function(r){var t=[],n=null,l=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t=o,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return l.cancel=function(){!n||(cancelAnimationFrame(n),n=null)},l};const it=Hu;function xo(e,r){}xo.bind(null,"warn");xo.bind(null,"error");function _r(){}function Gu(e,r){return ee({},e,{},r)}function ir(e,r,t){var n=r.map(function(l){var a=Gu(t,l.options);return e.addEventListener(l.eventName,l.fn,a),function(){e.removeEventListener(l.eventName,l.fn,a)}});return function(){n.forEach(function(a){a()})}}var Wu="Invariant failed";function Nt(e){this.message=e}Nt.prototype.toString=function(){return this.message};function Z(e,r){if(!e)throw new Nt(Wu)}var $u=function(e){Vi(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=_r,n.onWindowError=function(o){var s=n.getCallbacks();s.isDragging()&&s.tryAbort();var p=o.error;p instanceof Nt&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=ir(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(l){if(l instanceof Nt){this.setState({});return}throw l},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(we.Component),Uu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ot=function(r){return r+1},qu=function(r){return`
  You have lifted an item in position `+Ot(r.source.index)+`
`},Do=function(r,t){var n=r.droppableId===t.droppableId,l=Ot(r.index),a=Ot(t.index);return n?`
      You have moved the item from position `+l+`
      to position `+a+`
    `:`
    You have moved the item from position `+l+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+a+`
  `},Co=function(r,t,n){var l=t.droppableId===n.droppableId;return l?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Vu=function(r){var t=r.destination;if(t)return Do(r.source,t);var n=r.combine;return n?Co(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},Ha=function(r){return`
  The item has returned to its starting position
  of `+Ot(r.index)+`
`},Zu=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+Ha(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+Do(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+Co(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ha(r.source)+`
  `},Tt={dragHandleUsageInstructions:Uu,onDragStart:qu,onDragUpdate:Vu,onDragEnd:Zu},He={x:0,y:0},qe=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},Je=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Ir=function(r,t){return r.x===t.x&&r.y===t.y},Xr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},Fr=function(r,t,n){var l;return n===void 0&&(n=0),l={},l[r]=t,l[r==="x"?"y":"x"]=n,l},ot=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Ga=function(r,t){return Math.min.apply(Math,t.map(function(n){return ot(r,n)}))},So=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},ju=function(e,r){var t=cr({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},wt=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Wa=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},Ku={top:0,right:0,bottom:0,left:0},Yu=function(r,t){return t?wt(r,t.scroll.diff.displacement):r},Xu=function(r,t,n){if(n&&n.increasedBy){var l;return ee({},r,(l={},l[t.end]=r[t.end]+n.increasedBy[t.line],l))}return r},Ju=function(r,t){return t&&t.shouldClipSubject?ju(t.pageMarginBox,r):cr(r)},Vr=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,l=e.frame,a=Yu(r.marginBox,l),i=Xu(a,n,t),o=Ju(i,l);return{page:r,withPlaceholder:t,active:o}},Kn=function(e,r){e.frame||Z(!1);var t=e.frame,n=Je(r,t.scroll.initial),l=Xr(n),a=ee({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:l},max:t.scroll.max}}),i=Vr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=ee({},e,{frame:a,subject:i});return o};function Lt(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Yn(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function kr(e,r){if(e.find)return e.find(r);var t=Yn(e,r);if(t!==-1)return e[t]}function _o(e){return Array.prototype.slice.call(e)}var Io=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Eo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),jt=ze(function(e){return Lt(e)}),Qu=ze(function(e){return Lt(e)}),Jr=ze(function(e,r){var t=Qu(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,l){return n.descriptor.index-l.descriptor.index});return t});function Xn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Kt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Yt=ze(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),ed=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var i=Xn(a);if(!i)return null;function o(D){var C={type:"COMBINE",combine:{draggableId:D,droppableId:n.descriptor.id}};return ee({},a,{at:C})}var s=a.displaced.all,p=s.length?s[0]:null;if(r)return p?o(p):null;var f=Yt(t,l);if(!p){if(!f.length)return null;var c=f[f.length-1];return o(c.descriptor.id)}var d=Yn(f,function(D){return D.descriptor.id===p});d===-1&&Z(!1);var g=d-1;if(g<0)return null;var v=f[g];return o(v.descriptor.id)},Qr=function(e,r){return e.descriptor.droppableId===r.descriptor.id},Ao={point:He,value:0},lt={invisible:{},visible:{},all:[]},rd={displaced:lt,displacedBy:Ao,at:null},or=function(e,r){return function(t){return e<=t&&t<=r}},ko=function(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(l)return!0;var a=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),o=a&&i;if(o)return!0;var s=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,f=s&&p;if(f)return!0;var c=s&&i||p&&a;return c}},td=function(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return l}},Jn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},To={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},nd=function(e){return function(r){var t=or(r.top,r.bottom),n=or(r.left,r.right);return function(l){return e===Jn?t(l.top)&&t(l.bottom):n(l.left)&&n(l.right)}}},ad=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:He;return wt(r,n)},id=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},od=function(r,t,n){return n(t)(r)},Qn=function(r){var t=r.target,n=r.destination,l=r.viewport,a=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,o=a?ad(t,n):t;return id(o,n,i)&&od(o,l,i)},ld=function(r){return Qn(ee({},r,{isVisibleThroughFrameFn:ko}))},Ro=function(r){return Qn(ee({},r,{isVisibleThroughFrameFn:td}))},sd=function(r){return Qn(ee({},r,{isVisibleThroughFrameFn:nd(r.destination.axis)}))},cd=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var l=t.invisible,a=t.visible;if(l[r])return!1;var i=a[r];return i?i.shouldAnimate:!0};function ud(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return cr(Zn(t,n))}function st(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,l=e.viewport,a=e.forceShouldAnimate,i=e.last;return r.reduce(function(s,p){var f=ud(p,n),c=p.descriptor.id;s.all.push(c);var d=ld({target:f,destination:t,viewport:l,withDroppableDisplacement:!0});if(!d)return s.invisible[p.descriptor.id]=!0,s;var g=cd(c,i,a),v={draggableId:c,shouldAnimate:g};return s.visible[c]=v,s},{all:[],visible:{},invisible:{}})}function dd(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function $a(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,l=e.destination,a=dd(r,{inHomeList:t});return{displaced:lt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:a}}}}function Ft(e){var r=e.draggable,t=e.insideDestination,n=e.destination,l=e.viewport,a=e.displacedBy,i=e.last,o=e.index,s=e.forceShouldAnimate,p=Qr(r,n);if(o==null)return $a({insideDestination:t,inHomeList:p,displacedBy:a,destination:n});var f=kr(t,function(D){return D.descriptor.index===o});if(!f)return $a({insideDestination:t,inHomeList:p,displacedBy:a,destination:n});var c=Yt(r,t),d=t.indexOf(f),g=c.slice(d),v=st({afterDragging:g,destination:n,displacedBy:a,last:i,viewport:l.frame,forceShouldAnimate:s});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ar(e,r){return Boolean(r.effected[e])}var fd=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,l=e.combine,a=e.afterCritical;if(!t.isCombineEnabled)return null;var i=l.draggableId,o=n[i],s=o.descriptor.index,p=Ar(i,a);return p?r?s:s-1:r?s+1:s},pd=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,l=e.location;if(!n.length)return null;var a=l.index,i=r?a+1:a-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,p=t?s:s+1;return i<o||i>p?null:i},vd=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,l=e.draggables,a=e.destination,i=e.insideDestination,o=e.previousImpact,s=e.viewport,p=e.afterCritical,f=o.at;if(f||Z(!1),f.type==="REORDER"){var c=pd({isMovingForward:r,isInHomeList:t,location:f.destination,insideDestination:i});return c==null?null:Ft({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:c})}var d=fd({isMovingForward:r,destination:a,displaced:o.displaced,draggables:l,combine:f.combine,afterCritical:p});return d==null?null:Ft({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:d})},gd=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,l=e.displacedBy,a=Boolean(r.visible[n]||r.invisible[n]);return Ar(n,t)?a?He:Xr(l.point):a?l.point:He},hd=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,l=Kt(t);l||Z(!1);var a=l.draggableId,i=n[a].page.borderBox.center,o=gd({displaced:t.displaced,afterCritical:r,combineWith:a,displacedBy:t.displacedBy});return qe(i,o)},Po=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},md=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},ea=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Ua=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Fr(t.line,n.marginBox[t.end]+Po(t,l),ea(t,n.marginBox,l))},qa=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Fr(t.line,n.marginBox[t.start]-md(t,l),ea(t,n.marginBox,l))},bd=function(r){var t=r.axis,n=r.moveInto,l=r.isMoving;return Fr(t.line,n.contentBox[t.start]+Po(t,l),ea(t,n.contentBox,l))},wd=function(e){var r=e.impact,t=e.draggable,n=e.draggables,l=e.droppable,a=e.afterCritical,i=Jr(l.descriptor.id,n),o=t.page,s=l.axis;if(!i.length)return bd({axis:s,moveInto:l.page,isMoving:o});var p=r.displaced,f=r.displacedBy,c=p.all[0];if(c){var d=n[c];if(Ar(c,a))return qa({axis:s,moveRelativeTo:d.page,isMoving:o});var g=Bt(d.page,f.point);return qa({axis:s,moveRelativeTo:g,isMoving:o})}var v=i[i.length-1];if(v.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ar(v.descriptor.id,a)){var D=Bt(v.page,Xr(a.displacedBy.point));return Ua({axis:s,moveRelativeTo:D,isMoving:o})}return Ua({axis:s,moveRelativeTo:v.page,isMoving:o})},Rn=function(e,r){var t=e.frame;return t?qe(r,t.scroll.diff.displacement):r},yd=function(r){var t=r.impact,n=r.draggable,l=r.droppable,a=r.draggables,i=r.afterCritical,o=n.page.borderBox.center,s=t.at;return!l||!s?o:s.type==="REORDER"?wd({impact:t,draggable:n,draggables:a,droppable:l,afterCritical:i}):hd({impact:t,draggables:a,afterCritical:i})},Xt=function(e){var r=yd(e),t=e.droppable,n=t?Rn(t,r):r;return n},Bo=function(e,r){var t=Je(r,e.scroll.initial),n=Xr(t),l=cr({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),a={frame:l,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return a};function Va(e,r){return e.map(function(t){return r[t]})}function xd(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var Dd=function(e){var r=e.impact,t=e.viewport,n=e.destination,l=e.draggables,a=e.maxScrollChange,i=Bo(t,qe(t.scroll.current,a)),o=n.frame?Kn(n,qe(n.frame.scroll.current,a)):n,s=r.displaced,p=st({afterDragging:Va(s.all,l),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:s,forceShouldAnimate:!1}),f=st({afterDragging:Va(s.all,l),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),c={},d={},g=[s,p,f];s.all.forEach(function(D){var C=xd(D,g);if(C){d[D]=C;return}c[D]=!0});var v=ee({},r,{displaced:{all:s.all,invisible:c,visible:d}});return v},Cd=function(e,r){return qe(e.scroll.diff.displacement,r)},ra=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,l=Cd(n,r),a=Je(l,t.page.borderBox.center);return qe(t.client.borderBox.center,a)},Mo=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,l=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,o=i===void 0?!1:i,s=Je(n,r.page.borderBox.center),p=wt(r.page.borderBox,s),f={target:p,destination:t,withDroppableDisplacement:a,viewport:l};return o?sd(f):Ro(f)},Sd=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.draggables,a=e.previousImpact,i=e.viewport,o=e.previousPageBorderBoxCenter,s=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var f=Jr(n.descriptor.id,l),c=Qr(t,n),d=ed({isMovingForward:r,draggable:t,destination:n,insideDestination:f,previousImpact:a})||vd({isMovingForward:r,isInHomeList:c,draggable:t,draggables:l,destination:n,insideDestination:f,previousImpact:a,viewport:i,afterCritical:p});if(!d)return null;var g=Xt({impact:d,draggable:t,droppable:n,draggables:l,afterCritical:p}),v=Mo({draggable:t,destination:n,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var D=ra({pageBorderBoxCenter:g,draggable:t,viewport:i});return{clientSelection:D,impact:d,scrollJumpRequest:null}}var C=Je(g,o),b=Dd({impact:d,viewport:i,destination:n,draggables:l,maxScrollChange:C});return{clientSelection:s,impact:b,scrollJumpRequest:C}},Ke=function(r){var t=r.subject.active;return t||Z(!1),t},_d=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,l=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var o=n.axis,s=or(i[o.start],i[o.end]),p=jt(l).filter(function(c){return c!==n}).filter(function(c){return c.isEnabled}).filter(function(c){return Boolean(c.subject.active)}).filter(function(c){return ko(a.frame)(Ke(c))}).filter(function(c){var d=Ke(c);return r?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(function(c){var d=Ke(c),g=or(d[o.start],d[o.end]);return s(d[o.start])||s(d[o.end])||g(i[o.start])||g(i[o.end])}).sort(function(c,d){var g=Ke(c)[o.crossAxisStart],v=Ke(d)[o.crossAxisStart];return r?g-v:v-g}).filter(function(c,d,g){return Ke(c)[o.crossAxisStart]===Ke(g[0])[o.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var f=p.filter(function(c){var d=or(Ke(c)[o.start],Ke(c)[o.end]);return d(t[o.line])});return f.length===1?f[0]:f.length>1?f.sort(function(c,d){return Ke(c)[o.start]-Ke(d)[o.start]})[0]:p.sort(function(c,d){var g=Ga(t,Wa(Ke(c))),v=Ga(t,Wa(Ke(d)));return g!==v?g-v:Ke(c)[o.start]-Ke(d)[o.start]})[0]},Za=function(r,t){var n=r.page.borderBox.center;return Ar(r.descriptor.id,t)?Je(n,t.displacedBy.point):n},Id=function(r,t){var n=r.page.borderBox;return Ar(r.descriptor.id,t)?wt(n,Xr(t.displacedBy.point)):n},Ed=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,l=e.insideDestination,a=e.afterCritical,i=l.filter(function(o){return Ro({target:Id(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(o,s){var p=ot(r,Rn(n,Za(o,a))),f=ot(r,Rn(n,Za(s,a)));return p<f?-1:f<p?1:o.descriptor.index-s.descriptor.index});return i[0]||null},yt=ze(function(r,t){var n=t[r.line];return{value:n,point:Fr(r.line,n)}}),Ad=function(r,t,n){var l=r.axis;if(r.descriptor.mode==="virtual")return Fr(l.line,t[l.line]);var a=r.subject.page.contentBox[l.size],i=Jr(r.descriptor.id,n),o=i.reduce(function(f,c){return f+c.client.marginBox[l.size]},0),s=o+t[l.line],p=s-a;return p<=0?null:Fr(l.line,p)},No=function(r,t){return ee({},r,{scroll:ee({},r.scroll,{max:t})})},Oo=function(r,t,n){var l=r.frame;Qr(t,r)&&Z(!1),r.subject.withPlaceholder&&Z(!1);var a=yt(r.axis,t.displaceBy).point,i=Ad(r,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!l){var s=Vr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:r.frame});return ee({},r,{subject:s})}var p=i?qe(l.scroll.max,i):l.scroll.max,f=No(l,p),c=Vr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:f});return ee({},r,{subject:c,frame:f})},kd=function(r){var t=r.subject.withPlaceholder;t||Z(!1);var n=r.frame;if(!n){var l=Vr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return ee({},r,{subject:l})}var a=t.oldFrameMaxScroll;a||Z(!1);var i=No(n,a),o=Vr({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return ee({},r,{subject:o,frame:i})},Td=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,l=e.draggable,a=e.draggables,i=e.destination,o=e.viewport,s=e.afterCritical;if(!t){if(n.length)return null;var p={displaced:lt,displacedBy:Ao,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=Xt({impact:p,draggable:l,droppable:i,draggables:a,afterCritical:s}),c=Qr(l,i)?i:Oo(i,l,a),d=Mo({draggable:l,destination:c,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?p:null}var g=Boolean(r[i.axis.line]<=t.page.borderBox.center[i.axis.line]),v=function(){var C=t.descriptor.index;return t.descriptor.id===l.descriptor.id||g?C:C+1}(),D=yt(i.axis,l.displaceBy);return Ft({draggable:l,insideDestination:n,destination:i,viewport:o,displacedBy:D,last:lt,index:v})},Rd=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,l=e.isOver,a=e.draggables,i=e.droppables,o=e.viewport,s=e.afterCritical,p=_d({isMovingForward:r,pageBorderBoxCenter:t,source:l,droppables:i,viewport:o});if(!p)return null;var f=Jr(p.descriptor.id,a),c=Ed({pageBorderBoxCenter:t,viewport:o,destination:p,insideDestination:f,afterCritical:s}),d=Td({previousPageBorderBoxCenter:t,destination:p,draggable:n,draggables:a,moveRelativeTo:c,insideDestination:f,viewport:o,afterCritical:s});if(!d)return null;var g=Xt({impact:d,draggable:n,droppable:p,draggables:a,afterCritical:s}),v=ra({pageBorderBoxCenter:g,draggable:n,viewport:o});return{clientSelection:v,impact:d,scrollJumpRequest:null}},Qe=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},Pd=function(r,t){var n=Qe(r);return n?t[n]:null},Bd=function(e){var r=e.state,t=e.type,n=Pd(r.impact,r.dimensions.droppables),l=Boolean(n),a=r.dimensions.droppables[r.critical.droppable.id],i=n||a,o=i.axis.direction,s=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(s&&!l)return null;var p=t==="MOVE_DOWN"||t==="MOVE_RIGHT",f=r.dimensions.draggables[r.critical.draggable.id],c=r.current.page.borderBoxCenter,d=r.dimensions,g=d.draggables,v=d.droppables;return s?Sd({isMovingForward:p,previousPageBorderBoxCenter:c,draggable:f,destination:i,draggables:g,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):Rd({isMovingForward:p,previousPageBorderBoxCenter:c,draggable:f,isOver:i,draggables:g,droppables:v,viewport:r.viewport,afterCritical:r.afterCritical})};function Nr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Lo(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(l){return r(l.y)&&t(l.x)}}function Md(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function Nd(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,l=t.page.borderBox.center,a=n.map(function(i){var o=i.axis,s=Fr(i.axis.line,r.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:ot(l,s)}}).sort(function(i,o){return o.distance-i.distance});return a[0]?a[0].id:null}function Od(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,l=jt(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!Md(r,i))return!1;if(Lo(i)(r.center))return!0;var o=a.axis,s=i.center[o.crossAxisLine],p=r[o.crossAxisStart],f=r[o.crossAxisEnd],c=or(i[o.crossAxisStart],i[o.crossAxisEnd]),d=c(p),g=c(f);return!d&&!g?!0:d?p<s:f>s});return l.length?l.length===1?l[0].descriptor.id:Nd({pageBorderBox:r,draggable:t,candidates:l}):null}var Fo=function(r,t){return cr(wt(r,t))},Ld=function(e,r){var t=e.frame;return t?Fo(r,t.scroll.diff.value):r};function zo(e){var r=e.displaced,t=e.id;return Boolean(r.visible[t]||r.invisible[t])}function Fd(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var zd=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.last,i=e.viewport,o=e.afterCritical,s=n.axis,p=yt(n.axis,t.displaceBy),f=p.value,c=r[s.start],d=r[s.end],g=Yt(t,l),v=kr(g,function(C){var b=C.descriptor.id,y=C.page.borderBox.center[s.line],S=Ar(b,o),_=zo({displaced:a,id:b});return S?_?d<=y:c<y-f:_?d<=y+f:c<y}),D=Fd({draggable:t,closest:v,inHomeList:Qr(t,n)});return Ft({draggable:t,insideDestination:l,destination:n,viewport:i,last:a,displacedBy:p,index:D})},Hd=4,Gd=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,l=e.destination,a=e.insideDestination,i=e.afterCritical;if(!l.isCombineEnabled)return null;var o=l.axis,s=yt(l.axis,r.displaceBy),p=s.value,f=t[o.start],c=t[o.end],d=Yt(r,a),g=kr(d,function(D){var C=D.descriptor.id,b=D.page.borderBox,y=b[o.size],S=y/Hd,_=Ar(C,i),k=zo({displaced:n.displaced,id:C});return _?k?c>b[o.start]+S&&c<b[o.end]-S:f>b[o.start]-p+S&&f<b[o.end]-p-S:k?c>b[o.start]+p+S&&c<b[o.end]+p-S:f>b[o.start]+S&&f<b[o.end]-S});if(!g)return null;var v={displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:l.descriptor.id}}};return v},Ho=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,l=e.droppables,a=e.previousImpact,i=e.viewport,o=e.afterCritical,s=Fo(t.page.borderBox,r),p=Od({pageBorderBox:s,draggable:t,droppables:l});if(!p)return rd;var f=l[p],c=Jr(f.descriptor.id,n),d=Ld(f,s);return Gd({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:a,destination:f,insideDestination:c,afterCritical:o})||zd({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:f,insideDestination:c,last:a.displaced,viewport:i,afterCritical:o})},ta=function(e,r){var t;return ee({},e,(t={},t[r.descriptor.id]=r,t))},Wd=function(r){var t=r.previousImpact,n=r.impact,l=r.droppables,a=Qe(t),i=Qe(n);if(!a||a===i)return l;var o=l[a];if(!o.subject.withPlaceholder)return l;var s=kd(o);return ta(l,s)},$d=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,l=e.previousImpact,a=e.impact,i=Wd({previousImpact:l,impact:a,droppables:n}),o=Qe(a);if(!o)return i;var s=n[o];if(Qr(r,s)||s.subject.withPlaceholder)return i;var p=Oo(s,r,t);return ta(i,p)},nt=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,l=e.viewport,a=e.impact,i=e.scrollJumpRequest,o=l||r.viewport,s=n||r.dimensions,p=t||r.current.client.selection,f=Je(p,r.initial.client.selection),c={offset:f,selection:p,borderBoxCenter:qe(r.initial.client.borderBoxCenter,f)},d={selection:qe(c.selection,o.scroll.current),borderBoxCenter:qe(c.borderBoxCenter,o.scroll.current),offset:qe(c.offset,o.scroll.diff.value)},g={client:c,page:d};if(r.phase==="COLLECTING")return ee({phase:"COLLECTING"},r,{dimensions:s,viewport:o,current:g});var v=s.draggables[r.critical.draggable.id],D=a||Ho({pageOffset:d.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),C=$d({draggable:v,impact:D,previousImpact:r.impact,draggables:s.draggables,droppables:s.droppables}),b=ee({},r,{current:g,dimensions:{draggables:s.draggables,droppables:C},impact:D,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return b};function Ud(e,r){return e.map(function(t){return r[t]})}var Go=function(e){var r=e.impact,t=e.viewport,n=e.draggables,l=e.destination,a=e.forceShouldAnimate,i=r.displaced,o=Ud(i.all,n),s=st({afterDragging:o,destination:l,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return ee({},r,{displaced:s})},Wo=function(e){var r=e.impact,t=e.draggable,n=e.droppable,l=e.draggables,a=e.viewport,i=e.afterCritical,o=Xt({impact:r,draggable:t,draggables:l,droppable:n,afterCritical:i});return ra({pageBorderBoxCenter:o,draggable:t,viewport:a})},$o=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&Z(!1);var l=r.impact,a=n||r.viewport,i=t||r.dimensions,o=i.draggables,s=i.droppables,p=o[r.critical.draggable.id],f=Qe(l);f||Z(!1);var c=s[f],d=Go({impact:l,viewport:a,destination:c,draggables:o}),g=Wo({impact:d,draggable:p,droppable:c,draggables:o,viewport:a,afterCritical:r.afterCritical});return nt({impact:d,clientSelection:g,state:r,dimensions:i,viewport:a})},qd=function(e){return{index:e.index,droppableId:e.droppableId}},Uo=function(e){var r=e.draggable,t=e.home,n=e.draggables,l=e.viewport,a=yt(t.axis,r.displaceBy),i=Jr(t.descriptor.id,n),o=i.indexOf(r);o===-1&&Z(!1);var s=i.slice(o+1),p=s.reduce(function(g,v){return g[v.descriptor.id]=!0,g},{}),f={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:p},c=st({afterDragging:s,destination:t,displacedBy:a,last:null,viewport:l.frame,forceShouldAnimate:!1}),d={displaced:c,displacedBy:a,at:{type:"REORDER",destination:qd(r.descriptor)}};return{impact:d,afterCritical:f}},Vd=function(e,r){return{draggables:e.draggables,droppables:ta(e.droppables,r)}},Zd=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,l=Bt(r.client,t),a=Mt(l,n),i=ee({},r,{placeholder:ee({},r.placeholder,{client:l}),client:l,page:a});return i},jd=function(e){var r=e.frame;return r||Z(!1),r},Kd=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,l=n.scroll.diff.value;return r.map(function(a){var i=a.descriptor.droppableId,o=t[i],s=jd(o),p=s.scroll.diff.value,f=qe(l,p),c=Zd({draggable:a,offset:f,initialWindowScroll:n.scroll.initial});return c})},Yd=function(e){var r=e.state,t=e.published,n=t.modified.map(function(S){var _=r.dimensions.droppables[S.droppableId],k=Kn(_,S.scroll);return k}),l=ee({},r.dimensions.droppables,{},Io(n)),a=Eo(Kd({additions:t.additions,updatedDroppables:l,viewport:r.viewport})),i=ee({},r.dimensions.draggables,{},a);t.removals.forEach(function(S){delete i[S]});var o={droppables:l,draggables:i},s=Qe(r.impact),p=s?o.droppables[s]:null,f=o.draggables[r.critical.draggable.id],c=o.droppables[r.critical.droppable.id],d=Uo({draggable:f,home:c,draggables:i,viewport:r.viewport}),g=d.impact,v=d.afterCritical,D=p&&p.isCombineEnabled?r.impact:g,C=Ho({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:D,viewport:r.viewport,afterCritical:v}),b=ee({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:C,onLiftImpact:g,dimensions:o,afterCritical:v,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return b;var y=ee({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return y},Pn=function(r){return r.movementMode==="SNAP"},ln=function(r,t,n){var l=Vd(r.dimensions,t);return!Pn(r)||n?nt({state:r,dimensions:l}):$o({state:r,dimensions:l})};function sn(e){return e.isDragging&&e.movementMode==="SNAP"?ee({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ja={phase:"IDLE",completed:null,shouldFlush:!1},Xd=function(e,r){if(e===void 0&&(e=ja),r.type==="FLUSH")return ee({},ja,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Z(!1);var t=r.payload,n=t.critical,l=t.clientSelection,a=t.viewport,i=t.dimensions,o=t.movementMode,s=i.draggables[n.draggable.id],p=i.droppables[n.droppable.id],f={selection:l,borderBoxCenter:s.client.borderBox.center,offset:He},c={client:f,page:{selection:qe(f.selection,a.scroll.initial),borderBoxCenter:qe(f.selection,a.scroll.initial),offset:qe(f.selection,a.scroll.diff.value)}},d=jt(i.droppables).every(function(Ne){return!Ne.isFixedOnPage}),g=Uo({draggable:s,home:p,draggables:i.draggables,viewport:a}),v=g.impact,D=g.afterCritical,C={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:c,current:c,isWindowScrollAllowed:d,impact:v,afterCritical:D,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return C}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z(!1);var b=ee({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Z(!1),Yd({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var y=r.payload.client;return Ir(y,e.current.client.selection)?e:nt({state:e,clientSelection:y,impact:Pn(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return sn(e);Nr(e)||Z(!1);var S=r.payload,_=S.id,k=S.newScroll,T=e.dimensions.droppables[_];if(!T)return e;var I=Kn(T,k);return ln(e,I,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var B=r.payload,O=B.id,z=B.isEnabled,L=e.dimensions.droppables[O];L||Z(!1),L.isEnabled===z&&Z(!1);var U=ee({},L,{isEnabled:z});return ln(e,U,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var H=r.payload,q=H.id,Q=H.isCombineEnabled,K=e.dimensions.droppables[q];K||Z(!1),K.isCombineEnabled===Q&&Z(!1);var j=ee({},K,{isCombineEnabled:Q});return ln(e,j,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Nr(e)||Z(!1),e.isWindowScrollAllowed||Z(!1);var G=r.payload.newScroll;if(Ir(e.viewport.scroll.current,G))return sn(e);var re=Bo(e.viewport,G);return Pn(e)?$o({state:e,viewport:re}):nt({state:e,viewport:re})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Nr(e))return e;var ve=r.payload.maxScroll;if(Ir(ve,e.viewport.scroll.max))return e;var Ie=ee({},e.viewport,{scroll:ee({},e.viewport.scroll,{max:ve})});return ee({phase:"DRAGGING"},e,{viewport:Ie})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z(!1);var de=Bd({state:e,type:r.type});return de?nt({state:e,impact:de.impact,clientSelection:de.clientSelection,scrollJumpRequest:de.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var De=r.payload.reason;e.phase!=="COLLECTING"&&Z(!1);var Se=ee({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:De});return Se}if(r.type==="DROP_ANIMATE"){var ge=r.payload,ce=ge.completed,be=ge.dropDuration,se=ge.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Z(!1);var ae={phase:"DROP_ANIMATING",completed:ce,dropDuration:be,newHomeClientOffset:se,dimensions:e.dimensions};return ae}if(r.type==="DROP_COMPLETE"){var ke=r.payload.completed;return{phase:"IDLE",completed:ke,shouldFlush:!1}}return e},Jd=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},Qd=function(r){return{type:"LIFT",payload:r}},ef=function(r){return{type:"INITIAL_PUBLISH",payload:r}},rf=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},tf=function(){return{type:"COLLECTION_STARTING",payload:null}},nf=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},af=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},of=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},qo=function(r){return{type:"MOVE",payload:r}},lf=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},sf=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},cf=function(){return{type:"MOVE_UP",payload:null}},uf=function(){return{type:"MOVE_DOWN",payload:null}},df=function(){return{type:"MOVE_RIGHT",payload:null}},ff=function(){return{type:"MOVE_LEFT",payload:null}},na=function(){return{type:"FLUSH",payload:null}},pf=function(r){return{type:"DROP_ANIMATE",payload:r}},aa=function(r){return{type:"DROP_COMPLETE",payload:r}},Vo=function(r){return{type:"DROP",payload:r}},vf=function(r){return{type:"DROP_PENDING",payload:r}},Zo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},gf=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(l){return function(a){if(a.type!=="LIFT"){l(a);return}var i=a.payload,o=i.id,s=i.clientSelection,p=i.movementMode,f=t();f.phase==="DROP_ANIMATING"&&n(aa({completed:f.completed})),t().phase!=="IDLE"&&Z(!1),n(na()),n(Jd({draggableId:o,movementMode:p}));var c={shouldPublishImmediately:p==="SNAP"},d={draggableId:o,scrollOptions:c},g=e.startPublishing(d),v=g.critical,D=g.dimensions,C=g.viewport;n(ef({critical:v,dimensions:D,clientSelection:s,movementMode:p,viewport:C}))}}}},hf=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},ia={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ct={opacity:{drop:0,combining:.7},scale:{drop:.75}},oa={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Rr=oa.outOfTheWay+"s "+ia.outOfTheWay,at={fluid:"opacity "+Rr,snap:"transform "+Rr+", opacity "+Rr,drop:function(r){var t=r+"s "+ia.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Rr,placeholder:"height "+Rr+", width "+Rr+", margin "+Rr},Ka=function(r){return Ir(r,He)?null:"translate("+r.x+"px, "+r.y+"px)"},Bn={moveTo:Ka,drop:function(r,t){var n=Ka(r);return n?t?n+" scale("+ct.scale.drop+")":n:null}},Mn=oa.minDropTime,jo=oa.maxDropTime,mf=jo-Mn,Ya=1500,bf=.6,wf=function(e){var r=e.current,t=e.destination,n=e.reason,l=ot(r,t);if(l<=0)return Mn;if(l>=Ya)return jo;var a=l/Ya,i=Mn+mf*a,o=n==="CANCEL"?i*bf:i;return Number(o.toFixed(2))},yf=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,l=e.viewport,a=e.afterCritical,i=n.draggables,o=n.droppables,s=Qe(r),p=s?o[s]:null,f=o[t.descriptor.droppableId],c=Wo({impact:r,draggable:t,draggables:i,afterCritical:a,droppable:p||f,viewport:l}),d=Je(c,t.client.borderBox.center);return d},xf=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,l=e.home,a=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var o=Go({draggables:r,impact:i,destination:l,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var s=ee({},n,{displaced:lt});return{impact:s,didDropInsideDroppable:!0}},Df=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(l){if(l.type!=="DROP"){n(l);return}var a=r(),i=l.payload.reason;if(a.phase==="COLLECTING"){t(vf({reason:i}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Z(!1),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Z(!1);var s=a.critical,p=a.dimensions,f=p.draggables[a.critical.draggable.id],c=xf({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,g=c.didDropInsideDroppable,v=g?Xn(d):null,D=g?Kt(d):null,C={index:s.draggable.index,droppableId:s.droppable.id},b={draggableId:f.descriptor.id,type:f.descriptor.type,source:C,reason:i,mode:a.movementMode,destination:v,combine:D},y=yf({impact:d,draggable:f,dimensions:p,viewport:a.viewport,afterCritical:a.afterCritical}),S={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:d},_=!Ir(a.current.client.offset,y)||Boolean(b.combine);if(!_){t(aa({completed:S}));return}var k=wf({current:a.current.client.offset,destination:y,reason:i}),T={newHomeClientOffset:y,dropDuration:k,completed:S};t(pf(T))}}}},Ko=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Cf(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function Sf(e){var r=e.onWindowScroll;function t(){r(Ko())}var n=it(t),l=Cf(n),a=_r;function i(){return a!==_r}function o(){i()&&Z(!1),a=ir(window,[l])}function s(){i()||Z(!1),n.cancel(),a(),a=_r}return{start:o,stop:s,isActive:i}}var _f=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},If=function(e){var r=Sf({onWindowScroll:function(n){e.dispatch(lf({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&_f(n)&&r.stop(),t(n)}}},Ef=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),l=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return l.wasCalled=function(){return r},l},Af=function(){var e=[],r=function(a){var i=Yn(e,function(p){return p.timerId===a});i===-1&&Z(!1);var o=e.splice(i,1),s=o[0];s.callback()},t=function(a){var i=setTimeout(function(){return r(i)}),o={timerId:i,callback:a};e.push(o)},n=function(){if(!!e.length){var a=[].concat(e);e.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}},kf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},Tf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},Rf=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,l=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&l},et=function(r,t){t()},_t=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},cn=function(r,t,n,l){if(!r){n(l(t));return}var a=Ef(n),i={announce:a};r(t,i),a.wasCalled()||n(l(t))},Pf=function(e,r){var t=Af(),n=null,l=function(d,g){n&&Z(!1),et("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var D={draggableId:d,mode:g};v(D)}})},a=function(d,g){n&&Z(!1),et("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(_t(d,g))})},i=function(d,g){n&&Z(!1);var v=_t(d,g);n={mode:g,lastCritical:d,lastLocation:v.source,lastCombine:null},t.add(function(){et("onDragStart",function(){return cn(e().onDragStart,v,r,Tt.onDragStart)})})},o=function(d,g){var v=Xn(g),D=Kt(g);n||Z(!1);var C=!Rf(d,n.lastCritical);C&&(n.lastCritical=d);var b=!kf(n.lastLocation,v);b&&(n.lastLocation=v);var y=!Tf(n.lastCombine,D);if(y&&(n.lastCombine=D),!(!C&&!b&&!y)){var S=ee({},_t(d,n.mode),{combine:D,destination:v});t.add(function(){et("onDragUpdate",function(){return cn(e().onDragUpdate,S,r,Tt.onDragUpdate)})})}},s=function(){n||Z(!1),t.flush()},p=function(d){n||Z(!1),n=null,et("onDragEnd",function(){return cn(e().onDragEnd,d,r,Tt.onDragEnd)})},f=function(){if(!!n){var d=ee({},_t(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(d)}};return{beforeCapture:l,beforeStart:a,start:i,update:o,flush:s,drop:p,abort:f}},Bf=function(e,r){var t=Pf(e,r);return function(n){return function(l){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;t.beforeStart(i,a.payload.movementMode),l(a),t.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;t.flush(),l(a),t.drop(o);return}if(l(a),a.type==="FLUSH"){t.abort();return}var s=n.getState();s.phase==="DRAGGING"&&t.update(s.critical,s.impact)}}}},Mf=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&Z(!1),e.dispatch(aa({completed:n.completed}))}}},Nf=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(l){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),l(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var s=e.getState();s.phase==="DROP_ANIMATING"&&e.dispatch(Zo())}};t=requestAnimationFrame(function(){t=null,r=ir(window,[i])})}}}},Of=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},Lf=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var l=n.payload.completed.result;l.combine&&e.tryShiftRecord(l.draggableId,l.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Ff=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},zf=function(e){return function(r){return function(t){return function(n){if(Ff(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var l=r.getState();l.phase!=="DRAGGING"&&Z(!1),e.start(l);return}t(n),e.scroll(r.getState())}}}},Hf=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vo({reason:n.reason})))}}}},Gf=ao,Wf=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,l=e.getResponders,a=e.announce,i=e.autoScroller;return no(Xd,Gf(Gc(hf(n),Of(r),gf(r),Df,Mf,Nf,Hf,zf(i),If,Lf(t),Bf(l,a))))},un=function(){return{additions:{},removals:{},modified:{}}};function $f(e){var r=e.registry,t=e.callbacks,n=un(),l=null,a=function(){l||(t.collectionStarting(),l=requestAnimationFrame(function(){l=null;var f=n,c=f.additions,d=f.removals,g=f.modified,v=Object.keys(c).map(function(b){return r.draggable.getById(b).getDimension(He)}).sort(function(b,y){return b.descriptor.index-y.descriptor.index}),D=Object.keys(g).map(function(b){var y=r.droppable.getById(b),S=y.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:S}}),C={additions:v,removals:Object.keys(d),modified:D};n=un(),t.publish(C)}))},i=function(f){var c=f.descriptor.id;n.additions[c]=f,n.modified[f.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],a()},o=function(f){var c=f.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],a()},s=function(){!l||(cancelAnimationFrame(l),l=null,n=un())};return{add:i,remove:o,stop:s}}var Yo=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,l=e.width,a=Je({x:t,y:r},{x:l,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i},Xo=function(){var e=document.documentElement;return e||Z(!1),e},Jo=function(){var e=Xo(),r=Yo({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},Uf=function(){var e=Ko(),r=Jo(),t=e.y,n=e.x,l=Xo(),a=l.clientWidth,i=l.clientHeight,o=n+a,s=t+i,p=cr({top:t,left:n,right:o,bottom:s}),f={frame:p,scroll:{initial:e,current:e,max:r,diff:{value:He,displacement:He}}};return f},qf=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,l=Uf(),a=l.scroll.current,i=r.droppable,o=n.droppable.getAllByType(i.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(a,t)}),s=n.draggable.getAllByType(r.draggable.type).map(function(c){return c.getDimension(a)}),p={draggables:Eo(s),droppables:Io(o)},f={dimensions:p,critical:r,viewport:l};return f};function Xa(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Vf=function(e,r){var t=null,n=$f({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),l=function(g,v){e.droppable.exists(g)||Z(!1),t&&r.updateDroppableIsEnabled({id:g,isEnabled:v})},a=function(g,v){!t||(e.droppable.exists(g)||Z(!1),r.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:v}))},i=function(g,v){!t||(e.droppable.exists(g)||Z(!1),r.updateDroppableScroll({id:g,newScroll:v}))},o=function(g,v){!t||e.droppable.getById(g).callbacks.scroll(v)},s=function(){if(!!t){n.stop();var g=t.critical.droppable;e.droppable.getAllByType(g.type).forEach(function(v){return v.callbacks.dragStopped()}),t.unsubscribe(),t=null}},p=function(g){t||Z(!1);var v=t.critical.draggable;g.type==="ADDITION"&&Xa(e,v,g.value)&&n.add(g.value),g.type==="REMOVAL"&&Xa(e,v,g.value)&&n.remove(g.value)},f=function(g){t&&Z(!1);var v=e.draggable.getById(g.draggableId),D=e.droppable.getById(v.descriptor.droppableId),C={draggable:v.descriptor,droppable:D.descriptor},b=e.subscribe(p);return t={critical:C,unsubscribe:b},qf({critical:C,registry:e,scrollOptions:g.scrollOptions})},c={updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:i,startPublishing:f,stopPublishing:s};return c},Qo=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},Zf=function(e){window.scrollBy(e.x,e.y)},jf=ze(function(e){return jt(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),Kf=function(r,t){var n=kr(jf(t),function(l){return l.frame||Z(!1),Lo(l.frame.pageMarginBox)(r)});return n},Yf=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var l=n[t];return l.frame?l:null}var a=Kf(r,n);return a},Er={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Xf=function(e,r){var t=e[r.size]*Er.startFromPercentage,n=e[r.size]*Er.maxScrollAtPercentage,l={startScrollingFrom:t,maxScrollValueAt:n};return l},el=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,l=t-r;if(l===0)return 0;var a=n-r,i=a/l;return i},la=1,Jf=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return Er.maxPixelScroll;if(e===r.startScrollingFrom)return la;var t=el({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,l=Er.maxPixelScroll*Er.ease(n);return Math.ceil(l)},Ja=Er.durationDampening.accelerateAt,Qa=Er.durationDampening.stopDampeningAt,Qf=function(e,r){var t=r,n=Qa,l=Date.now(),a=l-t;if(a>=Qa)return e;if(a<Ja)return la;var i=el({startOfRange:Ja,endOfRange:n,current:a}),o=e*Er.ease(i);return Math.ceil(o)},ei=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,l=e.shouldUseTimeDampening,a=Jf(r,t);return a===0?0:l?Math.max(Qf(a,n),la):a},ri=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,l=e.axis,a=e.shouldUseTimeDampening,i=Xf(r,l),o=t[l.end]<t[l.start];return o?ei({distanceToEdge:t[l.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*ei({distanceToEdge:t[l.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},ep=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,l=t.height>r.height,a=t.width>r.width;return!a&&!l?n:a&&l?null:{x:a?0:n.x,y:l?0:n.y}},rp=So(function(e){return e===0?0:e}),rl=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,l=e.center,a=e.shouldUseTimeDampening,i={top:l.y-t.top,right:t.right-l.x,bottom:t.bottom-l.y,left:l.x-t.left},o=ri({container:t,distanceToEdges:i,dragStartTime:r,axis:Jn,shouldUseTimeDampening:a}),s=ri({container:t,distanceToEdges:i,dragStartTime:r,axis:To,shouldUseTimeDampening:a}),p=rp({x:s,y:o});if(Ir(p,He))return null;var f=ep({container:t,subject:n,proposedScroll:p});return f?Ir(f,He)?null:f:null},tp=So(function(e){return e===0?0:e>0?1:-1}),sa=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,l=r.change,a=qe(t,l),i={x:e(a.x,n.x),y:e(a.y,n.y)};return Ir(i,He)?null:i}}(),tl=function(r){var t=r.max,n=r.current,l=r.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=tp(l),o=sa({max:a,current:n,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},ca=function(r,t){return tl({current:r.scroll.current,max:r.scroll.max,change:t})},np=function(r,t){if(!ca(r,t))return null;var n=r.scroll.max,l=r.scroll.current;return sa({current:l,max:n,change:t})},ua=function(r,t){var n=r.frame;return n?tl({current:n.scroll.current,max:n.scroll.max,change:t}):!1},ap=function(r,t){var n=r.frame;return!n||!ua(r,t)?null:sa({current:n.scroll.current,max:n.scroll.max,change:t})},ip=function(e){var r=e.viewport,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=rl({dragStartTime:l,container:r.frame,subject:t,center:n,shouldUseTimeDampening:a});return i&&ca(r,i)?i:null},op=function(e){var r=e.droppable,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var o=rl({dragStartTime:l,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a});return o&&ua(r,o)?o:null},ti=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,l=e.scrollWindow,a=e.scrollDroppable,i=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id],s=o.page.marginBox;if(r.isWindowScrollAllowed){var p=r.viewport,f=ip({dragStartTime:t,viewport:p,subject:s,center:i,shouldUseTimeDampening:n});if(f){l(f);return}}var c=Yf({center:i,destination:Qe(r.impact),droppables:r.dimensions.droppables});if(!!c){var d=op({dragStartTime:t,droppable:c,subject:s,center:i,shouldUseTimeDampening:n});d&&a(c.descriptor.id,d)}},lp=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=it(r),l=it(t),a=null,i=function(f){a||Z(!1);var c=a,d=c.shouldUseTimeDampening,g=c.dragStartTime;ti({state:f,scrollWindow:n,scrollDroppable:l,dragStartTime:g,shouldUseTimeDampening:d})},o=function(f){a&&Z(!1);var c=Date.now(),d=!1,g=function(){d=!0};ti({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),a={dragStartTime:c,shouldUseTimeDampening:d},d&&i(f)},s=function(){!a||(n.cancel(),l.cancel(),a=null)};return{start:o,stop:s,scroll:i}},sp=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,l=function(p,f){var c=qe(p.current.client.selection,f);r({client:c})},a=function(p,f){if(!ua(p,f))return f;var c=ap(p,f);if(!c)return t(p.descriptor.id,f),null;var d=Je(f,c);t(p.descriptor.id,d);var g=Je(f,d);return g},i=function(p,f,c){if(!p||!ca(f,c))return c;var d=np(f,c);if(!d)return n(c),null;var g=Je(c,d);n(g);var v=Je(c,g);return v},o=function(p){var f=p.scrollJumpRequest;if(!!f){var c=Qe(p.impact);c||Z(!1);var d=a(p.dimensions.droppables[c],f);if(!!d){var g=p.viewport,v=i(p.isWindowScrollAllowed,g,d);!v||l(p,v)}}};return o},cp=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,l=lp({scrollWindow:t,scrollDroppable:r}),a=sp({move:n,scrollWindow:t,scrollDroppable:r}),i=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){l.scroll(p);return}!p.scrollJumpRequest||a(p)}},o={scroll:i,start:l.start,stop:l.stop};return o},Zr="data-rbd",jr=function(){var e=Zr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Nn=function(){var e=Zr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),up=function(){var e=Zr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ni={contextId:Zr+"-scroll-container-context-id"},dp=function(r){return function(t){return"["+t+'="'+r+'"]'}},rt=function(r,t){return r.map(function(n){var l=n.styles[t];return l?n.selector+" { "+l+" }":""}).join(" ")},fp="pointer-events: none;",pp=function(e){var r=dp(e),t=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(jr.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:fp,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+at.outOfTheWay+`;
    `;return{selector:r(Nn.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),l={selector:r(up.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,l,a];return{always:rt(i,"always"),resting:rt(i,"resting"),dragging:rt(i,"dragging"),dropAnimating:rt(i,"dropAnimating"),userCancel:rt(i,"userCancel")}},er=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Hi:Ae,dn=function(){var r=document.querySelector("head");return r||Z(!1),r},ai=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function vp(e,r){var t=me(function(){return pp(e)},[e]),n=xe(null),l=xe(null),a=ne(ze(function(c){var d=l.current;d||Z(!1),d.textContent=c}),[]),i=ne(function(c){var d=n.current;d||Z(!1),d.textContent=c},[]);er(function(){!n.current&&!l.current||Z(!1);var c=ai(r),d=ai(r);return n.current=c,l.current=d,c.setAttribute(Zr+"-always",e),d.setAttribute(Zr+"-dynamic",e),dn().appendChild(c),dn().appendChild(d),i(t.always),a(t.resting),function(){var g=function(D){var C=D.current;C||Z(!1),dn().removeChild(C),D.current=null};g(n),g(l)}},[r,i,a,t.always,t.resting,e]);var o=ne(function(){return a(t.dragging)},[a,t.dragging]),s=ne(function(c){if(c==="DROP"){a(t.dropAnimating);return}a(t.userCancel)},[a,t.dropAnimating,t.userCancel]),p=ne(function(){!l.current||a(t.resting)},[a,t.resting]),f=me(function(){return{dragging:o,dropping:s,resting:p}},[o,s,p]);return f}var nl=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Jt(e){return e instanceof nl(e).HTMLElement}function gp(e,r){var t="["+jr.contextId+'="'+e+'"]',n=_o(document.querySelectorAll(t));if(!n.length)return null;var l=kr(n,function(a){return a.getAttribute(jr.draggableId)===r});return!l||!Jt(l)?null:l}function hp(e){var r=xe({}),t=xe(null),n=xe(null),l=xe(!1),a=ne(function(d,g){var v={id:d,focus:g};return r.current[d]=v,function(){var C=r.current,b=C[d];b!==v&&delete C[d]}},[]),i=ne(function(d){var g=gp(e,d);g&&g!==document.activeElement&&g.focus()},[e]),o=ne(function(d,g){t.current===d&&(t.current=g)},[]),s=ne(function(){n.current||!l.current||(n.current=requestAnimationFrame(function(){n.current=null;var d=t.current;d&&i(d)}))},[i]),p=ne(function(d){t.current=null;var g=document.activeElement;!g||g.getAttribute(jr.draggableId)===d&&(t.current=d)},[]);er(function(){return l.current=!0,function(){l.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var f=me(function(){return{register:a,tryRecordFocus:p,tryRestoreFocusRecorded:s,tryShiftRecord:o}},[a,p,s,o]);return f}function mp(){var e={draggables:{},droppables:{}},r=[];function t(c){return r.push(c),function(){var g=r.indexOf(c);g!==-1&&r.splice(g,1)}}function n(c){r.length&&r.forEach(function(d){return d(c)})}function l(c){return e.draggables[c]||null}function a(c){var d=l(c);return d||Z(!1),d}var i={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,g){var v=e.draggables[g.descriptor.id];!v||v.uniqueId===d.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var g=d.descriptor.id,v=l(g);!v||d.uniqueId===v.uniqueId&&(delete e.draggables[g],n({type:"REMOVAL",value:d}))},getById:a,findById:l,exists:function(d){return Boolean(l(d))},getAllByType:function(d){return Lt(e.draggables).filter(function(g){return g.descriptor.type===d})}};function o(c){return e.droppables[c]||null}function s(c){var d=o(c);return d||Z(!1),d}var p={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var g=o(d.descriptor.id);!g||d.uniqueId===g.uniqueId&&delete e.droppables[d.descriptor.id]},getById:s,findById:o,exists:function(d){return Boolean(o(d))},getAllByType:function(d){return Lt(e.droppables).filter(function(g){return g.descriptor.type===d})}};function f(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:p,subscribe:t,clean:f}}function bp(){var e=me(mp,[]);return Ae(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var da=we.createContext(null),zt=function(){var e=document.body;return e||Z(!1),e},wp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},yp=function(r){return"rbd-announcement-"+r};function xp(e){var r=me(function(){return yp(e)},[e]),t=xe(null);Ae(function(){var a=document.createElement("div");return t.current=a,a.id=r,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ee(a.style,wp),zt().appendChild(a),function(){setTimeout(function(){var s=zt();s.contains(a)&&s.removeChild(a),a===t.current&&(t.current=null)})}},[r]);var n=ne(function(l){var a=t.current;if(a){a.textContent=l;return}},[]);return n}var Dp=0,Cp={separator:"::"};function fa(e,r){return r===void 0&&(r=Cp),me(function(){return""+e+r.separator+Dp++},[r.separator,e])}function Sp(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function _p(e){var r=e.contextId,t=e.text,n=fa("hidden-text",{separator:"-"}),l=me(function(){return Sp({contextId:r,uniqueId:n})},[n,r]);return Ae(function(){var i=document.createElement("div");return i.id=l,i.textContent=t,i.style.display="none",zt().appendChild(i),function(){var s=zt();s.contains(i)&&s.removeChild(i)}},[l,t]),l}var Qt=we.createContext(null);function al(e){var r=xe(e);return Ae(function(){r.current=e}),r}function Ip(){var e=null;function r(){return Boolean(e)}function t(i){return i===e}function n(i){e&&Z(!1);var o={abandon:i};return e=o,o}function l(){e||Z(!1),e=null}function a(){e&&(e.abandon(),l())}return{isClaimed:r,isActive:t,claim:n,release:l,tryAbandon:a}}var Ep=9,Ap=13,pa=27,il=32,kp=33,Tp=34,Rp=35,Pp=36,Bp=37,Mp=38,Np=39,Op=40,It,Lp=(It={},It[Ap]=!0,It[Ep]=!0,It),ol=function(e){Lp[e.keyCode]&&e.preventDefault()},en=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=kr(r,function(n){return"on"+n in document});return t||e}(),ll=0,ii=5;function Fp(e,r){return Math.abs(r.x-e.x)>=ii||Math.abs(r.y-e.y)>=ii}var oi={type:"IDLE"};function zp(e){var r=e.cancel,t=e.completed,n=e.getPhase,l=e.setPhase;return[{eventName:"mousemove",fn:function(i){var o=i.button,s=i.clientX,p=i.clientY;if(o===ll){var f={x:s,y:p},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(f);return}c.type!=="PENDING"&&Z(!1);var d=c.point;if(!!Fp(d,f)){i.preventDefault();var g=c.actions.fluidLift(f);l({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var o=n();if(o.type==="PENDING"){r();return}if(i.keyCode===pa){i.preventDefault(),r();return}ol(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var o=n();if(o.type==="IDLE"&&Z(!1),o.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:en,fn:r}]}function Hp(e){var r=xe(oi),t=xe(_r),n=me(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===ll&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var d=e.findClosestDraggableId(c);if(!!d){var g=e.tryGetLock(d,i,{sourceEvent:c});if(!!g){c.preventDefault();var v={x:c.clientX,y:c.clientY};t.current(),p(g,v)}}}}}},[e]),l=me(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var d=e.findClosestDraggableId(c);if(!!d){var g=e.findOptionsForDraggable(d);!g||g.shouldRespectForcePress||!e.canGetLock(d)||c.preventDefault()}}}}},[e]),a=ne(function(){var c={passive:!1,capture:!0};t.current=ir(window,[l,n],c)},[l,n]),i=ne(function(){var f=r.current;f.type!=="IDLE"&&(r.current=oi,t.current(),a())},[a]),o=ne(function(){var f=r.current;i(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[i]),s=ne(function(){var c={capture:!0,passive:!1},d=zp({cancel:o,completed:i,getPhase:function(){return r.current},setPhase:function(v){r.current=v}});t.current=ir(window,d,c)},[o,i]),p=ne(function(c,d){r.current.type!=="IDLE"&&Z(!1),r.current={type:"PENDING",point:d,actions:c},s()},[s]);er(function(){return a(),function(){t.current()}},[a])}var $r;function Gp(){}var Wp=($r={},$r[Tp]=!0,$r[kp]=!0,$r[Pp]=!0,$r[Rp]=!0,$r);function $p(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===pa){a.preventDefault(),t();return}if(a.keyCode===il){a.preventDefault(),n();return}if(a.keyCode===Op){a.preventDefault(),e.moveDown();return}if(a.keyCode===Mp){a.preventDefault(),e.moveUp();return}if(a.keyCode===Np){a.preventDefault(),e.moveRight();return}if(a.keyCode===Bp){a.preventDefault(),e.moveLeft();return}if(Wp[a.keyCode]){a.preventDefault();return}ol(a)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:en,fn:t}]}function Up(e){var r=xe(Gp),t=me(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==il)return;var i=e.findClosestDraggableId(a);if(!i)return;var o=e.tryGetLock(i,f,{sourceEvent:a});if(!o)return;a.preventDefault();var s=!0,p=o.snapLift();r.current();function f(){s||Z(!1),s=!1,r.current(),n()}r.current=ir(window,$p(p,f),{capture:!0,passive:!1})}}},[e]),n=ne(function(){var a={passive:!1,capture:!0};r.current=ir(window,[t],a)},[t]);er(function(){return n(),function(){r.current()}},[n])}var fn={type:"IDLE"},qp=120,Vp=.15;function Zp(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(l){l.preventDefault()}},{eventName:"keydown",fn:function(l){if(t().type!=="DRAGGING"){r();return}l.keyCode===pa&&l.preventDefault(),r()}},{eventName:en,fn:r}]}function jp(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var o=a.touches[0],s=o.clientX,p=o.clientY,f={x:s,y:p};a.preventDefault(),i.actions.move(f)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){r();return}a.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&Z(!1);var o=a.touches[0];if(!!o){var s=o.force>=Vp;if(!!s){var p=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){p&&r();return}if(p){if(i.hasMoved){a.preventDefault();return}r();return}a.preventDefault()}}}},{eventName:en,fn:r}]}function Kp(e){var r=xe(fn),t=xe(_r),n=ne(function(){return r.current},[]),l=ne(function(g){r.current=g},[]),a=me(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var v=e.findClosestDraggableId(g);if(!!v){var D=e.tryGetLock(v,o,{sourceEvent:g});if(!!D){var C=g.touches[0],b=C.clientX,y=C.clientY,S={x:b,y};t.current(),c(D,S)}}}}}},[e]),i=ne(function(){var g={capture:!0,passive:!1};t.current=ir(window,[a],g)},[a]),o=ne(function(){var d=r.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),l(fn),t.current(),i())},[i,l]),s=ne(function(){var d=r.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),p=ne(function(){var g={capture:!0,passive:!1},v={cancel:s,completed:o,getPhase:n},D=ir(window,jp(v),g),C=ir(window,Zp(v),g);t.current=function(){D(),C()}},[s,n,o]),f=ne(function(){var g=n();g.type!=="PENDING"&&Z(!1);var v=g.actions.fluidLift(g.point);l({type:"DRAGGING",actions:v,hasMoved:!1})},[n,l]),c=ne(function(g,v){n().type!=="IDLE"&&Z(!1);var D=setTimeout(f,qp);l({type:"PENDING",point:v,actions:g,longPressTimerId:D}),p()},[p,n,l,f]);er(function(){return i(),function(){t.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),l(fn))}},[n,i,l]),er(function(){var g=ir(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var Yp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function sl(e,r){if(r==null)return!1;var t=Boolean(Yp[r.tagName.toLowerCase()]);if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:sl(e,r.parentElement)}function Xp(e,r){var t=r.target;return Jt(t)?sl(e,t):!1}var Jp=function(e){return cr(e.getBoundingClientRect()).center};function Qp(e){return e instanceof nl(e).Element}var ev=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=kr(r,function(n){return n in Element.prototype});return t||e}();function cl(e,r){return e==null?null:e[ev](r)?e:cl(e.parentElement,r)}function rv(e,r){return e.closest?e.closest(r):cl(e,r)}function tv(e){return"["+jr.contextId+'="'+e+'"]'}function nv(e,r){var t=r.target;if(!Qp(t))return null;var n=tv(e),l=rv(t,n);return!l||!Jt(l)?null:l}function av(e,r){var t=nv(e,r);return t?t.getAttribute(jr.draggableId):null}function iv(e,r){var t="["+Nn.contextId+'="'+e+'"]',n=_o(document.querySelectorAll(t)),l=kr(n,function(a){return a.getAttribute(Nn.id)===r});return!l||!Jt(l)?null:l}function ov(e){e.preventDefault()}function Et(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function ul(e){var r=e.lockAPI,t=e.store,n=e.registry,l=e.draggableId;if(r.isClaimed())return!1;var a=n.draggable.findById(l);return!(!a||!a.options.isEnabled||!Qo(t.getState(),l))}function lv(e){var r=e.lockAPI,t=e.contextId,n=e.store,l=e.registry,a=e.draggableId,i=e.forceSensorStop,o=e.sourceEvent,s=ul({lockAPI:r,store:n,registry:l,draggableId:a});if(!s)return null;var p=l.draggable.getById(a),f=iv(t,p.descriptor.id);if(!f||o&&!p.options.canDragInteractiveElements&&Xp(f,o))return null;var c=r.claim(i||_r),d="PRE_DRAG";function g(){return p.options.shouldRespectForcePress}function v(){return r.isActive(c)}function D(T,I){Et({expected:T,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(I())}var C=D.bind(null,"DRAGGING");function b(T){function I(){r.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(I(),d!=="PRE_DRAG"&&Z(!1)),n.dispatch(Qd(T.liftActionArgs)),d="DRAGGING";function B(O,z){if(z===void 0&&(z={shouldBlockNextClick:!1}),T.cleanup(),z.shouldBlockNextClick){var L=ir(window,[{eventName:"click",fn:ov,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(L)}I(),n.dispatch(Vo({reason:O}))}return ee({isActive:function(){return Et({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(z){return B("DROP",z)},cancel:function(z){return B("CANCEL",z)}},T.actions)}function y(T){var I=it(function(O){C(function(){return qo({client:O})})}),B=b({liftActionArgs:{id:a,clientSelection:T,movementMode:"FLUID"},cleanup:function(){return I.cancel()},actions:{move:I}});return ee({},B,{move:I})}function S(){var T={moveUp:function(){return C(cf)},moveRight:function(){return C(df)},moveDown:function(){return C(uf)},moveLeft:function(){return C(ff)}};return b({liftActionArgs:{id:a,clientSelection:Jp(f),movementMode:"SNAP"},cleanup:_r,actions:T})}function _(){var T=Et({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});T&&r.release()}var k={isActive:function(){return Et({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:y,snapLift:S,abort:_};return k}var sv=[Hp,Up,Kp];function cv(e){var r=e.contextId,t=e.store,n=e.registry,l=e.customSensors,a=e.enableDefaultSensors,i=[].concat(a?sv:[],l||[]),o=dr(function(){return Ip()})[0],s=ne(function(y,S){y.isDragging&&!S.isDragging&&o.tryAbandon()},[o]);er(function(){var y=t.getState(),S=t.subscribe(function(){var _=t.getState();s(y,_),y=_});return S},[o,t,s]),er(function(){return o.tryAbandon},[o.tryAbandon]);for(var p=ne(function(b){return ul({lockAPI:o,registry:n,store:t,draggableId:b})},[o,n,t]),f=ne(function(b,y,S){return lv({lockAPI:o,registry:n,contextId:r,store:t,draggableId:b,forceSensorStop:y,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null})},[r,o,n,t]),c=ne(function(b){return av(r,b)},[r]),d=ne(function(b){var y=n.draggable.findById(b);return y?y.options:null},[n.draggable]),g=ne(function(){!o.isClaimed()||(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(na()))},[o,t]),v=ne(o.isClaimed,[o]),D=me(function(){return{canGetLock:p,tryGetLock:f,findClosestDraggableId:c,findOptionsForDraggable:d,tryReleaseLock:g,isLockClaimed:v}},[p,f,c,d,g,v]),C=0;C<i.length;C++)i[C](D)}var uv=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function tt(e){return e.current||Z(!1),e.current}function dv(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,l=e.nonce,a=e.dragHandleUsageInstructions,i=xe(null),o=al(e),s=ne(function(){return uv(o.current)},[o]),p=xp(r),f=_p({contextId:r,text:a}),c=vp(r,l),d=ne(function(O){tt(i).dispatch(O)},[]),g=me(function(){return Ba({publishWhileDragging:rf,updateDroppableScroll:nf,updateDroppableIsEnabled:af,updateDroppableIsCombineEnabled:of,collectionStarting:tf},d)},[d]),v=bp(),D=me(function(){return Vf(v,g)},[v,g]),C=me(function(){return cp(ee({scrollWindow:Zf,scrollDroppable:D.scrollDroppable},Ba({move:qo},d)))},[D.scrollDroppable,d]),b=hp(r),y=me(function(){return Wf({announce:p,autoScroller:C,dimensionMarshal:D,focusMarshal:b,getResponders:s,styleMarshal:c})},[p,C,D,b,s,c]);i.current=y;var S=ne(function(){var O=tt(i),z=O.getState();z.phase!=="IDLE"&&O.dispatch(na())},[]),_=ne(function(){var O=tt(i).getState();return O.isDragging||O.phase==="DROP_ANIMATING"},[]),k=me(function(){return{isDragging:_,tryAbort:S}},[_,S]);t(k);var T=ne(function(O){return Qo(tt(i).getState(),O)},[]),I=ne(function(){return Nr(tt(i).getState())},[]),B=me(function(){return{marshal:D,focus:b,contextId:r,canLift:T,isMovementAllowed:I,dragHandleUsageInstructionsId:f,registry:v}},[r,D,f,b,T,I,v]);return cv({contextId:r,store:y,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),Ae(function(){return S},[S]),we.createElement(Qt.Provider,{value:B},we.createElement(Vc,{context:da,store:y},e.children))}var fv=0;function pv(){return me(function(){return""+fv++},[])}function dl(e){var r=pv(),t=e.dragHandleUsageInstructions||Tt.dragHandleUsageInstructions;return we.createElement($u,null,function(n){return we.createElement(dv,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var fl=function(r){return function(t){return r===t}},vv=fl("scroll"),gv=fl("auto"),li=function(r,t){return t(r.overflowX)||t(r.overflowY)},hv=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return li(n,vv)||li(n,gv)},mv=function(){return!1},bv=function e(r){return r==null?null:r===document.body?mv()?r:null:r===document.documentElement?null:hv(r)?r:e(r.parentElement)},On=function(e){return{x:e.scrollLeft,y:e.scrollTop}},wv=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},yv=function(e){var r=bv(e),t=wv(e);return{closestScrollable:r,isFixedOnPage:t}},xv=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,l=e.isFixedOnPage,a=e.direction,i=e.client,o=e.page,s=e.closest,p=function(){if(!s)return null;var g=s.scrollSize,v=s.client,D=Yo({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:v,scrollSize:g,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:D,diff:{value:He,displacement:He}}}}(),f=a==="vertical"?Jn:To,c=Vr({page:o,withPlaceholder:null,axis:f,frame:p}),d={descriptor:r,isCombineEnabled:n,isFixedOnPage:l,axis:f,isEnabled:t,client:i,page:o,frame:p,subject:c};return d},Dv=function(r,t){var n=yo(r);if(!t||r!==t)return n;var l=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=l+t.scrollHeight,o=a+t.scrollWidth,s={top:l,right:o,bottom:i,left:a},p=Zn(s,n.border),f=jn({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return f},Cv=function(e){var r=e.ref,t=e.descriptor,n=e.env,l=e.windowScroll,a=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,s=e.shouldClipSubject,p=n.closestScrollable,f=Dv(r,p),c=Mt(f,l),d=function(){if(!p)return null;var v=yo(p),D={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:v,page:Mt(v,l),scroll:On(p),scrollSize:D,shouldClipSubject:s}}(),g=xv({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:f,page:c,closest:d});return g},Sv={passive:!1},_v={passive:!0},si=function(e){return e.shouldPublishImmediately?Sv:_v};function Ht(e){var r=zn(e);return r||Z(!1),r}var At=function(r){return r&&r.env.closestScrollable||null};function Iv(e){var r=xe(null),t=Ht(Qt),n=fa("droppable"),l=t.registry,a=t.marshal,i=al(e),o=me(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),s=xe(o),p=me(function(){return ze(function(_,k){r.current||Z(!1);var T={x:_,y:k};a.updateDroppableScroll(o.id,T)})},[o.id,a]),f=ne(function(){var _=r.current;return!_||!_.env.closestScrollable?He:On(_.env.closestScrollable)},[]),c=ne(function(){var _=f();p(_.x,_.y)},[f,p]),d=me(function(){return it(c)},[c]),g=ne(function(){var _=r.current,k=At(_);_&&k||Z(!1);var T=_.scrollOptions;if(T.shouldPublishImmediately){c();return}d()},[d,c]),v=ne(function(_,k){r.current&&Z(!1);var T=i.current,I=T.getDroppableRef();I||Z(!1);var B=yv(I),O={ref:I,descriptor:o,env:B,scrollOptions:k};r.current=O;var z=Cv({ref:I,descriptor:o,env:B,windowScroll:_,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),L=B.closestScrollable;return L&&(L.setAttribute(ni.contextId,t.contextId),L.addEventListener("scroll",g,si(O.scrollOptions))),z},[t.contextId,o,g,i]),D=ne(function(){var _=r.current,k=At(_);return _&&k||Z(!1),On(k)},[]),C=ne(function(){var _=r.current;_||Z(!1);var k=At(_);r.current=null,k&&(d.cancel(),k.removeAttribute(ni.contextId),k.removeEventListener("scroll",g,si(_.scrollOptions)))},[g,d]),b=ne(function(_){var k=r.current;k||Z(!1);var T=At(k);T||Z(!1),T.scrollTop+=_.y,T.scrollLeft+=_.x},[]),y=me(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:D,dragStopped:C,scroll:b}},[C,v,D,b]),S=me(function(){return{uniqueId:n,descriptor:o,callbacks:y}},[y,o,n]);er(function(){return s.current=S.descriptor,l.droppable.register(S),function(){r.current&&C(),l.droppable.unregister(S)}},[y,o,C,S,a,l.droppable]),er(function(){!r.current||a.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),er(function(){!r.current||a.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function pn(){}var ci={width:0,height:0,margin:Ku},Ev=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate;return t||l==="close"?ci:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Av=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate,a=Ev({isAnimatingOpenOnMount:t,placeholder:n,animate:l});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:l!=="none"?at.placeholder:null}};function kv(e){var r=xe(null),t=ne(function(){!r.current||(clearTimeout(r.current),r.current=null)},[]),n=e.animate,l=e.onTransitionEnd,a=e.onClose,i=e.contextId,o=dr(e.animate==="open"),s=o[0],p=o[1];Ae(function(){return s?n!=="open"?(t(),p(!1),pn):r.current?pn:(r.current=setTimeout(function(){r.current=null,p(!1)}),t):pn},[n,s,t]);var f=ne(function(d){d.propertyName==="height"&&(l(),n==="close"&&a())},[n,a,l]),c=Av({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return we.createElement(e.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":i,onTransitionEnd:f,ref:e.innerRef})}var Tv=we.memo(kv),va=we.createContext(null),Rv=function(e){Vi(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:Boolean(n.props.on),data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(l,a){return l.shouldAnimate?l.on?{isVisible:!0,data:l.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(l.on),data:l.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var l={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(l)},r}(we.PureComponent),ui={dragging:5e3,dropAnimating:4500},Pv=function(r,t){return t?at.drop(t.duration):r?at.snap:at.fluid},Bv=function(r,t){return r?t?ct.opacity.drop:ct.opacity.combining:null},Mv=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function Nv(e){var r=e.dimension,t=r.client,n=e.offset,l=e.combineWith,a=e.dropping,i=Boolean(l),o=Mv(e),s=Boolean(a),p=s?Bn.drop(n,i):Bn.moveTo(n),f={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Pv(o,a),transform:p,opacity:Bv(i,s),zIndex:s?ui.dropAnimating:ui.dragging,pointerEvents:"none"};return f}function Ov(e){return{transform:Bn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Lv(e){return e.type==="DRAGGING"?Nv(e):Ov(e)}function Fv(e,r,t){t===void 0&&(t=He);var n=window.getComputedStyle(r),l=r.getBoundingClientRect(),a=wo(l,n),i=Mt(a,t),o={client:a,tagName:r.tagName.toLowerCase(),display:n.display},s={x:a.marginBox.width,y:a.marginBox.height},p={descriptor:e,placeholder:o,displaceBy:s,client:a,page:i};return p}function zv(e){var r=fa("draggable"),t=e.descriptor,n=e.registry,l=e.getDraggableRef,a=e.canDragInteractiveElements,i=e.shouldRespectForcePress,o=e.isEnabled,s=me(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:o}},[a,o,i]),p=ne(function(g){var v=l();return v||Z(!1),Fv(t,v,g)},[t,l]),f=me(function(){return{uniqueId:r,descriptor:t,options:s,getDimension:p}},[t,p,s,r]),c=xe(f),d=xe(!0);er(function(){return n.draggable.register(c.current),function(){return n.draggable.unregister(c.current)}},[n.draggable]),er(function(){if(d.current){d.current=!1;return}var g=c.current;c.current=f,n.draggable.update(f,g)},[f,n.draggable])}function Hv(e){e.preventDefault()}function Gv(e){var r=xe(null),t=ne(function(O){r.current=O},[]),n=ne(function(){return r.current},[]),l=Ht(Qt),a=l.contextId,i=l.dragHandleUsageInstructionsId,o=l.registry,s=Ht(va),p=s.type,f=s.droppableId,c=me(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:f}},[e.draggableId,e.index,p,f]),d=e.children,g=e.draggableId,v=e.isEnabled,D=e.shouldRespectForcePress,C=e.canDragInteractiveElements,b=e.isClone,y=e.mapped,S=e.dropAnimationFinished;if(!b){var _=me(function(){return{descriptor:c,registry:o,getDraggableRef:n,canDragInteractiveElements:C,shouldRespectForcePress:D,isEnabled:v}},[c,o,n,C,D,v]);zv(_)}var k=me(function(){return v?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Hv}:null},[a,i,g,v]),T=ne(function(O){y.type==="DRAGGING"&&(!y.dropping||O.propertyName==="transform"&&S())},[S,y]),I=me(function(){var O=Lv(y),z=y.type==="DRAGGING"&&y.dropping?T:null,L={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":g,style:O,onTransitionEnd:z},dragHandleProps:k};return L},[a,k,g,y,T,t]),B=me(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return d(I,y.snapshot,B)}var pl=function(e,r){return e===r},vl=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},Wv=function(r){return r.combine?r.combine.draggableId:null},$v=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Uv(){var e=ze(function(l,a){return{x:l,y:a}}),r=ze(function(l,a,i,o,s){return{isDragging:!0,isClone:a,isDropAnimating:Boolean(s),dropAnimation:s,mode:l,draggingOver:i,combineWith:o,combineTargetFor:null}}),t=ze(function(l,a,i,o,s,p,f){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:p,mode:a,offset:l,dimension:i,forceShouldAnimate:f,snapshot:r(a,o,s,p,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var o=a.current.client.offset,s=a.dimensions.draggables[i.draggableId],p=Qe(a.impact),f=$v(a.impact),c=a.forceShouldAnimate;return t(e(o.x,o.y),a.movementMode,s,i.isClone,p,f,c)}if(a.phase==="DROP_ANIMATING"){var d=a.completed;if(d.result.draggableId!==i.draggableId)return null;var g=i.isClone,v=a.dimensions.draggables[i.draggableId],D=d.result,C=D.mode,b=vl(D),y=Wv(D),S=a.dropDuration,_={duration:S,curve:ia.drop,moveTo:a.newHomeClientOffset,opacity:y?ct.opacity.drop:null,scale:y?ct.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:_,draggingOver:b,combineWith:y,mode:C,forceShouldAnimate:null,snapshot:r(C,g,b,y,_)}}}return null};return n}function gl(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var qv={mapped:{type:"SECONDARY",offset:He,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:gl(null)}};function Vv(){var e=ze(function(i,o){return{x:i,y:o}}),r=ze(gl),t=ze(function(i,o,s){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:o,shouldAnimateDisplacement:s,snapshot:r(o)}}}),n=function(o){return o?t(He,o,!0):null},l=function(o,s,p,f){var c=p.displaced.visible[o],d=Boolean(f.inVirtualList&&f.effected[o]),g=Kt(p),v=g&&g.draggableId===o?s:null;if(!c){if(!d)return n(v);if(p.displaced.invisible[o])return null;var D=Xr(f.displacedBy.point),C=e(D.x,D.y);return t(C,v,!0)}if(d)return n(v);var b=p.displacedBy.point,y=e(b.x,b.y);return t(y,v,c.shouldAnimate)},a=function(o,s){if(o.isDragging)return o.critical.draggable.id===s.draggableId?null:l(s.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var p=o.completed;return p.result.draggableId===s.draggableId?null:l(s.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return a}var Zv=function(){var r=Uv(),t=Vv(),n=function(a,i){return r(a,i)||t(a,i)||qv};return n},jv={dropAnimationFinished:Zo},Kv=mo(Zv,jv,null,{context:da,pure:!0,areStatePropsEqual:pl})(Gv);function hl(e){var r=Ht(va),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:we.createElement(Kv,e)}function ml(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return we.createElement(hl,ee({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function Yv(e){var r=zn(Qt);r||Z(!1);var t=r.contextId,n=r.isMovementAllowed,l=xe(null),a=xe(null),i=e.children,o=e.droppableId,s=e.type,p=e.mode,f=e.direction,c=e.ignoreContainerClipping,d=e.isDropDisabled,g=e.isCombineEnabled,v=e.snapshot,D=e.useClone,C=e.updateViewportMaxScroll,b=e.getContainerForClone,y=ne(function(){return l.current},[]),S=ne(function(L){l.current=L},[]);ne(function(){return a.current},[]);var _=ne(function(L){a.current=L},[]),k=ne(function(){n()&&C({maxScroll:Jo()})},[n,C]);Iv({droppableId:o,type:s,mode:p,direction:f,isDropDisabled:d,isCombineEnabled:g,ignoreContainerClipping:c,getDroppableRef:y});var T=we.createElement(Rv,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(L){var U=L.onClose,H=L.data,q=L.animate;return we.createElement(Tv,{placeholder:H,onClose:U,innerRef:_,animate:q,contextId:t,onTransitionEnd:k})}),I=me(function(){return{innerRef:S,placeholder:T,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":t}}},[t,o,T,S]),B=D?D.dragging.draggableId:null,O=me(function(){return{droppableId:o,type:s,isUsingCloneFor:B}},[o,B,s]);function z(){if(!D)return null;var L=D.dragging,U=D.render,H=we.createElement(hl,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(q,Q){return U(q,Q,L)});return we.createPortal(H,b())}return we.createElement(va.Provider,{value:O},i(I,v),z())}var vn=function(r,t){return r===t.droppable.type},di=function(r,t){return t.draggables[r.draggable.id]},Xv=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=ee({},r,{shouldAnimatePlaceholder:!1}),n=ze(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),l=ze(function(i,o,s,p,f,c){var d=f.descriptor.id,g=f.descriptor.droppableId===i;if(g){var v=c?{render:c,dragging:n(f.descriptor)}:null,D={isDraggingOver:s,draggingOverWith:s?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:v}}if(!o)return t;if(!p)return r;var C={isDraggingOver:s,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:C,useClone:null}}),a=function(o,s){var p=s.droppableId,f=s.type,c=!s.isDropDisabled,d=s.renderClone;if(o.isDragging){var g=o.critical;if(!vn(f,g))return t;var v=di(g,o.dimensions),D=Qe(o.impact)===p;return l(p,c,D,D,v,d)}if(o.phase==="DROP_ANIMATING"){var C=o.completed;if(!vn(f,C.critical))return t;var b=di(C.critical,o.dimensions);return l(p,c,vl(C.result)===p,Qe(C.impact)===p,b,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var y=o.completed;if(!vn(f,y.critical))return t;var S=Qe(y.impact)===p,_=Boolean(y.impact.at&&y.impact.at.type==="COMBINE"),k=y.critical.droppable.id===p;return S?_?r:t:k?r:t}return t};return a},Jv={updateViewportMaxScroll:sf};function Qv(){return document.body||Z(!1),document.body}var eg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Qv},ga=mo(Xv,Jv,null,{context:da,pure:!0,areStatePropsEqual:pl})(Yv);ga.defaultProps=eg;const rg=[{value:1,label:"Dot"},{value:2,label:"Ellipse"},{value:3,label:"Line"},{value:4,label:"Square"}],tg={bloom:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"threshold",label:"Threshold",title:"Brightness threshold to start applying effect",type:"slider",min:0,max:1,step:.05},{propName:"strength",label:"Strength",title:"Strength of the effect",type:"slider",min:0,max:2,step:.05},{propName:"radius",label:"Radius",title:"Blur radius",type:"number",step:.5}],pixel:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"pixelSize",label:"Pixel Size",type:"number",min:1,step:1}],afterimage:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"damp",label:"Damp",type:"slider",min:.01,max:.99,step:.01}],smaa:[{propName:"enabled",label:"Enabled",type:"boolean"}],sobel:[{propName:"enabled",label:"Enabled",type:"boolean"}],halftone:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"greyscale",label:"Grayscale",type:"boolean"},{propName:"radius",label:"Radius",type:"number",min:1,step:.2},{propName:"scatter",label:"Scatter",type:"slider",min:0,max:5,step:.1},{propName:"shape",label:"Shape",type:"select",options:rg}],dotscreen:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"scale",label:"Scale",type:"number",min:1,step:.5}],bokeh:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"focus",label:"Focus",type:"number",step:.1},{propName:"aperture",label:"Aperture",type:"number",step:.01}]};function ng({target:e,index:r}){var c;const[t,n]=gs((c=e.open)!=null?c:!1),{type:l}=e,{name:a}=Ol[l],i=()=>{e.open=!t,n()},s=h(mr,{title:"Remove",className:"closeButton",onClick:d=>{d.stopPropagation(),e.remove()},children:h(Gn,{})}),p=tg[l],f=d=>h("div",{className:`EffectController ${t?"open":""}`,...d.draggableProps,ref:d.innerRef,children:[h("div",{className:"EffectController-summary",onClick:i,children:[t?h(os,{}):h(ls,{}),h("div",{className:"EffectController-name",...d.dragHandleProps,children:a}),s]}),t&&h("div",{className:"EffectController-details",children:h(ur,{target:e.params,propList:p})})]});return h(ml,{draggableId:e.id,index:r,children:f})}const ag={bloom:{name:"Bloom",propList:["enabled","radius","strength","threshold"]},pixel:{name:"Pixelate",propList:["enabled","pixelSize"]},afterimage:{name:"Afterimage",propList:["enabled","damp"]},sobel:{name:"Sobel",propList:["enabled"]},halftone:{name:"Halftone",propList:["enabled","greyscale","radius","scatter","shape"]},dotscreen:{name:"Dot Screen",propList:["enabled","scale"]},bokeh:{name:"Bokeh",propList:["enabled","focus","aperture","aspect"]},smaa:{name:"SMAA",propList:["enabled"]}},ig=Object.entries(ag).map(([e,{name:r}])=>({value:e,label:r}));const og={propName:"enabled",label:"Enabled",type:"boolean"};function lg(){const[e,r]=br(),{passes:t}=F.postProcessing;Ae(()=>{const i=t.addEventListener("change",r);return()=>t.removeEventListener("change",i)},[]);const n=i=>void F.postProcessing.addPass(i),l=i=>{const{destination:o,source:s}=i;if(!o||o.index===s.index)return;const p=[...t],f=p.splice(s.index,1)[0];p.splice(o.index,0,f),F.postProcessing.updatePasses(p)},a=i=>h("div",{ref:i.innerRef,...i.droppableProps,children:[t.map((o,s)=>h(ng,{index:s,target:o},o.id)),i.placeholder]});return h(Ve,{disableGutters:!0,className:"PostProcessingControl SettingGroup",children:[h(ie,{children:[h("div",{children:"Post-Processing"}),h(ro,{onClick:n,options:ig,title:"Add Pass",children:h($t,{})})]}),h(we.Fragment,{children:[h(ur,{target:F.postProcessing,propList:[og]}),t.length?h(dl,{onDragEnd:l,children:h(ga,{droppableId:"postprocessing",children:a})}):"Click + to add pass"]},e)]})}const sg=[{propName:"near",label:"Near",type:"number",min:.01,step:.01,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"far",label:"Far",type:"number",min:.01,step:20,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"fov",label:"FOV",type:"slider",title:"Field of View",min:5,max:175,step:5,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"position",label:"Position",type:"vector",title:"Where the camera is",step:.1,onChange:()=>F.camera.updateProjectionMatrix()}],cg=[{propName:"target",label:"Target",type:"vector",title:"Camera target, where the camera looks at",step:.1,onChange:()=>F.controls.update()}];function ug(){const{camera:e}=F,[r,t]=br(),n=l=>{l.stopPropagation(),["near","far","fov"].forEach(a=>e[a]=Ll[a]),e.updateProjectionMatrix(),t()};return h(Ve,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[h(ie,{children:[h("div",{className:"title",children:[h(Ks,{}),"Camera"]}),h(fe,{onClick:n,title:"Reset camera settings",variant:"contained",children:"Reset"})]}),h(ie,{children:[h(ur,{target:e,propList:sg},r),h(ur,{target:F.controls,propList:cg})]})]})}function dg(){const e=Be(a=>a.sidebar.modal.open),{showTimeControl:r,toggleTimeControl:t,showFrameRate:n,toggleFrameRate:l}=Be();return h(ie,{children:[h(Bc,{}),h(ug,{}),h(Nc,{}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:l,startIcon:h(ac,{}),children:n?"Hide Frame Rate":"Show Frame Rate"}),h(fe,{variant:"contained",onClick:t,startIcon:r?h(lc,{}):h(oc,{}),children:r?"Hide Time Control":"Show Time Control"}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:()=>e("background"),startIcon:h(Ji,{}),children:"Background Settings"}),h(Fc,{}),h(lg,{})]})}async function fg(e,r={}){const{GLTFExporter:t}=await Gt(()=>import("./GLTFExporter.16e3e474.js"),["assets/GLTFExporter.16e3e474.js","assets/index.19018b9b.js","assets/index.af0be273.css"]),l=await new t().parseAsync(e,r);return r.binary?new Blob([l]):new Blob([JSON.stringify(l)],{type:"application/json"})}async function pg({binary:e=!1}){var s,p,f;const r=_e.getState().activeModel;if(!r)return;const{model:t}=r,n=e?"glb":"gltf",l=`${(p=(s=r.userData)==null?void 0:s.name)!=null?p:r.id}.${n}`,a=r.animation.current.chainName,i=(f=r.animation.chain[a].clips)!=null?f:[],o=await fg(t,{binary:e,animations:i,onlyVisible:!0});xr.exports.saveAs(o,l)}function vg(){const e=r=>{r.stopPropagation();const t=!!r.currentTarget.dataset.binary;pg({binary:t})};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"glTF"}),h(fe,{onClick:e,title:"Download current model as glTF",variant:"contained",children:h(Or,{})})]}),h(ie,{children:h("div",{children:[h(fe,{onClick:e,title:"Download current model as glTF",children:[h(Or,{}),"glTF"]}),h(fe,{"data-binary":!0,onClick:e,title:"Download current model as glb (binary glTF)",children:[h(Or,{}),"glb"]})]})})]})}const gg=()=>{const{activeModel:{animation:e}}=_e.getState(),{record:r}=F;e.stop(),e.addCountedEventListener("ChainFinished",()=>r.stop()),e.play(),r.start()},hg=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"appendDate",label:"Append Date",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:5}];function mg(){const[e,r]=dr(F.record.state),t=o=>{var p,f;const{action:s}=o.currentTarget.dataset;(f=(p=F.record)[s])==null||f.call(p),r(s==="stop"?"idle":F.record.state)},n=h(fe,{onClick:t,"data-action":e==="idle"?"start":"resume",title:e==="idle"?"Start recording":"Resume recording",children:h(qt,{})}),l=h(fe,{onClick:t,"data-action":"pause",title:"Pause Recording",children:h(Ds,{})}),a=h(fe,{onClick:t,"data-action":"stop",title:"Finish Recording",children:h(ic,{})}),i={idle:n,recording:h(ie,{children:[l,a]}),paused:h(ie,{children:[n,a]})};return h(ie,{children:[h("div",{children:`Status: ${Fl(e)}`}),h("div",{children:i[e]})]})}function bg(){const{activeModel:e}=_e(),{record:r}=F,t=n=>{n.stopPropagation();const{clipDuration:l}=e.animation.current;if(l===0||l===1/0){alert("Can't record");return}gg()};return r?h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"Record"}),h(fe,{onClick:t,title:"Record current animation",variant:"contained",children:h(qt,{})})]}),h(ie,{children:[h(ur,{target:r.settings,propList:hg}),h(Ve,{disableGutters:!0,className:"SettingGroup-extra",children:[h(ie,{children:"Manual Record"}),h(mg,{})]})]})]}):h(ie,{})}const wg=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"noBackground",label:"Remove BG",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"number",fullWidth:!0,min:1,max:120,step:10}],yg=e=>{const[r,t]=e.split(","),n=r.split(";")[0].split(":")[1],l=window.atob(t),a=l.length,i=new Array(a).fill().map((s,p)=>l.charCodeAt(p)),o=new Uint8Array(i);return new Blob([o],{type:n})};function xg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ha={exports:{}},gn={},fi;function Tr(){return fi||(fi=1,function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(a,i){return Object.prototype.hasOwnProperty.call(a,i)}e.assign=function(a){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(!!o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var s in o)t(o,s)&&(a[s]=o[s])}}return a},e.shrinkBuf=function(a,i){return a.length===i?a:a.subarray?a.subarray(0,i):(a.length=i,a)};var n={arraySet:function(a,i,o,s,p){if(i.subarray&&a.subarray){a.set(i.subarray(o,o+s),p);return}for(var f=0;f<s;f++)a[p+f]=i[o+f]},flattenChunks:function(a){var i,o,s,p,f,c;for(s=0,i=0,o=a.length;i<o;i++)s+=a[i].length;for(c=new Uint8Array(s),p=0,i=0,o=a.length;i<o;i++)f=a[i],c.set(f,p),p+=f.length;return c}},l={arraySet:function(a,i,o,s,p){for(var f=0;f<s;f++)a[p+f]=i[o+f]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,l))},e.setTyped(r)}(gn)),gn}var Ur={},sr={},Pr={},pi;function Dg(){if(pi)return Pr;pi=1;var e=Tr(),r=4,t=0,n=1,l=2;function a(x){for(var W=x.length;--W>=0;)x[W]=0}var i=0,o=1,s=2,p=3,f=258,c=29,d=256,g=d+1+c,v=30,D=19,C=2*g+1,b=15,y=16,S=7,_=256,k=16,T=17,I=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=512,H=new Array((g+2)*2);a(H);var q=new Array(v*2);a(q);var Q=new Array(U);a(Q);var K=new Array(f-p+1);a(K);var j=new Array(c);a(j);var G=new Array(v);a(G);function re(x,W,V,X,A){this.static_tree=x,this.extra_bits=W,this.extra_base=V,this.elems=X,this.max_length=A,this.has_stree=x&&x.length}var ve,Ie,de;function De(x,W){this.dyn_tree=x,this.max_code=0,this.stat_desc=W}function Se(x){return x<256?Q[x]:Q[256+(x>>>7)]}function ge(x,W){x.pending_buf[x.pending++]=W&255,x.pending_buf[x.pending++]=W>>>8&255}function ce(x,W,V){x.bi_valid>y-V?(x.bi_buf|=W<<x.bi_valid&65535,ge(x,x.bi_buf),x.bi_buf=W>>y-x.bi_valid,x.bi_valid+=V-y):(x.bi_buf|=W<<x.bi_valid&65535,x.bi_valid+=V)}function be(x,W,V){ce(x,V[W*2],V[W*2+1])}function se(x,W){var V=0;do V|=x&1,x>>>=1,V<<=1;while(--W>0);return V>>>1}function ae(x){x.bi_valid===16?(ge(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function ke(x,W){var V=W.dyn_tree,X=W.max_code,A=W.stat_desc.static_tree,N=W.stat_desc.has_stree,m=W.stat_desc.extra_bits,$=W.stat_desc.extra_base,le=W.stat_desc.max_length,u,P,M,w,E,R,te=0;for(w=0;w<=b;w++)x.bl_count[w]=0;for(V[x.heap[x.heap_max]*2+1]=0,u=x.heap_max+1;u<C;u++)P=x.heap[u],w=V[V[P*2+1]*2+1]+1,w>le&&(w=le,te++),V[P*2+1]=w,!(P>X)&&(x.bl_count[w]++,E=0,P>=$&&(E=m[P-$]),R=V[P*2],x.opt_len+=R*(w+E),N&&(x.static_len+=R*(A[P*2+1]+E)));if(te!==0){do{for(w=le-1;x.bl_count[w]===0;)w--;x.bl_count[w]--,x.bl_count[w+1]+=2,x.bl_count[le]--,te-=2}while(te>0);for(w=le;w!==0;w--)for(P=x.bl_count[w];P!==0;)M=x.heap[--u],!(M>X)&&(V[M*2+1]!==w&&(x.opt_len+=(w-V[M*2+1])*V[M*2],V[M*2+1]=w),P--)}}function Ne(x,W,V){var X=new Array(b+1),A=0,N,m;for(N=1;N<=b;N++)X[N]=A=A+V[N-1]<<1;for(m=0;m<=W;m++){var $=x[m*2+1];$!==0&&(x[m*2]=se(X[$]++,$))}}function oe(){var x,W,V,X,A,N=new Array(b+1);for(V=0,X=0;X<c-1;X++)for(j[X]=V,x=0;x<1<<B[X];x++)K[V++]=X;for(K[V-1]=X,A=0,X=0;X<16;X++)for(G[X]=A,x=0;x<1<<O[X];x++)Q[A++]=X;for(A>>=7;X<v;X++)for(G[X]=A<<7,x=0;x<1<<O[X]-7;x++)Q[256+A++]=X;for(W=0;W<=b;W++)N[W]=0;for(x=0;x<=143;)H[x*2+1]=8,x++,N[8]++;for(;x<=255;)H[x*2+1]=9,x++,N[9]++;for(;x<=279;)H[x*2+1]=7,x++,N[7]++;for(;x<=287;)H[x*2+1]=8,x++,N[8]++;for(Ne(H,g+1,N),x=0;x<v;x++)q[x*2+1]=5,q[x*2]=se(x,5);ve=new re(H,B,d+1,g,b),Ie=new re(q,O,0,v,b),de=new re(new Array(0),z,0,D,S)}function Ee(x){var W;for(W=0;W<g;W++)x.dyn_ltree[W*2]=0;for(W=0;W<v;W++)x.dyn_dtree[W*2]=0;for(W=0;W<D;W++)x.bl_tree[W*2]=0;x.dyn_ltree[_*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ge(x){x.bi_valid>8?ge(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function We(x,W,V,X){Ge(x),X&&(ge(x,V),ge(x,~V)),e.arraySet(x.pending_buf,x.window,W,V,x.pending),x.pending+=V}function Re(x,W,V,X){var A=W*2,N=V*2;return x[A]<x[N]||x[A]===x[N]&&X[W]<=X[V]}function ye(x,W,V){for(var X=x.heap[V],A=V<<1;A<=x.heap_len&&(A<x.heap_len&&Re(W,x.heap[A+1],x.heap[A],x.depth)&&A++,!Re(W,X,x.heap[A],x.depth));)x.heap[V]=x.heap[A],V=A,A<<=1;x.heap[V]=X}function ue(x,W,V){var X,A,N=0,m,$;if(x.last_lit!==0)do X=x.pending_buf[x.d_buf+N*2]<<8|x.pending_buf[x.d_buf+N*2+1],A=x.pending_buf[x.l_buf+N],N++,X===0?be(x,A,W):(m=K[A],be(x,m+d+1,W),$=B[m],$!==0&&(A-=j[m],ce(x,A,$)),X--,m=Se(X),be(x,m,V),$=O[m],$!==0&&(X-=G[m],ce(x,X,$)));while(N<x.last_lit);be(x,_,W)}function Le(x,W){var V=W.dyn_tree,X=W.stat_desc.static_tree,A=W.stat_desc.has_stree,N=W.stat_desc.elems,m,$,le=-1,u;for(x.heap_len=0,x.heap_max=C,m=0;m<N;m++)V[m*2]!==0?(x.heap[++x.heap_len]=le=m,x.depth[m]=0):V[m*2+1]=0;for(;x.heap_len<2;)u=x.heap[++x.heap_len]=le<2?++le:0,V[u*2]=1,x.depth[u]=0,x.opt_len--,A&&(x.static_len-=X[u*2+1]);for(W.max_code=le,m=x.heap_len>>1;m>=1;m--)ye(x,V,m);u=N;do m=x.heap[1],x.heap[1]=x.heap[x.heap_len--],ye(x,V,1),$=x.heap[1],x.heap[--x.heap_max]=m,x.heap[--x.heap_max]=$,V[u*2]=V[m*2]+V[$*2],x.depth[u]=(x.depth[m]>=x.depth[$]?x.depth[m]:x.depth[$])+1,V[m*2+1]=V[$*2+1]=u,x.heap[1]=u++,ye(x,V,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],ke(x,W),Ne(V,le,x.bl_count)}function pr(x,W,V){var X,A=-1,N,m=W[0*2+1],$=0,le=7,u=4;for(m===0&&(le=138,u=3),W[(V+1)*2+1]=65535,X=0;X<=V;X++)N=m,m=W[(X+1)*2+1],!(++$<le&&N===m)&&($<u?x.bl_tree[N*2]+=$:N!==0?(N!==A&&x.bl_tree[N*2]++,x.bl_tree[k*2]++):$<=10?x.bl_tree[T*2]++:x.bl_tree[I*2]++,$=0,A=N,m===0?(le=138,u=3):N===m?(le=6,u=3):(le=7,u=4))}function Dr(x,W,V){var X,A=-1,N,m=W[0*2+1],$=0,le=7,u=4;for(m===0&&(le=138,u=3),X=0;X<=V;X++)if(N=m,m=W[(X+1)*2+1],!(++$<le&&N===m)){if($<u)do be(x,N,x.bl_tree);while(--$!==0);else N!==0?(N!==A&&(be(x,N,x.bl_tree),$--),be(x,k,x.bl_tree),ce(x,$-3,2)):$<=10?(be(x,T,x.bl_tree),ce(x,$-3,3)):(be(x,I,x.bl_tree),ce(x,$-11,7));$=0,A=N,m===0?(le=138,u=3):N===m?(le=6,u=3):(le=7,u=4)}}function rr(x){var W;for(pr(x,x.dyn_ltree,x.l_desc.max_code),pr(x,x.dyn_dtree,x.d_desc.max_code),Le(x,x.bl_desc),W=D-1;W>=3&&x.bl_tree[L[W]*2+1]===0;W--);return x.opt_len+=3*(W+1)+5+5+4,W}function Hr(x,W,V,X){var A;for(ce(x,W-257,5),ce(x,V-1,5),ce(x,X-4,4),A=0;A<X;A++)ce(x,x.bl_tree[L[A]*2+1],3);Dr(x,x.dyn_ltree,W-1),Dr(x,x.dyn_dtree,V-1)}function Cr(x){var W=4093624447,V;for(V=0;V<=31;V++,W>>>=1)if(W&1&&x.dyn_ltree[V*2]!==0)return t;if(x.dyn_ltree[9*2]!==0||x.dyn_ltree[10*2]!==0||x.dyn_ltree[13*2]!==0)return n;for(V=32;V<d;V++)if(x.dyn_ltree[V*2]!==0)return n;return t}var lr=!1;function Gr(x){lr||(oe(),lr=!0),x.l_desc=new De(x.dyn_ltree,ve),x.d_desc=new De(x.dyn_dtree,Ie),x.bl_desc=new De(x.bl_tree,de),x.bi_buf=0,x.bi_valid=0,Ee(x)}function Sr(x,W,V,X){ce(x,(i<<1)+(X?1:0),3),We(x,W,V,!0)}function Ze(x){ce(x,o<<1,3),be(x,_,H),ae(x)}function vr(x,W,V,X){var A,N,m=0;x.level>0?(x.strm.data_type===l&&(x.strm.data_type=Cr(x)),Le(x,x.l_desc),Le(x,x.d_desc),m=rr(x),A=x.opt_len+3+7>>>3,N=x.static_len+3+7>>>3,N<=A&&(A=N)):A=N=V+5,V+4<=A&&W!==-1?Sr(x,W,V,X):x.strategy===r||N===A?(ce(x,(o<<1)+(X?1:0),3),ue(x,H,q)):(ce(x,(s<<1)+(X?1:0),3),Hr(x,x.l_desc.max_code+1,x.d_desc.max_code+1,m+1),ue(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),X&&Ge(x)}function Wr(x,W,V){return x.pending_buf[x.d_buf+x.last_lit*2]=W>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=W&255,x.pending_buf[x.l_buf+x.last_lit]=V&255,x.last_lit++,W===0?x.dyn_ltree[V*2]++:(x.matches++,W--,x.dyn_ltree[(K[V]+d+1)*2]++,x.dyn_dtree[Se(W)*2]++),x.last_lit===x.lit_bufsize-1}return Pr._tr_init=Gr,Pr._tr_stored_block=Sr,Pr._tr_flush_block=vr,Pr._tr_tally=Wr,Pr._tr_align=Ze,Pr}var hn,vi;function bl(){if(vi)return hn;vi=1;function e(r,t,n,l){for(var a=r&65535|0,i=r>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+t[l++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0}return hn=e,hn}var mn,gi;function wl(){if(gi)return mn;gi=1;function e(){for(var n,l=[],a=0;a<256;a++){n=a;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;l[a]=n}return l}var r=e();function t(n,l,a,i){var o=r,s=i+a;n^=-1;for(var p=i;p<s;p++)n=n>>>8^o[(n^l[p])&255];return n^-1}return mn=t,mn}var bn,hi;function ma(){return hi||(hi=1,bn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),bn}var mi;function Cg(){if(mi)return sr;mi=1;var e=Tr(),r=Dg(),t=bl(),n=wl(),l=ma(),a=0,i=1,o=3,s=4,p=5,f=0,c=1,d=-2,g=-3,v=-5,D=-1,C=1,b=2,y=3,S=4,_=0,k=2,T=8,I=9,B=15,O=8,z=29,L=256,U=L+1+z,H=30,q=19,Q=2*U+1,K=15,j=3,G=258,re=G+j+1,ve=32,Ie=42,de=69,De=73,Se=91,ge=103,ce=113,be=666,se=1,ae=2,ke=3,Ne=4,oe=3;function Ee(u,P){return u.msg=l[P],P}function Ge(u){return(u<<1)-(u>4?9:0)}function We(u){for(var P=u.length;--P>=0;)u[P]=0}function Re(u){var P=u.state,M=P.pending;M>u.avail_out&&(M=u.avail_out),M!==0&&(e.arraySet(u.output,P.pending_buf,P.pending_out,M,u.next_out),u.next_out+=M,P.pending_out+=M,u.total_out+=M,u.avail_out-=M,P.pending-=M,P.pending===0&&(P.pending_out=0))}function ye(u,P){r._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,P),u.block_start=u.strstart,Re(u.strm)}function ue(u,P){u.pending_buf[u.pending++]=P}function Le(u,P){u.pending_buf[u.pending++]=P>>>8&255,u.pending_buf[u.pending++]=P&255}function pr(u,P,M,w){var E=u.avail_in;return E>w&&(E=w),E===0?0:(u.avail_in-=E,e.arraySet(P,u.input,u.next_in,E,M),u.state.wrap===1?u.adler=t(u.adler,P,E,M):u.state.wrap===2&&(u.adler=n(u.adler,P,E,M)),u.next_in+=E,u.total_in+=E,E)}function Dr(u,P){var M=u.max_chain_length,w=u.strstart,E,R,te=u.prev_length,Y=u.nice_match,J=u.strstart>u.w_size-re?u.strstart-(u.w_size-re):0,pe=u.window,wr=u.w_mask,Te=u.prev,he=u.strstart+G,Oe=pe[w+te-1],je=pe[w+te];u.prev_length>=u.good_match&&(M>>=2),Y>u.lookahead&&(Y=u.lookahead);do if(E=P,!(pe[E+te]!==je||pe[E+te-1]!==Oe||pe[E]!==pe[w]||pe[++E]!==pe[w+1])){w+=2,E++;do;while(pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&pe[++w]===pe[++E]&&w<he);if(R=G-(he-w),w=he-G,R>te){if(u.match_start=P,te=R,R>=Y)break;Oe=pe[w+te-1],je=pe[w+te]}}while((P=Te[P&wr])>J&&--M!==0);return te<=u.lookahead?te:u.lookahead}function rr(u){var P=u.w_size,M,w,E,R,te;do{if(R=u.window_size-u.lookahead-u.strstart,u.strstart>=P+(P-re)){e.arraySet(u.window,u.window,P,P,0),u.match_start-=P,u.strstart-=P,u.block_start-=P,w=u.hash_size,M=w;do E=u.head[--M],u.head[M]=E>=P?E-P:0;while(--w);w=P,M=w;do E=u.prev[--M],u.prev[M]=E>=P?E-P:0;while(--w);R+=P}if(u.strm.avail_in===0)break;if(w=pr(u.strm,u.window,u.strstart+u.lookahead,R),u.lookahead+=w,u.lookahead+u.insert>=j)for(te=u.strstart-u.insert,u.ins_h=u.window[te],u.ins_h=(u.ins_h<<u.hash_shift^u.window[te+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[te+j-1])&u.hash_mask,u.prev[te&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=te,te++,u.insert--,!(u.lookahead+u.insert<j)););}while(u.lookahead<re&&u.strm.avail_in!==0)}function Hr(u,P){var M=65535;for(M>u.pending_buf_size-5&&(M=u.pending_buf_size-5);;){if(u.lookahead<=1){if(rr(u),u.lookahead===0&&P===a)return se;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var w=u.block_start+M;if((u.strstart===0||u.strstart>=w)&&(u.lookahead=u.strstart-w,u.strstart=w,ye(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-re&&(ye(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(ye(u,!0),u.strm.avail_out===0?ke:Ne):(u.strstart>u.block_start&&(ye(u,!1),u.strm.avail_out===0),se)}function Cr(u,P){for(var M,w;;){if(u.lookahead<re){if(rr(u),u.lookahead<re&&P===a)return se;if(u.lookahead===0)break}if(M=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,M=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),M!==0&&u.strstart-M<=u.w_size-re&&(u.match_length=Dr(u,M)),u.match_length>=j)if(w=r._tr_tally(u,u.strstart-u.match_start,u.match_length-j),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=j){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,M=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else w=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(w&&(ye(u,!1),u.strm.avail_out===0))return se}return u.insert=u.strstart<j-1?u.strstart:j-1,P===s?(ye(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(ye(u,!1),u.strm.avail_out===0)?se:ae}function lr(u,P){for(var M,w,E;;){if(u.lookahead<re){if(rr(u),u.lookahead<re&&P===a)return se;if(u.lookahead===0)break}if(M=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,M=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=j-1,M!==0&&u.prev_length<u.max_lazy_match&&u.strstart-M<=u.w_size-re&&(u.match_length=Dr(u,M),u.match_length<=5&&(u.strategy===C||u.match_length===j&&u.strstart-u.match_start>4096)&&(u.match_length=j-1)),u.prev_length>=j&&u.match_length<=u.prev_length){E=u.strstart+u.lookahead-j,w=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-j),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=E&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,M=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=j-1,u.strstart++,w&&(ye(u,!1),u.strm.avail_out===0))return se}else if(u.match_available){if(w=r._tr_tally(u,0,u.window[u.strstart-1]),w&&ye(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return se}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(w=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<j-1?u.strstart:j-1,P===s?(ye(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(ye(u,!1),u.strm.avail_out===0)?se:ae}function Gr(u,P){for(var M,w,E,R,te=u.window;;){if(u.lookahead<=G){if(rr(u),u.lookahead<=G&&P===a)return se;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=j&&u.strstart>0&&(E=u.strstart-1,w=te[E],w===te[++E]&&w===te[++E]&&w===te[++E])){R=u.strstart+G;do;while(w===te[++E]&&w===te[++E]&&w===te[++E]&&w===te[++E]&&w===te[++E]&&w===te[++E]&&w===te[++E]&&w===te[++E]&&E<R);u.match_length=G-(R-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=j?(M=r._tr_tally(u,1,u.match_length-j),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(M=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),M&&(ye(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(ye(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(ye(u,!1),u.strm.avail_out===0)?se:ae}function Sr(u,P){for(var M;;){if(u.lookahead===0&&(rr(u),u.lookahead===0)){if(P===a)return se;break}if(u.match_length=0,M=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,M&&(ye(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(ye(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(ye(u,!1),u.strm.avail_out===0)?se:ae}function Ze(u,P,M,w,E){this.good_length=u,this.max_lazy=P,this.nice_length=M,this.max_chain=w,this.func=E}var vr;vr=[new Ze(0,0,0,0,Hr),new Ze(4,4,8,4,Cr),new Ze(4,5,16,8,Cr),new Ze(4,6,32,32,Cr),new Ze(4,4,16,16,lr),new Ze(8,16,32,32,lr),new Ze(8,16,128,128,lr),new Ze(8,32,128,256,lr),new Ze(32,128,258,1024,lr),new Ze(32,258,258,4096,lr)];function Wr(u){u.window_size=2*u.w_size,We(u.head),u.max_lazy_match=vr[u.level].max_lazy,u.good_match=vr[u.level].good_length,u.nice_match=vr[u.level].nice_length,u.max_chain_length=vr[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=j-1,u.match_available=0,u.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(Q*2),this.dyn_dtree=new e.Buf16((2*H+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(K+1),this.heap=new e.Buf16(2*U+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*U+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(u){var P;return!u||!u.state?Ee(u,d):(u.total_in=u.total_out=0,u.data_type=k,P=u.state,P.pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?Ie:ce,u.adler=P.wrap===2?0:1,P.last_flush=a,r._tr_init(P),f)}function V(u){var P=W(u);return P===f&&Wr(u.state),P}function X(u,P){return!u||!u.state||u.state.wrap!==2?d:(u.state.gzhead=P,f)}function A(u,P,M,w,E,R){if(!u)return d;var te=1;if(P===D&&(P=6),w<0?(te=0,w=-w):w>15&&(te=2,w-=16),E<1||E>I||M!==T||w<8||w>15||P<0||P>9||R<0||R>S)return Ee(u,d);w===8&&(w=9);var Y=new x;return u.state=Y,Y.strm=u,Y.wrap=te,Y.gzhead=null,Y.w_bits=w,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=E+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+j-1)/j),Y.window=new e.Buf8(Y.w_size*2),Y.head=new e.Buf16(Y.hash_size),Y.prev=new e.Buf16(Y.w_size),Y.lit_bufsize=1<<E+6,Y.pending_buf_size=Y.lit_bufsize*4,Y.pending_buf=new e.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=(1+2)*Y.lit_bufsize,Y.level=P,Y.strategy=R,Y.method=M,V(u)}function N(u,P){return A(u,P,T,B,O,_)}function m(u,P){var M,w,E,R;if(!u||!u.state||P>p||P<0)return u?Ee(u,d):d;if(w=u.state,!u.output||!u.input&&u.avail_in!==0||w.status===be&&P!==s)return Ee(u,u.avail_out===0?v:d);if(w.strm=u,M=w.last_flush,w.last_flush=P,w.status===Ie)if(w.wrap===2)u.adler=0,ue(w,31),ue(w,139),ue(w,8),w.gzhead?(ue(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),ue(w,w.gzhead.time&255),ue(w,w.gzhead.time>>8&255),ue(w,w.gzhead.time>>16&255),ue(w,w.gzhead.time>>24&255),ue(w,w.level===9?2:w.strategy>=b||w.level<2?4:0),ue(w,w.gzhead.os&255),w.gzhead.extra&&w.gzhead.extra.length&&(ue(w,w.gzhead.extra.length&255),ue(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(u.adler=n(u.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=de):(ue(w,0),ue(w,0),ue(w,0),ue(w,0),ue(w,0),ue(w,w.level===9?2:w.strategy>=b||w.level<2?4:0),ue(w,oe),w.status=ce);else{var te=T+(w.w_bits-8<<4)<<8,Y=-1;w.strategy>=b||w.level<2?Y=0:w.level<6?Y=1:w.level===6?Y=2:Y=3,te|=Y<<6,w.strstart!==0&&(te|=ve),te+=31-te%31,w.status=ce,Le(w,te),w.strstart!==0&&(Le(w,u.adler>>>16),Le(w,u.adler&65535)),u.adler=1}if(w.status===de)if(w.gzhead.extra){for(E=w.pending;w.gzindex<(w.gzhead.extra.length&65535)&&!(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),Re(u),E=w.pending,w.pending===w.pending_buf_size));)ue(w,w.gzhead.extra[w.gzindex]&255),w.gzindex++;w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=De)}else w.status=De;if(w.status===De)if(w.gzhead.name){E=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),Re(u),E=w.pending,w.pending===w.pending_buf_size)){R=1;break}w.gzindex<w.gzhead.name.length?R=w.gzhead.name.charCodeAt(w.gzindex++)&255:R=0,ue(w,R)}while(R!==0);w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),R===0&&(w.gzindex=0,w.status=Se)}else w.status=Se;if(w.status===Se)if(w.gzhead.comment){E=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),Re(u),E=w.pending,w.pending===w.pending_buf_size)){R=1;break}w.gzindex<w.gzhead.comment.length?R=w.gzhead.comment.charCodeAt(w.gzindex++)&255:R=0,ue(w,R)}while(R!==0);w.gzhead.hcrc&&w.pending>E&&(u.adler=n(u.adler,w.pending_buf,w.pending-E,E)),R===0&&(w.status=ge)}else w.status=ge;if(w.status===ge&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&Re(u),w.pending+2<=w.pending_buf_size&&(ue(w,u.adler&255),ue(w,u.adler>>8&255),u.adler=0,w.status=ce)):w.status=ce),w.pending!==0){if(Re(u),u.avail_out===0)return w.last_flush=-1,f}else if(u.avail_in===0&&Ge(P)<=Ge(M)&&P!==s)return Ee(u,v);if(w.status===be&&u.avail_in!==0)return Ee(u,v);if(u.avail_in!==0||w.lookahead!==0||P!==a&&w.status!==be){var J=w.strategy===b?Sr(w,P):w.strategy===y?Gr(w,P):vr[w.level].func(w,P);if((J===ke||J===Ne)&&(w.status=be),J===se||J===ke)return u.avail_out===0&&(w.last_flush=-1),f;if(J===ae&&(P===i?r._tr_align(w):P!==p&&(r._tr_stored_block(w,0,0,!1),P===o&&(We(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),Re(u),u.avail_out===0))return w.last_flush=-1,f}return P!==s?f:w.wrap<=0?c:(w.wrap===2?(ue(w,u.adler&255),ue(w,u.adler>>8&255),ue(w,u.adler>>16&255),ue(w,u.adler>>24&255),ue(w,u.total_in&255),ue(w,u.total_in>>8&255),ue(w,u.total_in>>16&255),ue(w,u.total_in>>24&255)):(Le(w,u.adler>>>16),Le(w,u.adler&65535)),Re(u),w.wrap>0&&(w.wrap=-w.wrap),w.pending!==0?f:c)}function $(u){var P;return!u||!u.state?d:(P=u.state.status,P!==Ie&&P!==de&&P!==De&&P!==Se&&P!==ge&&P!==ce&&P!==be?Ee(u,d):(u.state=null,P===ce?Ee(u,g):f))}function le(u,P){var M=P.length,w,E,R,te,Y,J,pe,wr;if(!u||!u.state||(w=u.state,te=w.wrap,te===2||te===1&&w.status!==Ie||w.lookahead))return d;for(te===1&&(u.adler=t(u.adler,P,M,0)),w.wrap=0,M>=w.w_size&&(te===0&&(We(w.head),w.strstart=0,w.block_start=0,w.insert=0),wr=new e.Buf8(w.w_size),e.arraySet(wr,P,M-w.w_size,w.w_size,0),P=wr,M=w.w_size),Y=u.avail_in,J=u.next_in,pe=u.input,u.avail_in=M,u.next_in=0,u.input=P,rr(w);w.lookahead>=j;){E=w.strstart,R=w.lookahead-(j-1);do w.ins_h=(w.ins_h<<w.hash_shift^w.window[E+j-1])&w.hash_mask,w.prev[E&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=E,E++;while(--R);w.strstart=E,w.lookahead=j-1,rr(w)}return w.strstart+=w.lookahead,w.block_start=w.strstart,w.insert=w.lookahead,w.lookahead=0,w.match_length=w.prev_length=j-1,w.match_available=0,u.next_in=J,u.input=pe,u.avail_in=Y,w.wrap=te,f}return sr.deflateInit=N,sr.deflateInit2=A,sr.deflateReset=V,sr.deflateResetKeep=W,sr.deflateSetHeader=X,sr.deflate=m,sr.deflateEnd=$,sr.deflateSetDictionary=le,sr.deflateInfo="pako deflate (from Nodeca project)",sr}var Br={},bi;function yl(){if(bi)return Br;bi=1;var e=Tr(),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var n=new e.Buf8(256),l=0;l<256;l++)n[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;n[254]=n[254]=1,Br.string2buf=function(i){var o,s,p,f,c,d=i.length,g=0;for(f=0;f<d;f++)s=i.charCodeAt(f),(s&64512)===55296&&f+1<d&&(p=i.charCodeAt(f+1),(p&64512)===56320&&(s=65536+(s-55296<<10)+(p-56320),f++)),g+=s<128?1:s<2048?2:s<65536?3:4;for(o=new e.Buf8(g),c=0,f=0;c<g;f++)s=i.charCodeAt(f),(s&64512)===55296&&f+1<d&&(p=i.charCodeAt(f+1),(p&64512)===56320&&(s=65536+(s-55296<<10)+(p-56320),f++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};function a(i,o){if(o<65534&&(i.subarray&&t||!i.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(i,o));for(var s="",p=0;p<o;p++)s+=String.fromCharCode(i[p]);return s}return Br.buf2binstring=function(i){return a(i,i.length)},Br.binstring2buf=function(i){for(var o=new e.Buf8(i.length),s=0,p=o.length;s<p;s++)o[s]=i.charCodeAt(s);return o},Br.buf2string=function(i,o){var s,p,f,c,d=o||i.length,g=new Array(d*2);for(p=0,s=0;s<d;){if(f=i[s++],f<128){g[p++]=f;continue}if(c=n[f],c>4){g[p++]=65533,s+=c-1;continue}for(f&=c===2?31:c===3?15:7;c>1&&s<d;)f=f<<6|i[s++]&63,c--;if(c>1){g[p++]=65533;continue}f<65536?g[p++]=f:(f-=65536,g[p++]=55296|f>>10&1023,g[p++]=56320|f&1023)}return a(g,p)},Br.utf8border=function(i,o){var s;for(o=o||i.length,o>i.length&&(o=i.length),s=o-1;s>=0&&(i[s]&192)===128;)s--;return s<0||s===0?o:s+n[i[s]]>o?s:o},Br}var wn,wi;function xl(){if(wi)return wn;wi=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return wn=e,wn}var yi;function Sg(){if(yi)return Ur;yi=1;var e=Cg(),r=Tr(),t=yl(),n=ma(),l=xl(),a=Object.prototype.toString,i=0,o=4,s=0,p=1,f=2,c=-1,d=0,g=8;function v(y){if(!(this instanceof v))return new v(y);this.options=r.assign({level:c,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var _=e.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(_!==s)throw new Error(n[_]);if(S.header&&e.deflateSetHeader(this.strm,S.header),S.dictionary){var k;if(typeof S.dictionary=="string"?k=t.string2buf(S.dictionary):a.call(S.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(S.dictionary):k=S.dictionary,_=e.deflateSetDictionary(this.strm,k),_!==s)throw new Error(n[_]);this._dict_set=!0}}v.prototype.push=function(y,S){var _=this.strm,k=this.options.chunkSize,T,I;if(this.ended)return!1;I=S===~~S?S:S===!0?o:i,typeof y=="string"?_.input=t.string2buf(y):a.call(y)==="[object ArrayBuffer]"?_.input=new Uint8Array(y):_.input=y,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new r.Buf8(k),_.next_out=0,_.avail_out=k),T=e.deflate(_,I),T!==p&&T!==s)return this.onEnd(T),this.ended=!0,!1;(_.avail_out===0||_.avail_in===0&&(I===o||I===f))&&(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(_.output,_.next_out))):this.onData(r.shrinkBuf(_.output,_.next_out)))}while((_.avail_in>0||_.avail_out===0)&&T!==p);return I===o?(T=e.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===s):(I===f&&(this.onEnd(s),_.avail_out=0),!0)},v.prototype.onData=function(y){this.chunks.push(y)},v.prototype.onEnd=function(y){y===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg};function D(y,S){var _=new v(S);if(_.push(y,!0),_.err)throw _.msg||n[_.err];return _.result}function C(y,S){return S=S||{},S.raw=!0,D(y,S)}function b(y,S){return S=S||{},S.gzip=!0,D(y,S)}return Ur.Deflate=v,Ur.deflate=D,Ur.deflateRaw=C,Ur.gzip=b,Ur}var qr={},ar={},yn,xi;function _g(){if(xi)return yn;xi=1;var e=30,r=12;return yn=function(n,l){var a,i,o,s,p,f,c,d,g,v,D,C,b,y,S,_,k,T,I,B,O,z,L,U,H;a=n.state,i=n.next_in,U=n.input,o=i+(n.avail_in-5),s=n.next_out,H=n.output,p=s-(l-n.avail_out),f=s+(n.avail_out-257),c=a.dmax,d=a.wsize,g=a.whave,v=a.wnext,D=a.window,C=a.hold,b=a.bits,y=a.lencode,S=a.distcode,_=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{b<15&&(C+=U[i++]<<b,b+=8,C+=U[i++]<<b,b+=8),T=y[C&_];r:for(;;){if(I=T>>>24,C>>>=I,b-=I,I=T>>>16&255,I===0)H[s++]=T&65535;else if(I&16){B=T&65535,I&=15,I&&(b<I&&(C+=U[i++]<<b,b+=8),B+=C&(1<<I)-1,C>>>=I,b-=I),b<15&&(C+=U[i++]<<b,b+=8,C+=U[i++]<<b,b+=8),T=S[C&k];t:for(;;){if(I=T>>>24,C>>>=I,b-=I,I=T>>>16&255,I&16){if(O=T&65535,I&=15,b<I&&(C+=U[i++]<<b,b+=8,b<I&&(C+=U[i++]<<b,b+=8)),O+=C&(1<<I)-1,O>c){n.msg="invalid distance too far back",a.mode=e;break e}if(C>>>=I,b-=I,I=s-p,O>I){if(I=O-I,I>g&&a.sane){n.msg="invalid distance too far back",a.mode=e;break e}if(z=0,L=D,v===0){if(z+=d-I,I<B){B-=I;do H[s++]=D[z++];while(--I);z=s-O,L=H}}else if(v<I){if(z+=d+v-I,I-=v,I<B){B-=I;do H[s++]=D[z++];while(--I);if(z=0,v<B){I=v,B-=I;do H[s++]=D[z++];while(--I);z=s-O,L=H}}}else if(z+=v-I,I<B){B-=I;do H[s++]=D[z++];while(--I);z=s-O,L=H}for(;B>2;)H[s++]=L[z++],H[s++]=L[z++],H[s++]=L[z++],B-=3;B&&(H[s++]=L[z++],B>1&&(H[s++]=L[z++]))}else{z=s-O;do H[s++]=H[z++],H[s++]=H[z++],H[s++]=H[z++],B-=3;while(B>2);B&&(H[s++]=H[z++],B>1&&(H[s++]=H[z++]))}}else if((I&64)===0){T=S[(T&65535)+(C&(1<<I)-1)];continue t}else{n.msg="invalid distance code",a.mode=e;break e}break}}else if((I&64)===0){T=y[(T&65535)+(C&(1<<I)-1)];continue r}else if(I&32){a.mode=r;break e}else{n.msg="invalid literal/length code",a.mode=e;break e}break}}while(i<o&&s<f);B=b>>3,i-=B,b-=B<<3,C&=(1<<b)-1,n.next_in=i,n.next_out=s,n.avail_in=i<o?5+(o-i):5-(i-o),n.avail_out=s<f?257+(f-s):257-(s-f),a.hold=C,a.bits=b},yn}var xn,Di;function Ig(){if(Di)return xn;Di=1;var e=Tr(),r=15,t=852,n=592,l=0,a=1,i=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return xn=function(d,g,v,D,C,b,y,S){var _=S.bits,k=0,T=0,I=0,B=0,O=0,z=0,L=0,U=0,H=0,q=0,Q,K,j,G,re,ve=null,Ie=0,de,De=new e.Buf16(r+1),Se=new e.Buf16(r+1),ge=null,ce=0,be,se,ae;for(k=0;k<=r;k++)De[k]=0;for(T=0;T<D;T++)De[g[v+T]]++;for(O=_,B=r;B>=1&&De[B]===0;B--);if(O>B&&(O=B),B===0)return C[b++]=1<<24|64<<16|0,C[b++]=1<<24|64<<16|0,S.bits=1,0;for(I=1;I<B&&De[I]===0;I++);for(O<I&&(O=I),U=1,k=1;k<=r;k++)if(U<<=1,U-=De[k],U<0)return-1;if(U>0&&(d===l||B!==1))return-1;for(Se[1]=0,k=1;k<r;k++)Se[k+1]=Se[k]+De[k];for(T=0;T<D;T++)g[v+T]!==0&&(y[Se[g[v+T]]++]=T);if(d===l?(ve=ge=y,de=19):d===a?(ve=o,Ie-=257,ge=s,ce-=257,de=256):(ve=p,ge=f,de=-1),q=0,T=0,k=I,re=b,z=O,L=0,j=-1,H=1<<O,G=H-1,d===a&&H>t||d===i&&H>n)return 1;for(;;){be=k-L,y[T]<de?(se=0,ae=y[T]):y[T]>de?(se=ge[ce+y[T]],ae=ve[Ie+y[T]]):(se=32+64,ae=0),Q=1<<k-L,K=1<<z,I=K;do K-=Q,C[re+(q>>L)+K]=be<<24|se<<16|ae|0;while(K!==0);for(Q=1<<k-1;q&Q;)Q>>=1;if(Q!==0?(q&=Q-1,q+=Q):q=0,T++,--De[k]===0){if(k===B)break;k=g[v+y[T]]}if(k>O&&(q&G)!==j){for(L===0&&(L=O),re+=I,z=k-L,U=1<<z;z+L<B&&(U-=De[z+L],!(U<=0));)z++,U<<=1;if(H+=1<<z,d===a&&H>t||d===i&&H>n)return 1;j=q&G,C[j]=O<<24|z<<16|re-b|0}}return q!==0&&(C[re+q]=k-L<<24|64<<16|0),S.bits=O,0},xn}var Ci;function Eg(){if(Ci)return ar;Ci=1;var e=Tr(),r=bl(),t=wl(),n=_g(),l=Ig(),a=0,i=1,o=2,s=4,p=5,f=6,c=0,d=1,g=2,v=-2,D=-3,C=-4,b=-5,y=8,S=1,_=2,k=3,T=4,I=5,B=6,O=7,z=8,L=9,U=10,H=11,q=12,Q=13,K=14,j=15,G=16,re=17,ve=18,Ie=19,de=20,De=21,Se=22,ge=23,ce=24,be=25,se=26,ae=27,ke=28,Ne=29,oe=30,Ee=31,Ge=32,We=852,Re=592,ye=15,ue=ye;function Le(A){return(A>>>24&255)+(A>>>8&65280)+((A&65280)<<8)+((A&255)<<24)}function pr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Dr(A){var N;return!A||!A.state?v:(N=A.state,A.total_in=A.total_out=N.total=0,A.msg="",N.wrap&&(A.adler=N.wrap&1),N.mode=S,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new e.Buf32(We),N.distcode=N.distdyn=new e.Buf32(Re),N.sane=1,N.back=-1,c)}function rr(A){var N;return!A||!A.state?v:(N=A.state,N.wsize=0,N.whave=0,N.wnext=0,Dr(A))}function Hr(A,N){var m,$;return!A||!A.state||($=A.state,N<0?(m=0,N=-N):(m=(N>>4)+1,N<48&&(N&=15)),N&&(N<8||N>15))?v:($.window!==null&&$.wbits!==N&&($.window=null),$.wrap=m,$.wbits=N,rr(A))}function Cr(A,N){var m,$;return A?($=new pr,A.state=$,$.window=null,m=Hr(A,N),m!==c&&(A.state=null),m):v}function lr(A){return Cr(A,ue)}var Gr=!0,Sr,Ze;function vr(A){if(Gr){var N;for(Sr=new e.Buf32(512),Ze=new e.Buf32(32),N=0;N<144;)A.lens[N++]=8;for(;N<256;)A.lens[N++]=9;for(;N<280;)A.lens[N++]=7;for(;N<288;)A.lens[N++]=8;for(l(i,A.lens,0,288,Sr,0,A.work,{bits:9}),N=0;N<32;)A.lens[N++]=5;l(o,A.lens,0,32,Ze,0,A.work,{bits:5}),Gr=!1}A.lencode=Sr,A.lenbits=9,A.distcode=Ze,A.distbits=5}function Wr(A,N,m,$){var le,u=A.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new e.Buf8(u.wsize)),$>=u.wsize?(e.arraySet(u.window,N,m-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(le=u.wsize-u.wnext,le>$&&(le=$),e.arraySet(u.window,N,m-$,le,u.wnext),$-=le,$?(e.arraySet(u.window,N,m-$,$,0),u.wnext=$,u.whave=u.wsize):(u.wnext+=le,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=le))),0}function x(A,N){var m,$,le,u,P,M,w,E,R,te,Y,J,pe,wr,Te=0,he,Oe,je,Ye,xt,Dt,Pe,tr,$e=new e.Buf8(4),yr,gr,wa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return v;m=A.state,m.mode===q&&(m.mode=Q),P=A.next_out,le=A.output,w=A.avail_out,u=A.next_in,$=A.input,M=A.avail_in,E=m.hold,R=m.bits,te=M,Y=w,tr=c;e:for(;;)switch(m.mode){case S:if(m.wrap===0){m.mode=Q;break}for(;R<16;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(m.wrap&2&&E===35615){m.check=0,$e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0),E=0,R=0,m.mode=_;break}if(m.flags=0,m.head&&(m.head.done=!1),!(m.wrap&1)||(((E&255)<<8)+(E>>8))%31){A.msg="incorrect header check",m.mode=oe;break}if((E&15)!==y){A.msg="unknown compression method",m.mode=oe;break}if(E>>>=4,R-=4,Pe=(E&15)+8,m.wbits===0)m.wbits=Pe;else if(Pe>m.wbits){A.msg="invalid window size",m.mode=oe;break}m.dmax=1<<Pe,A.adler=m.check=1,m.mode=E&512?U:q,E=0,R=0;break;case _:for(;R<16;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(m.flags=E,(m.flags&255)!==y){A.msg="unknown compression method",m.mode=oe;break}if(m.flags&57344){A.msg="unknown header flags set",m.mode=oe;break}m.head&&(m.head.text=E>>8&1),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0,m.mode=k;case k:for(;R<32;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.head&&(m.head.time=E),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,$e[2]=E>>>16&255,$e[3]=E>>>24&255,m.check=t(m.check,$e,4,0)),E=0,R=0,m.mode=T;case T:for(;R<16;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.head&&(m.head.xflags=E&255,m.head.os=E>>8),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0,m.mode=I;case I:if(m.flags&1024){for(;R<16;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.length=E,m.head&&(m.head.extra_len=E),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0}else m.head&&(m.head.extra=null);m.mode=B;case B:if(m.flags&1024&&(J=m.length,J>M&&(J=M),J&&(m.head&&(Pe=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),e.arraySet(m.head.extra,$,u,J,Pe)),m.flags&512&&(m.check=t(m.check,$,J,u)),M-=J,u+=J,m.length-=J),m.length))break e;m.length=0,m.mode=O;case O:if(m.flags&2048){if(M===0)break e;J=0;do Pe=$[u+J++],m.head&&Pe&&m.length<65536&&(m.head.name+=String.fromCharCode(Pe));while(Pe&&J<M);if(m.flags&512&&(m.check=t(m.check,$,J,u)),M-=J,u+=J,Pe)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=z;case z:if(m.flags&4096){if(M===0)break e;J=0;do Pe=$[u+J++],m.head&&Pe&&m.length<65536&&(m.head.comment+=String.fromCharCode(Pe));while(Pe&&J<M);if(m.flags&512&&(m.check=t(m.check,$,J,u)),M-=J,u+=J,Pe)break e}else m.head&&(m.head.comment=null);m.mode=L;case L:if(m.flags&512){for(;R<16;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(E!==(m.check&65535)){A.msg="header crc mismatch",m.mode=oe;break}E=0,R=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),A.adler=m.check=0,m.mode=q;break;case U:for(;R<32;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}A.adler=m.check=Le(E),E=0,R=0,m.mode=H;case H:if(m.havedict===0)return A.next_out=P,A.avail_out=w,A.next_in=u,A.avail_in=M,m.hold=E,m.bits=R,g;A.adler=m.check=1,m.mode=q;case q:if(N===p||N===f)break e;case Q:if(m.last){E>>>=R&7,R-=R&7,m.mode=ae;break}for(;R<3;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}switch(m.last=E&1,E>>>=1,R-=1,E&3){case 0:m.mode=K;break;case 1:if(vr(m),m.mode=de,N===f){E>>>=2,R-=2;break e}break;case 2:m.mode=re;break;case 3:A.msg="invalid block type",m.mode=oe}E>>>=2,R-=2;break;case K:for(E>>>=R&7,R-=R&7;R<32;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if((E&65535)!==(E>>>16^65535)){A.msg="invalid stored block lengths",m.mode=oe;break}if(m.length=E&65535,E=0,R=0,m.mode=j,N===f)break e;case j:m.mode=G;case G:if(J=m.length,J){if(J>M&&(J=M),J>w&&(J=w),J===0)break e;e.arraySet(le,$,u,J,P),M-=J,u+=J,w-=J,P+=J,m.length-=J;break}m.mode=q;break;case re:for(;R<14;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(m.nlen=(E&31)+257,E>>>=5,R-=5,m.ndist=(E&31)+1,E>>>=5,R-=5,m.ncode=(E&15)+4,E>>>=4,R-=4,m.nlen>286||m.ndist>30){A.msg="too many length or distance symbols",m.mode=oe;break}m.have=0,m.mode=ve;case ve:for(;m.have<m.ncode;){for(;R<3;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.lens[wa[m.have++]]=E&7,E>>>=3,R-=3}for(;m.have<19;)m.lens[wa[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,yr={bits:m.lenbits},tr=l(a,m.lens,0,19,m.lencode,0,m.work,yr),m.lenbits=yr.bits,tr){A.msg="invalid code lengths set",m.mode=oe;break}m.have=0,m.mode=Ie;case Ie:for(;m.have<m.nlen+m.ndist;){for(;Te=m.lencode[E&(1<<m.lenbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(je<16)E>>>=he,R-=he,m.lens[m.have++]=je;else{if(je===16){for(gr=he+2;R<gr;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(E>>>=he,R-=he,m.have===0){A.msg="invalid bit length repeat",m.mode=oe;break}Pe=m.lens[m.have-1],J=3+(E&3),E>>>=2,R-=2}else if(je===17){for(gr=he+3;R<gr;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}E>>>=he,R-=he,Pe=0,J=3+(E&7),E>>>=3,R-=3}else{for(gr=he+7;R<gr;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}E>>>=he,R-=he,Pe=0,J=11+(E&127),E>>>=7,R-=7}if(m.have+J>m.nlen+m.ndist){A.msg="invalid bit length repeat",m.mode=oe;break}for(;J--;)m.lens[m.have++]=Pe}}if(m.mode===oe)break;if(m.lens[256]===0){A.msg="invalid code -- missing end-of-block",m.mode=oe;break}if(m.lenbits=9,yr={bits:m.lenbits},tr=l(i,m.lens,0,m.nlen,m.lencode,0,m.work,yr),m.lenbits=yr.bits,tr){A.msg="invalid literal/lengths set",m.mode=oe;break}if(m.distbits=6,m.distcode=m.distdyn,yr={bits:m.distbits},tr=l(o,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,yr),m.distbits=yr.bits,tr){A.msg="invalid distances set",m.mode=oe;break}if(m.mode=de,N===f)break e;case de:m.mode=De;case De:if(M>=6&&w>=258){A.next_out=P,A.avail_out=w,A.next_in=u,A.avail_in=M,m.hold=E,m.bits=R,n(A,Y),P=A.next_out,le=A.output,w=A.avail_out,u=A.next_in,$=A.input,M=A.avail_in,E=m.hold,R=m.bits,m.mode===q&&(m.back=-1);break}for(m.back=0;Te=m.lencode[E&(1<<m.lenbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(Oe&&(Oe&240)===0){for(Ye=he,xt=Oe,Dt=je;Te=m.lencode[Dt+((E&(1<<Ye+xt)-1)>>Ye)],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(Ye+he<=R);){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}E>>>=Ye,R-=Ye,m.back+=Ye}if(E>>>=he,R-=he,m.back+=he,m.length=je,Oe===0){m.mode=se;break}if(Oe&32){m.back=-1,m.mode=q;break}if(Oe&64){A.msg="invalid literal/length code",m.mode=oe;break}m.extra=Oe&15,m.mode=Se;case Se:if(m.extra){for(gr=m.extra;R<gr;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.length+=E&(1<<m.extra)-1,E>>>=m.extra,R-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=ge;case ge:for(;Te=m.distcode[E&(1<<m.distbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if((Oe&240)===0){for(Ye=he,xt=Oe,Dt=je;Te=m.distcode[Dt+((E&(1<<Ye+xt)-1)>>Ye)],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(Ye+he<=R);){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}E>>>=Ye,R-=Ye,m.back+=Ye}if(E>>>=he,R-=he,m.back+=he,Oe&64){A.msg="invalid distance code",m.mode=oe;break}m.offset=je,m.extra=Oe&15,m.mode=ce;case ce:if(m.extra){for(gr=m.extra;R<gr;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}m.offset+=E&(1<<m.extra)-1,E>>>=m.extra,R-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){A.msg="invalid distance too far back",m.mode=oe;break}m.mode=be;case be:if(w===0)break e;if(J=Y-w,m.offset>J){if(J=m.offset-J,J>m.whave&&m.sane){A.msg="invalid distance too far back",m.mode=oe;break}J>m.wnext?(J-=m.wnext,pe=m.wsize-J):pe=m.wnext-J,J>m.length&&(J=m.length),wr=m.window}else wr=le,pe=P-m.offset,J=m.length;J>w&&(J=w),w-=J,m.length-=J;do le[P++]=wr[pe++];while(--J);m.length===0&&(m.mode=De);break;case se:if(w===0)break e;le[P++]=m.length,w--,m.mode=De;break;case ae:if(m.wrap){for(;R<32;){if(M===0)break e;M--,E|=$[u++]<<R,R+=8}if(Y-=w,A.total_out+=Y,m.total+=Y,Y&&(A.adler=m.check=m.flags?t(m.check,le,Y,P-Y):r(m.check,le,Y,P-Y)),Y=w,(m.flags?E:Le(E))!==m.check){A.msg="incorrect data check",m.mode=oe;break}E=0,R=0}m.mode=ke;case ke:if(m.wrap&&m.flags){for(;R<32;){if(M===0)break e;M--,E+=$[u++]<<R,R+=8}if(E!==(m.total&4294967295)){A.msg="incorrect length check",m.mode=oe;break}E=0,R=0}m.mode=Ne;case Ne:tr=d;break e;case oe:tr=D;break e;case Ee:return C;case Ge:default:return v}return A.next_out=P,A.avail_out=w,A.next_in=u,A.avail_in=M,m.hold=E,m.bits=R,(m.wsize||Y!==A.avail_out&&m.mode<oe&&(m.mode<ae||N!==s))&&Wr(A,A.output,A.next_out,Y-A.avail_out),te-=A.avail_in,Y-=A.avail_out,A.total_in+=te,A.total_out+=Y,m.total+=Y,m.wrap&&Y&&(A.adler=m.check=m.flags?t(m.check,le,Y,A.next_out-Y):r(m.check,le,Y,A.next_out-Y)),A.data_type=m.bits+(m.last?64:0)+(m.mode===q?128:0)+(m.mode===de||m.mode===j?256:0),(te===0&&Y===0||N===s)&&tr===c&&(tr=b),tr}function W(A){if(!A||!A.state)return v;var N=A.state;return N.window&&(N.window=null),A.state=null,c}function V(A,N){var m;return!A||!A.state||(m=A.state,(m.wrap&2)===0)?v:(m.head=N,N.done=!1,c)}function X(A,N){var m=N.length,$,le,u;return!A||!A.state||($=A.state,$.wrap!==0&&$.mode!==H)?v:$.mode===H&&(le=1,le=r(le,N,m,0),le!==$.check)?D:(u=Wr(A,N,m,m),u?($.mode=Ee,C):($.havedict=1,c))}return ar.inflateReset=rr,ar.inflateReset2=Hr,ar.inflateResetKeep=Dr,ar.inflateInit=lr,ar.inflateInit2=Cr,ar.inflate=x,ar.inflateEnd=W,ar.inflateGetHeader=V,ar.inflateSetDictionary=X,ar.inflateInfo="pako inflate (from Nodeca project)",ar}var Dn,Si;function Dl(){return Si||(Si=1,Dn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Dn}var Cn,_i;function Ag(){if(_i)return Cn;_i=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Cn=e,Cn}var Ii;function kg(){if(Ii)return qr;Ii=1;var e=Eg(),r=Tr(),t=yl(),n=Dl(),l=ma(),a=xl(),i=Ag(),o=Object.prototype.toString;function s(c){if(!(this instanceof s))return new s(c);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},c||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(c&&c.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15)===0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,d.windowBits);if(g!==n.Z_OK)throw new Error(l[g]);if(this.header=new i,e.inflateGetHeader(this.strm,this.header),d.dictionary&&(typeof d.dictionary=="string"?d.dictionary=t.string2buf(d.dictionary):o.call(d.dictionary)==="[object ArrayBuffer]"&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(g=e.inflateSetDictionary(this.strm,d.dictionary),g!==n.Z_OK)))throw new Error(l[g])}s.prototype.push=function(c,d){var g=this.strm,v=this.options.chunkSize,D=this.options.dictionary,C,b,y,S,_,k=!1;if(this.ended)return!1;b=d===~~d?d:d===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof c=="string"?g.input=t.binstring2buf(c):o.call(c)==="[object ArrayBuffer]"?g.input=new Uint8Array(c):g.input=c,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new r.Buf8(v),g.next_out=0,g.avail_out=v),C=e.inflate(g,n.Z_NO_FLUSH),C===n.Z_NEED_DICT&&D&&(C=e.inflateSetDictionary(this.strm,D)),C===n.Z_BUF_ERROR&&k===!0&&(C=n.Z_OK,k=!1),C!==n.Z_STREAM_END&&C!==n.Z_OK)return this.onEnd(C),this.ended=!0,!1;g.next_out&&(g.avail_out===0||C===n.Z_STREAM_END||g.avail_in===0&&(b===n.Z_FINISH||b===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(y=t.utf8border(g.output,g.next_out),S=g.next_out-y,_=t.buf2string(g.output,y),g.next_out=S,g.avail_out=v-S,S&&r.arraySet(g.output,g.output,y,S,0),this.onData(_)):this.onData(r.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&C!==n.Z_STREAM_END);return C===n.Z_STREAM_END&&(b=n.Z_FINISH),b===n.Z_FINISH?(C=e.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===n.Z_OK):(b===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),g.avail_out=0),!0)},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function p(c,d){var g=new s(d);if(g.push(c,!0),g.err)throw g.msg||l[g.err];return g.result}function f(c,d){return d=d||{},d.raw=!0,p(c,d)}return qr.Inflate=s,qr.inflate=p,qr.inflateRaw=f,qr.ungzip=p,qr}var Sn,Ei;function Tg(){if(Ei)return Sn;Ei=1;var e=Tr().assign,r=Sg(),t=kg(),n=Dl(),l={};return e(l,r,t,n),Sn=l,Sn}(function(e){(function(){var r={},t;e.exports=r,typeof xg=="function"?t=Tg():t=window.pako,function(n,l){n.toRGBA8=function(a){var i=a.width,o=a.height;if(a.tabs.acTL==null)return[n.toRGBA8.decodeImage(a.data,i,o,a).buffer];var s=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var p,f=new Uint8Array(i*o*4),c=0;c<a.frames.length;c++){var d=a.frames[c],g=d.rect.x,v=d.rect.y,D=d.rect.width,C=d.rect.height,b=n.toRGBA8.decodeImage(d.data,D,C,a);if(c==0?p=b:d.blend==0?n._copyTile(b,D,C,p,i,o,g,v,0):d.blend==1&&n._copyTile(b,D,C,p,i,o,g,v,1),s.push(p.buffer),p=p.slice(0),d.dispose!=0){if(d.dispose==1)n._copyTile(f,D,C,p,i,o,g,v,0);else if(d.dispose==2){for(var y=c-1;a.frames[y].dispose==2;)y--;p=new Uint8Array(s[y]).slice(0)}}}return s},n.toRGBA8.decodeImage=function(a,i,o,s){var p=i*o,f=n.decode._getBPP(s),c=Math.ceil(i*f/8),d=new Uint8Array(p*4),g=new Uint32Array(d.buffer),v=s.ctype,D=s.depth,C=n._bin.readUshort;if(v==6){var b=p<<2;if(D==8)for(var y=0;y<b;y++)d[y]=a[y];if(D==16)for(var y=0;y<b;y++)d[y]=a[y<<1]}else if(v==2){var S=s.tabs.tRNS,_=-1,k=-1,T=-1;if(S&&(_=S[0],k=S[1],T=S[2]),D==8)for(var y=0;y<p;y++){var I=y<<2,B=y*3;d[I]=a[B],d[I+1]=a[B+1],d[I+2]=a[B+2],d[I+3]=255,_!=-1&&a[B]==_&&a[B+1]==k&&a[B+2]==T&&(d[I+3]=0)}if(D==16)for(var y=0;y<p;y++){var I=y<<2,B=y*6;d[I]=a[B],d[I+1]=a[B+2],d[I+2]=a[B+4],d[I+3]=255,_!=-1&&C(a,B)==_&&C(a,B+2)==k&&C(a,B+4)==T&&(d[I+3]=0)}}else if(v==3){var O=s.tabs.PLTE,z=s.tabs.tRNS,L=z?z.length:0;if(D==1)for(var U=0;U<o;U++)for(var H=U*c,q=U*i,y=0;y<i;y++){var I=q+y<<2,Q=a[H+(y>>3)]>>7-((y&7)<<0)&1,K=3*Q;d[I]=O[K],d[I+1]=O[K+1],d[I+2]=O[K+2],d[I+3]=Q<L?z[Q]:255}if(D==2)for(var U=0;U<o;U++)for(var H=U*c,q=U*i,y=0;y<i;y++){var I=q+y<<2,Q=a[H+(y>>2)]>>6-((y&3)<<1)&3,K=3*Q;d[I]=O[K],d[I+1]=O[K+1],d[I+2]=O[K+2],d[I+3]=Q<L?z[Q]:255}if(D==4)for(var U=0;U<o;U++)for(var H=U*c,q=U*i,y=0;y<i;y++){var I=q+y<<2,Q=a[H+(y>>1)]>>4-((y&1)<<2)&15,K=3*Q;d[I]=O[K],d[I+1]=O[K+1],d[I+2]=O[K+2],d[I+3]=Q<L?z[Q]:255}if(D==8)for(var y=0;y<p;y++){var I=y<<2,Q=a[y],K=3*Q;d[I]=O[K],d[I+1]=O[K+1],d[I+2]=O[K+2],d[I+3]=Q<L?z[Q]:255}}else if(v==4){if(D==8)for(var y=0;y<p;y++){var I=y<<2,j=y<<1,G=a[j];d[I]=G,d[I+1]=G,d[I+2]=G,d[I+3]=a[j+1]}if(D==16)for(var y=0;y<p;y++){var I=y<<2,j=y<<2,G=a[j];d[I]=G,d[I+1]=G,d[I+2]=G,d[I+3]=a[j+2]}}else if(v==0){var _=s.tabs.tRNS?s.tabs.tRNS:-1;if(D==1)for(var y=0;y<p;y++){var G=255*(a[y>>3]>>7-(y&7)&1),re=G==_*255?0:255;g[y]=re<<24|G<<16|G<<8|G}if(D==2)for(var y=0;y<p;y++){var G=85*(a[y>>2]>>6-((y&3)<<1)&3),re=G==_*85?0:255;g[y]=re<<24|G<<16|G<<8|G}if(D==4)for(var y=0;y<p;y++){var G=17*(a[y>>1]>>4-((y&1)<<2)&15),re=G==_*17?0:255;g[y]=re<<24|G<<16|G<<8|G}if(D==8)for(var y=0;y<p;y++){var G=a[y],re=G==_?0:255;g[y]=re<<24|G<<16|G<<8|G}if(D==16)for(var y=0;y<p;y++){var G=a[y<<1],re=C(a,y<<1)==_?0:255;g[y]=re<<24|G<<16|G<<8|G}}return d},n.decode=function(a){for(var i=new Uint8Array(a),o=8,s=n._bin,p=s.readUshort,f=s.readUint,c={tabs:{},frames:[]},d=new Uint8Array(i.length),g=0,v,D=0,C=[137,80,78,71,13,10,26,10],b=0;b<8;b++)if(i[b]!=C[b])throw"The input is not a PNG file!";for(;o<i.length;){var y=s.readUint(i,o);o+=4;var S=s.readASCII(i,o,4);if(o+=4,S=="IHDR")n.decode._IHDR(i,o,c);else if(S=="IDAT"){for(var b=0;b<y;b++)d[g+b]=i[o+b];g+=y}else if(S=="acTL")c.tabs[S]={num_frames:f(i,o),num_plays:f(i,o+4)},v=new Uint8Array(i.length);else if(S=="fcTL"){if(D!=0){var _=c.frames[c.frames.length-1];_.data=n.decode._decompress(c,v.slice(0,D),_.rect.width,_.rect.height),D=0}var k={x:f(i,o+12),y:f(i,o+16),width:f(i,o+4),height:f(i,o+8)},T=p(i,o+22);T=p(i,o+20)/(T==0?100:T);var I={rect:k,delay:Math.round(T*1e3),dispose:i[o+24],blend:i[o+25]};c.frames.push(I)}else if(S=="fdAT"){for(var b=0;b<y-4;b++)v[D+b]=i[o+b+4];D+=y-4}else if(S=="pHYs")c.tabs[S]=[s.readUint(i,o),s.readUint(i,o+4),i[o+8]];else if(S=="cHRM"){c.tabs[S]=[];for(var b=0;b<8;b++)c.tabs[S].push(s.readUint(i,o+b*4))}else if(S=="tEXt"){c.tabs[S]==null&&(c.tabs[S]={});var B=s.nextZero(i,o),O=s.readASCII(i,o,B-o),z=s.readASCII(i,B+1,o+y-B-1);c.tabs[S][O]=z}else if(S=="iTXt"){c.tabs[S]==null&&(c.tabs[S]={});var B=0,L=o;B=s.nextZero(i,L);var O=s.readASCII(i,L,B-L);L=B+1,i[L],i[L+1],L+=2,B=s.nextZero(i,L),s.readASCII(i,L,B-L),L=B+1,B=s.nextZero(i,L),s.readUTF8(i,L,B-L),L=B+1;var z=s.readUTF8(i,L,y-(L-o));c.tabs[S][O]=z}else if(S=="PLTE")c.tabs[S]=s.readBytes(i,o,y);else if(S=="hIST"){var U=c.tabs.PLTE.length/3;c.tabs[S]=[];for(var b=0;b<U;b++)c.tabs[S].push(p(i,o+b*2))}else if(S=="tRNS")c.ctype==3?c.tabs[S]=s.readBytes(i,o,y):c.ctype==0?c.tabs[S]=p(i,o):c.ctype==2&&(c.tabs[S]=[p(i,o),p(i,o+2),p(i,o+4)]);else if(S=="gAMA")c.tabs[S]=s.readUint(i,o)/1e5;else if(S=="sRGB")c.tabs[S]=i[o];else if(S=="bKGD")c.ctype==0||c.ctype==4?c.tabs[S]=[p(i,o)]:c.ctype==2||c.ctype==6?c.tabs[S]=[p(i,o),p(i,o+2),p(i,o+4)]:c.ctype==3&&(c.tabs[S]=i[o]);else if(S=="IEND"){if(D!=0){var _=c.frames[c.frames.length-1];_.data=n.decode._decompress(c,v.slice(0,D),_.rect.width,_.rect.height),D=0}c.data=n.decode._decompress(c,d,c.width,c.height);break}o+=y,s.readUint(i,o),o+=4}return delete c.compress,delete c.interlace,delete c.filter,c},n.decode._decompress=function(a,i,o,s){return a.compress==0&&(i=n.decode._inflate(i)),a.interlace==0?i=n.decode._filterZero(i,a,0,o,s):a.interlace==1&&(i=n.decode._readInterlace(i,a)),i},n.decode._inflate=function(a){return l.inflate(a)},n.decode._readInterlace=function(a,i){for(var o=i.width,s=i.height,p=n.decode._getBPP(i),f=p>>3,c=Math.ceil(o*p/8),d=new Uint8Array(s*c),g=0,v=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1],y=0;y<7;){for(var S=C[y],_=b[y],k=0,T=0,I=v[y];I<s;)I+=S,T++;for(var B=D[y];B<o;)B+=_,k++;var O=Math.ceil(k*p/8);n.decode._filterZero(a,i,g,k,T);for(var z=0,L=v[y];L<s;){for(var U=D[y],H=g+z*O<<3;U<o;){if(p==1){var q=a[H>>3];q=q>>7-(H&7)&1,d[L*c+(U>>3)]|=q<<7-((U&3)<<0)}if(p==2){var q=a[H>>3];q=q>>6-(H&7)&3,d[L*c+(U>>2)]|=q<<6-((U&3)<<1)}if(p==4){var q=a[H>>3];q=q>>4-(H&7)&15,d[L*c+(U>>1)]|=q<<4-((U&1)<<2)}if(p>=8)for(var Q=L*c+U*f,K=0;K<f;K++)d[Q+K]=a[(H>>3)+K];H+=p,U+=_}z++,L+=S}k*T!=0&&(g+=T*(1+O)),y=y+1}return d},n.decode._getBPP=function(a){var i=[1,null,3,1,2,null,4][a.ctype];return i*a.depth},n.decode._filterZero=function(a,i,o,s,p){var f=n.decode._getBPP(i),c=Math.ceil(s*f/8),d=n.decode._paeth;f=Math.ceil(f/8);for(var g=0;g<p;g++){var v=o+g*c,D=v+g+1,C=a[D-1];if(C==0)for(var b=0;b<c;b++)a[v+b]=a[D+b];else if(C==1){for(var b=0;b<f;b++)a[v+b]=a[D+b];for(var b=f;b<c;b++)a[v+b]=a[D+b]+a[v+b-f]&255}else if(g==0){for(var b=0;b<f;b++)a[v+b]=a[D+b];if(C==2)for(var b=f;b<c;b++)a[v+b]=a[D+b]&255;if(C==3)for(var b=f;b<c;b++)a[v+b]=a[D+b]+(a[v+b-f]>>1)&255;if(C==4)for(var b=f;b<c;b++)a[v+b]=a[D+b]+d(a[v+b-f],0,0)&255}else{if(C==2)for(var b=0;b<c;b++)a[v+b]=a[D+b]+a[v+b-c]&255;if(C==3){for(var b=0;b<f;b++)a[v+b]=a[D+b]+(a[v+b-c]>>1)&255;for(var b=f;b<c;b++)a[v+b]=a[D+b]+(a[v+b-c]+a[v+b-f]>>1)&255}if(C==4){for(var b=0;b<f;b++)a[v+b]=a[D+b]+d(0,a[v+b-c],0)&255;for(var b=f;b<c;b++)a[v+b]=a[D+b]+d(a[v+b-f],a[v+b-c],a[v+b-f-c])&255}}}return a},n.decode._paeth=function(a,i,o){var s=a+i-o,p=Math.abs(s-a),f=Math.abs(s-i),c=Math.abs(s-o);return p<=f&&p<=c?a:f<=c?i:o},n.decode._IHDR=function(a,i,o){var s=n._bin;o.width=s.readUint(a,i),i+=4,o.height=s.readUint(a,i),i+=4,o.depth=a[i],i++,o.ctype=a[i],i++,o.compress=a[i],i++,o.filter=a[i],i++,o.interlace=a[i],i++},n._bin={nextZero:function(a,i){for(;a[i]!=0;)i++;return i},readUshort:function(a,i){return a[i]<<8|a[i+1]},writeUshort:function(a,i,o){a[i]=o>>8&255,a[i+1]=o&255},readUint:function(a,i){return a[i]*(256*256*256)+(a[i+1]<<16|a[i+2]<<8|a[i+3])},writeUint:function(a,i,o){a[i]=o>>24&255,a[i+1]=o>>16&255,a[i+2]=o>>8&255,a[i+3]=o&255},readASCII:function(a,i,o){for(var s="",p=0;p<o;p++)s+=String.fromCharCode(a[i+p]);return s},writeASCII:function(a,i,o){for(var s=0;s<o.length;s++)a[i+s]=o.charCodeAt(s)},readBytes:function(a,i,o){for(var s=[],p=0;p<o;p++)s.push(a[i+p]);return s},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,i,o){for(var s="",p,f=0;f<o;f++)s+="%"+n._bin.pad(a[i+f].toString(16));try{p=decodeURIComponent(s)}catch{return n._bin.readASCII(a,i,o)}return p}},n._copyTile=function(a,i,o,s,p,f,c,d,g){for(var v=Math.min(i,p),D=Math.min(o,f),C=0,b=0,y=0;y<D;y++)for(var S=0;S<v;S++)if(c>=0&&d>=0?(C=y*i+S<<2,b=(d+y)*p+c+S<<2):(C=(-d+y)*i-c+S<<2,b=y*p+S<<2),g==0)s[b]=a[C],s[b+1]=a[C+1],s[b+2]=a[C+2],s[b+3]=a[C+3];else if(g==1){var _=a[C+3]*.00392156862745098,k=a[C]*_,T=a[C+1]*_,I=a[C+2]*_,B=s[b+3]*(1/255),O=s[b]*B,z=s[b+1]*B,L=s[b+2]*B,U=1-_,H=_+B*U,q=H==0?0:1/H;s[b+3]=255*H,s[b+0]=(k+O*U)*q,s[b+1]=(T+z*U)*q,s[b+2]=(I+L*U)*q}else if(g==2){var _=a[C+3],k=a[C],T=a[C+1],I=a[C+2],B=s[b+3],O=s[b],z=s[b+1],L=s[b+2];_==B&&k==O&&T==z&&I==L?(s[b]=0,s[b+1]=0,s[b+2]=0,s[b+3]=0):(s[b]=k,s[b+1]=T,s[b+2]=I,s[b+3]=_)}else if(g==3){var _=a[C+3],k=a[C],T=a[C+1],I=a[C+2],B=s[b+3],O=s[b],z=s[b+1],L=s[b+2];if(_==B&&k==O&&T==z&&I==L)continue;if(_<220&&B>20)return!1}return!0},n.encode=function(a,i,o,s,p,f){s==null&&(s=0),f==null&&(f=!1);for(var c=new Uint8Array(a[0].byteLength*a.length+100),d=[137,80,78,71,13,10,26,10],g=0;g<8;g++)c[g]=d[g];var v=8,D=n._bin,C=n.crc.crc,b=D.writeUint,y=D.writeUshort,S=D.writeASCII,_=n.encode.compressPNG(a,i,o,s,f);b(c,v,13),v+=4,S(c,v,"IHDR"),v+=4,b(c,v,i),v+=4,b(c,v,o),v+=4,c[v]=_.depth,v++,c[v]=_.ctype,v++,c[v]=0,v++,c[v]=0,v++,c[v]=0,v++,b(c,v,C(c,v-17,17)),v+=4,b(c,v,1),v+=4,S(c,v,"sRGB"),v+=4,c[v]=1,v++,b(c,v,C(c,v-5,5)),v+=4;var k=a.length>1;if(k&&(b(c,v,8),v+=4,S(c,v,"acTL"),v+=4,b(c,v,a.length),v+=4,b(c,v,0),v+=4,b(c,v,C(c,v-12,12)),v+=4),_.ctype==3){var T=_.plte.length;b(c,v,T*3),v+=4,S(c,v,"PLTE"),v+=4;for(var g=0;g<T;g++){var I=g*3,B=_.plte[g],O=B&255,z=B>>8&255,L=B>>16&255;c[v+I+0]=O,c[v+I+1]=z,c[v+I+2]=L}if(v+=T*3,b(c,v,C(c,v-T*3-4,T*3+4)),v+=4,_.gotAlpha){b(c,v,T),v+=4,S(c,v,"tRNS"),v+=4;for(var g=0;g<T;g++)c[v+g]=_.plte[g]>>24&255;v+=T,b(c,v,C(c,v-T-4,T+4)),v+=4}}for(var U=0,H=0;H<_.frames.length;H++){var q=_.frames[H];k&&(b(c,v,26),v+=4,S(c,v,"fcTL"),v+=4,b(c,v,U++),v+=4,b(c,v,q.rect.width),v+=4,b(c,v,q.rect.height),v+=4,b(c,v,q.rect.x),v+=4,b(c,v,q.rect.y),v+=4,y(c,v,p[H]),v+=2,y(c,v,1e3),v+=2,c[v]=q.dispose,v++,c[v]=q.blend,v++,b(c,v,C(c,v-30,30)),v+=4);var Q=q.cimg,T=Q.length;b(c,v,T+(H==0?0:4)),v+=4;var K=v;S(c,v,H==0?"IDAT":"fdAT"),v+=4,H!=0&&(b(c,v,U++),v+=4);for(var g=0;g<T;g++)c[v+g]=Q[g];v+=T,b(c,v,C(c,K,v-K)),v+=4}return b(c,v,0),v+=4,S(c,v,"IEND"),v+=4,b(c,v,C(c,v-4,4)),v+=4,c.buffer.slice(0,v)},n.encode.compressPNG=function(a,i,o,s,p){for(var f=n.encode.compress(a,i,o,s,!1,p),c=0;c<a.length;c++){var d=f.frames[c];d.rect.width;var g=d.rect.height,v=d.bpl,D=d.bpp,C=new Uint8Array(g*v+g);d.cimg=n.encode._filterZero(d.img,g,D,v,C)}return f},n.encode.compress=function(a,i,o,s,p,f){f==null&&(f=!1);for(var c=6,d=8,g=4,v=255,D=0;D<a.length;D++)for(var C=new Uint8Array(a[D]),b=C.length,y=0;y<b;y+=4)v&=C[y+3];var S=v!=255,_={},k=[];if(a.length!=0&&(_[0]=0,k.push(0),s!=0&&s--),s!=0){var T=n.quantize(a,s,p);a=T.bufs;for(var y=0;y<T.plte.length;y++){var I=T.plte[y].est.rgba;_[I]==null&&(_[I]=k.length,k.push(I))}}else for(var D=0;D<a.length;D++)for(var B=new Uint32Array(a[D]),b=B.length,y=0;y<b;y++){var I=B[y];if((y<i||I!=B[y-1]&&I!=B[y-i])&&_[I]==null&&(_[I]=k.length,k.push(I),k.length>=300))break}var O=S?p:!1,z=k.length;z<=256&&f==!1&&(z<=2?d=1:z<=4?d=2:z<=16?d=4:d=8,p&&(d=8),S=!0);for(var L=[],D=0;D<a.length;D++){var U=new Uint8Array(a[D]),H=new Uint32Array(U.buffer),q=0,Q=0,K=i,j=o,G=0;if(D!=0&&!O){for(var re=p||D==1||L[L.length-2].dispose==2?1:2,ve=0,Ie=1e9,de=0;de<re;de++){for(var Ne=new Uint8Array(a[D-1-de]),De=new Uint32Array(a[D-1-de]),Se=i,ge=o,ce=-1,be=-1,se=0;se<o;se++)for(var ae=0;ae<i;ae++){var y=se*i+ae;H[y]!=De[y]&&(ae<Se&&(Se=ae),ae>ce&&(ce=ae),se<ge&&(ge=se),se>be&&(be=se))}var ke=ce==-1?1:(ce-Se+1)*(be-ge+1);ke<Ie&&(Ie=ke,ve=de,ce==-1?(q=Q=0,K=j=1):(q=Se,Q=ge,K=ce-Se+1,j=be-ge+1))}var Ne=new Uint8Array(a[D-1-ve]);ve==1&&(L[L.length-1].dispose=2);var oe=new Uint8Array(K*j*4);new Uint32Array(oe.buffer),n._copyTile(Ne,i,o,oe,K,j,-q,-Q,0),n._copyTile(U,i,o,oe,K,j,-q,-Q,3)?(n._copyTile(U,i,o,oe,K,j,-q,-Q,2),G=1):(n._copyTile(U,i,o,oe,K,j,-q,-Q,0),G=0),U=oe,H=new Uint32Array(U.buffer)}var Ee=4*K;if(z<=256&&f==!1){Ee=Math.ceil(d*K/8);for(var oe=new Uint8Array(Ee*j),se=0;se<j;se++){var y=se*Ee,Ge=se*K;if(d==8)for(var ae=0;ae<K;ae++)oe[y+ae]=_[H[Ge+ae]];else if(d==4)for(var ae=0;ae<K;ae++)oe[y+(ae>>1)]|=_[H[Ge+ae]]<<4-(ae&1)*4;else if(d==2)for(var ae=0;ae<K;ae++)oe[y+(ae>>2)]|=_[H[Ge+ae]]<<6-(ae&3)*2;else if(d==1)for(var ae=0;ae<K;ae++)oe[y+(ae>>3)]|=_[H[Ge+ae]]<<7-(ae&7)*1}U=oe,c=3,g=1}else if(S==!1&&a.length==1){for(var oe=new Uint8Array(K*j*3),We=K*j,y=0;y<We;y++){var Re=y*3,ye=y*4;oe[Re]=U[ye],oe[Re+1]=U[ye+1],oe[Re+2]=U[ye+2]}U=oe,c=2,g=3,Ee=3*K}L.push({rect:{x:q,y:Q,width:K,height:j},img:U,bpl:Ee,bpp:g,blend:G,dispose:O?1:0})}return{ctype:c,depth:d,plte:k,gotAlpha:S,frames:L}},n.encode._filterZero=function(a,i,o,s,p){for(var f=[],c=0;c<5;c++)if(!(i*s>5e5&&(c==2||c==3||c==4))){for(var d=0;d<i;d++)n.encode._filterLine(p,a,d,s,o,c);if(f.push(l.deflate(p)),o==1)break}for(var g,v=1e9,D=0;D<f.length;D++)f[D].length<v&&(g=D,v=f[D].length);return f[g]},n.encode._filterLine=function(a,i,o,s,p,f){var c=o*s,d=c+o,g=n.decode._paeth;if(a[d]=f,d++,f==0)for(var v=0;v<s;v++)a[d+v]=i[c+v];else if(f==1){for(var v=0;v<p;v++)a[d+v]=i[c+v];for(var v=p;v<s;v++)a[d+v]=i[c+v]-i[c+v-p]+256&255}else if(o==0){for(var v=0;v<p;v++)a[d+v]=i[c+v];if(f==2)for(var v=p;v<s;v++)a[d+v]=i[c+v];if(f==3)for(var v=p;v<s;v++)a[d+v]=i[c+v]-(i[c+v-p]>>1)+256&255;if(f==4)for(var v=p;v<s;v++)a[d+v]=i[c+v]-g(i[c+v-p],0,0)+256&255}else{if(f==2)for(var v=0;v<s;v++)a[d+v]=i[c+v]+256-i[c+v-s]&255;if(f==3){for(var v=0;v<p;v++)a[d+v]=i[c+v]+256-(i[c+v-s]>>1)&255;for(var v=p;v<s;v++)a[d+v]=i[c+v]+256-(i[c+v-s]+i[c+v-p]>>1)&255}if(f==4){for(var v=0;v<p;v++)a[d+v]=i[c+v]+256-g(0,i[c+v-s],0)&255;for(var v=p;v<s;v++)a[d+v]=i[c+v]+256-g(i[c+v-p],i[c+v-s],i[c+v-p-s])&255}}},n.crc={table:function(){for(var a=new Uint32Array(256),i=0;i<256;i++){for(var o=i,s=0;s<8;s++)o&1?o=3988292384^o>>>1:o=o>>>1;a[i]=o}return a}(),update:function(a,i,o,s){for(var p=0;p<s;p++)a=n.crc.table[(a^i[o+p])&255]^a>>>8;return a},crc:function(a,i,o){return n.crc.update(4294967295,a,i,o)^4294967295}},n.quantize=function(a,i,o){for(var s=[],p=0,f=0;f<a.length;f++)s.push(n.encode.alphaMul(new Uint8Array(a[f]),o)),p+=a[f].byteLength;for(var c=new Uint8Array(p),d=new Uint32Array(c.buffer),g=0,f=0;f<s.length;f++){for(var v=s[f],D=v.length,C=0;C<D;C++)c[g+C]=v[C];g+=D}var b={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};b.bst=n.quantize.stats(c,b.i0,b.i1),b.est=n.quantize.estats(b.bst);for(var y=[b];y.length<i;){for(var S=0,_=0,f=0;f<y.length;f++)y[f].est.L>S&&(S=y[f].est.L,_=f);if(S<.001)break;var k=y[_],T=n.quantize.splitPixels(c,d,k.i0,k.i1,k.est.e,k.est.eMq255),I={i0:k.i0,i1:T,bst:null,est:null,tdst:0,left:null,right:null};I.bst=n.quantize.stats(c,I.i0,I.i1),I.est=n.quantize.estats(I.bst);var B={i0:T,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};B.bst={R:[],m:[],N:k.bst.N-I.bst.N};for(var f=0;f<16;f++)B.bst.R[f]=k.bst.R[f]-I.bst.R[f];for(var f=0;f<4;f++)B.bst.m[f]=k.bst.m[f]-I.bst.m[f];B.est=n.quantize.estats(B.bst),k.left=I,k.right=B,y[_]=I,y.push(B)}y.sort(function(re,ve){return ve.bst.N-re.bst.N});for(var O=0;O<s.length;O++){for(var z=n.quantize.planeDst,L=new Uint8Array(s[O].buffer),U=new Uint32Array(s[O].buffer),H=L.length,f=0;f<H;f+=4){for(var q=L[f]*.00392156862745098,Q=L[f+1]*(1/255),K=L[f+2]*(1/255),j=L[f+3]*(1/255),G=b;G.left;)G=z(G.est,q,Q,K,j)<=0?G.left:G.right;U[f>>2]=G.est.rgba}s[O]=U.buffer}return{bufs:s,plte:y}},n.quantize.getNearest=function(a,i,o,s,p){if(a.left==null)return a.tdst=n.quantize.dist(a.est.q,i,o,s,p),a;var f=n.quantize.planeDst(a.est,i,o,s,p),c=a.left,d=a.right;f>0&&(c=a.right,d=a.left);var g=n.quantize.getNearest(c,i,o,s,p);if(g.tdst<=f*f)return g;var v=n.quantize.getNearest(d,i,o,s,p);return v.tdst<g.tdst?v:g},n.quantize.planeDst=function(a,i,o,s,p){var f=a.e;return f[0]*i+f[1]*o+f[2]*s+f[3]*p-a.eMq},n.quantize.dist=function(a,i,o,s,p){var f=i-a[0],c=o-a[1],d=s-a[2],g=p-a[3];return f*f+c*c+d*d+g*g},n.quantize.splitPixels=function(a,i,o,s,p,f){var c=n.quantize.vecDot;for(s-=4;o<s;){for(;c(a,o,p)<=f;)o+=4;for(;c(a,s,p)>f;)s-=4;if(o>=s)break;var d=i[o>>2];i[o>>2]=i[s>>2],i[s>>2]=d,o+=4,s-=4}for(;c(a,o,p)>f;)o-=4;return o+4},n.quantize.vecDot=function(a,i,o){return a[i]*o[0]+a[i+1]*o[1]+a[i+2]*o[2]+a[i+3]*o[3]},n.quantize.stats=function(a,i,o){for(var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=[0,0,0,0],f=o-i>>2,c=i;c<o;c+=4){var d=a[c]*.00392156862745098,g=a[c+1]*(1/255),v=a[c+2]*(1/255),D=a[c+3]*(1/255);p[0]+=d,p[1]+=g,p[2]+=v,p[3]+=D,s[0]+=d*d,s[1]+=d*g,s[2]+=d*v,s[3]+=d*D,s[5]+=g*g,s[6]+=g*v,s[7]+=g*D,s[10]+=v*v,s[11]+=v*D,s[15]+=D*D}return s[4]=s[1],s[8]=s[2],s[12]=s[3],s[9]=s[6],s[13]=s[7],s[14]=s[11],{R:s,m:p,N:f}},n.quantize.estats=function(a){var i=a.R,o=a.m,s=a.N,p=o[0],f=o[1],c=o[2],d=o[3],g=s==0?0:1/s,v=[i[0]-p*p*g,i[1]-p*f*g,i[2]-p*c*g,i[3]-p*d*g,i[4]-f*p*g,i[5]-f*f*g,i[6]-f*c*g,i[7]-f*d*g,i[8]-c*p*g,i[9]-c*f*g,i[10]-c*c*g,i[11]-c*d*g,i[12]-d*p*g,i[13]-d*f*g,i[14]-d*c*g,i[15]-d*d*g],D=v,C=n.M4,b=[.5,.5,.5,.5],y=0,S=0;if(s!=0)for(var _=0;_<10&&(b=C.multVec(D,b),S=Math.sqrt(C.dot(b,b)),b=C.sml(1/S,b),!(Math.abs(S-y)<1e-9));_++)y=S;var k=[p*g,f*g,c*g,d*g],T=C.dot(C.sml(255,k),b),I=k[3]<.001?0:1/k[3];return{Cov:v,q:k,e:b,L:y,eMq255:T,eMq:C.dot(b,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2]*I)<<16|Math.round(255*k[1]*I)<<8|Math.round(255*k[0]*I)<<0)>>>0}},n.M4={multVec:function(a,i){return[a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3],a[4]*i[0]+a[5]*i[1]+a[6]*i[2]+a[7]*i[3],a[8]*i[0]+a[9]*i[1]+a[10]*i[2]+a[11]*i[3],a[12]*i[0]+a[13]*i[1]+a[14]*i[2]+a[15]*i[3]]},dot:function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},sml:function(a,i){return[a*i[0],a*i[1],a*i[2],a*i[3]]}},n.encode.alphaMul=function(a,i){for(var o=new Uint8Array(a.length),s=a.length>>2,p=0;p<s;p++){var f=p<<2,c=a[f+3];i&&(c=c<128?0:255);var d=c*(1/255);o[f+0]=a[f+0]*d,o[f+1]=a[f+1]*d,o[f+2]=a[f+2]*d,o[f+3]=c}return o}}(r,t)})()})(ha);function Rg(){const{setLoadingMsg:e}=Be(),{activeModel:r}=_e(),{screenshot:t}=F,n=async o=>{o.stopPropagation();const s=t.getFrame(),p=yg(s);navigator.clipboard.write([new ClipboardItem({"image/png":p})])},l=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation..."),setTimeout(()=>e(""),2e3);return}e("Creating zip...");const s=t.settings.fileName||"frames",p=await Gi(o,s);e("Finished"),xr.exports.saveAs(p,`${s}.zip`),setTimeout(()=>e(""),1e3)})},a=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{var d,g;const o=t.getAllFrames(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating gif from ${o.length} frames...`);const{frameRate:s}=t.settings,{makeGif:p}=await Gt(()=>import("./index.e58f6bb8.js"),[]),f=await p({frames:o,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/s)});e("Finished");const c=(g=(d=r.userData.name)!=null?d:r.id)!=null?g:"ani";xr.exports.saveAs(f,`${c}.gif`),setTimeout(()=>e(""),1e3)})},i=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{var C,b;const o=t.getAllFramesAsArrayBuffer(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating apng from ${o.length} frames...`);const{frameRate:s}=t.settings,p=Math.ceil(1e3/s),f=Array(o.length-1).fill(p),{width:c,height:d}=F.viewport,g=ha.exports.encode(o,c,d,0,f),v=new Blob([g],{type:"image/apng"});e("Finished");const D=(b=(C=r.userData.name)!=null?C:r.id)!=null?b:"ani";xr.exports.saveAs(v,`${D}.png`),setTimeout(()=>e(""),1e3)})};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"Screenshot/GIF/APNG"}),h(fe,{onClick:n,title:"Copy screenshot to clipboard",variant:"contained",children:h(Ys,{})})]}),h(ie,{children:[h(ur,{target:t.settings,propList:wg}),h(fe,{onClick:l,title:"Get all frames as zip",startIcon:h(Or,{}),children:"Get All Frames"}),h(fe,{title:"Create GIF of current animation",startIcon:h(Un,{viewBox:"4 4 16 16"}),onClick:a,children:"Create GIF"}),h(fe,{onClick:i,title:"Create APNG of current animation",startIcon:h(Or,{}),children:"Create APNG"})]})]})}const{setLoadingMsg:Fe}=Be.getState(),Ai=e=>()=>{Fe("Generating frames..."),setTimeout(async()=>{const r=await e();Fe("Creating zip...");const t="frames",n=await Gi(r,t);Fe("Finished"),xr.exports.saveAs(n,`${t}.zip`),setTimeout(()=>Fe(""),1e3)})},ki=e=>async()=>{Fe("Generating frames...");const{frameRate:r}=F.screenshot.settings;setTimeout(async()=>{const t=await e();Fe("Creating gif...");const{makeGif:n}=await Gt(()=>import("./index.e58f6bb8.js"),[]),l=await n({frames:t,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/r)});Fe("Finished"),xr.exports.saveAs(l,"spCapture.gif"),setTimeout(()=>Fe(""),1e3)})},Cl=[{value:"rotate",label:"Rotate",frames:Ai(Ti),gif:ki(Ti),clip:Pg,preview:Bg},{value:"speedDraw",label:"Speed Draw",frames:Ai(Ri),gif:ki(Ri),clip:Ng,preview:Og}];async function Ti(){var S;const{frameRate:e=30,duration:r=5}=(S=F.userData.specialCapture)!=null?S:{};let t=F.scene.background;F.scene.background=null;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:p,z:f}=F.camera.position;const{x:c,z:d}=F.controls.target,g=n((s-c)**2+(f-d)**2);if(g===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=r*e,D=2*o/v,C=f===d?o/4:i((s-c)/(f-d)),b=[];let y=C;for(let _=0;_<v;_++){F.update(1/e),s=c+g*l(y),f=d+g*a(y),F.camera.position.set(s,p,f),F.controls.update(),F.render();const k=F.canvas.toDataURL();b.push(k),y+=D}return F.scene.background=t,b}function Pg(){var _;Fe("Recording...");const{frameRate:e=30,duration:r=5}=(_=F.userData.specialCapture)!=null?_:{},t=F.loop.paused,n=F.record.settings.frameRate;F.record.settings.frameRate=e;let l=0;const{sqrt:a,sin:i,cos:o,atan:s,PI:p}=Math;let{x:f,y:c,z:d}=F.camera.position;const{x:g,z:v}=F.controls.target,D=a((f-g)**2+(d-v)**2);if(D===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const C=2*p/r;let y=d===v?p/4:s((f-g)/(d-v));const S=F.addEventListener("timeUpdate",({dt:k})=>{l+=k,l>r&&(F.record.stop(),setTimeout(()=>Fe(""),1e3),F.removeEventListener("timeUpdate",S),t&&F.loop.pause(),F.record.settings.frameRate=n),f=g+D*i(y),d=v+D*o(y),F.camera.position.set(f,c,d),y+=C*k});t&&F.loop.resume(),F.record.start()}function Bg(){var y;const{duration:e=5}=(y=F.userData.specialCapture)!=null?y:{},r=F.loop.paused;let t=0;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:p,z:f}=F.camera.position;const{x:c,z:d}=F.controls.target,g=n((s-c)**2+(f-d)**2);if(g===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=2*o/e;let C=f===d?o/4:i((s-c)/(f-d));const b=F.addEventListener("timeUpdate",({dt:S})=>{t+=S,t>e&&(F.removeEventListener("timeUpdate",b),r&&F.loop.pause()),s=c+g*l(C),f=d+g*a(C),F.camera.position.set(s,p,f),C+=v*S});r&&F.loop.resume()}const Mg=e=>{const{geometry:r}=e,{start:t,count:n}=r.groups.at(-1);return{geometry:r,count:t+n}},ba=e=>{const r=e.meshes.visible,t=e.attachment.list.flatMap(n=>n.meshes.visible);return[...r,...t].map(Mg)};async function Ri(){var d;const e=_e.getState().activeModel,r=ba(e).sort((g,v)=>v.count-g.count),t=r.map(({count:g})=>g),n=t.map((g,v)=>t.slice(0,v+1).reduce((D,C)=>D+C,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=(d=F.userData.specialCapture)!=null?d:{};let o=F.scene.background;F.scene.background=null;const s=i*a,p=[];let f=0,c=0;r.forEach(({geometry:g})=>g.drawRange.count=0);for(let g=0;g<=s;g++){e.update(1/a),c=Math.ceil(l*g/s),r[f].geometry.drawRange.count=c-n[f];const v=c-n[f+1];v>=0&&(r[f++].geometry.drawRange.count=1/0,f<r.length&&(r[f].geometry.drawRange.count=v)),F.render();const D=F.canvas.toDataURL();p.push(D)}return F.scene.background=o,p}function Ng(){var v;const e=_e.getState().activeModel;Fe("Recording...");const r=ba(e).sort((D,C)=>C.count-D.count),t=r.map(({count:D})=>D),n=t.map((D,C)=>t.slice(0,C+1).reduce((b,y)=>b+y,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=(v=F.userData.specialCapture)!=null?v:{},o=F.loop.paused,s=F.record.settings.frameRate;F.record.settings.frameRate=a;let p=0,f=0;r.forEach(({geometry:D})=>D.drawRange.count=0);const{ceil:c,max:d}=Math,g=F.addEventListener("timeUpdate",({dt:D})=>{const C=c(l*D/i);f+=d(C,1),r[p].geometry.drawRange.count=f-n[p],f-n[p+1]>=0&&(r[p++].geometry.drawRange.count=1/0,p>=r.length&&(F.removeEventListener("timeUpdate",g),setTimeout(()=>{Fe(""),F.record.stop(),o&&F.loop.pause(),F.record.settings.frameRate=s},1e3)))});o&&F.loop.resume(),F.record.start()}function Og(){var d;const e=_e.getState().activeModel,r=ba(e).sort((g,v)=>v.count-g.count),t=r.map(({count:g})=>g),n=t.map((g,v)=>t.slice(0,v+1).reduce((D,C)=>D+C,0));n.unshift(0);const l=n.at(-1),{duration:a=5}=(d=F.userData.specialCapture)!=null?d:{},i=F.loop.paused;let o=0,s=0;r.forEach(({geometry:g})=>g.drawRange.count=0);const{ceil:p,max:f}=Math,c=F.addEventListener("timeUpdate",({dt:g})=>{const v=p(l*g/a);s+=f(v,1),r[o].geometry.drawRange.count=s-n[o],s-n[o+1]>=0&&(r[o++].geometry.drawRange.count=1/0,o>=r.length&&(F.removeEventListener("timeUpdate",c),setTimeout(()=>{i&&F.loop.pause()},1e3)))});i&&F.loop.resume()}const Lg=[{propName:"program",label:"Program",type:"select",options:Cl},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:10},{propName:"duration",label:"Duration (s)",type:"number",min:1,max:60,step:.5}];function Fg(){const e=r=>{var l,a,i;const{type:t}=r.currentTarget.dataset,{program:n="rotate"}=(l=F.userData.specialCapture)!=null?l:{};(i=(a=Cl.find(o=>o.value===n))==null?void 0:a[t])==null||i.call(a)};return h(Ve,{className:"SpecialCapture SettingGroup",children:[h(ie,{children:h("div",{children:"Special Capture"})}),h(ie,{children:[h(ur,{target:F.userData.specialCapture,propList:Lg}),h("div",{className:"SpecialCapture-actions",children:[h(fe,{"data-type":"preview",onClick:e,title:"Preview",startIcon:h($n,{}),children:"Preview"}),h(fe,{"data-type":"frames",onClick:e,title:"Get all frames as zip",startIcon:h(Or,{}),children:"Get Frames"}),h(fe,{"data-type":"gif",onClick:e,title:"Download as GIF",startIcon:h(Un,{}),children:"Get GIF"}),F.record&&h(fe,{"data-type":"clip",onClick:e,startIcon:h(qt,{}),title:"Record Clip",children:"Get Clip"})]})]})]})}function zg(){return h(ie,{children:[h(eo,{}),h("span",{className:"break"}),h(bg,{}),h(Rg,{}),h("span",{className:"break"}),h(Fg,{}),h("span",{className:"break"}),h(vg,{})]})}function Hg(e,r){return new Promise(function(t,n){let l=new XMLHttpRequest;l.open(e,r),l.onload=function(){this.status>=200&&this.status<300?t(l.response):n({status:this.status,statusText:l.statusText})},l.onerror=function(){n({status:this.status,statusText:l.statusText})},l.send()})}const Gg=e=>Hg("GET",e),Wg=async e=>{const r=`https://api.github.com/repos/dgk3593/dl-model/contents/public/fbx/${e}`,t=await Gg(r);return JSON.parse(t).map(l=>l.name)},$g=async e=>await(await fetch(e)).arrayBuffer(),Ug=async e=>{const t=(await Wg(e)).map(l=>{const a=`https://dgk3593.github.io/dl-model/fbx/${e}/${l}`,i=$g(a);return{name:l,data:i}}),n=await zl(t);xr.exports.saveAs(n,`${e}.zip`)},qg=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=F;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{var s,p;const n=t.getAllFrames(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating gif from ${n.length} frames...`);const{frameRate:l}=t.settings,{makeGif:a}=await Gt(()=>import("./index.e58f6bb8.js"),[]),i=await a({frames:n,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/l)});r("Finished");const o=(p=(s=e.userData.name)!=null?s:e.id)!=null?p:"ani";xr.exports.saveAs(i,`${o}.gif`),setTimeout(()=>r(""),1e3)})},Vg=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=F;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{var d,g;const n=t.getAllFramesAsArrayBuffer(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating apng from ${n.length} frames...`);const{frameRate:l}=t.settings,a=Math.ceil(1e3/l),i=Array(n.length-1).fill(a),{width:o,height:s}=F.viewport,p=ha.exports.encode(n,o,s,0,i),f=new Blob([p],{type:"image/apng"});r("Finished");const c=(g=(d=e.userData.name)!=null?d:e.id)!=null?g:"ani";xr.exports.saveAs(f,`${c}.png`),setTimeout(()=>r(""),1e3)})};window.quickApng=Vg;function Zg(){const{activeModel:e}=_e(),{record:r,screenshot:t}=F,n=Be(o=>o.sidebar.modal.open),l=o=>{o.stopPropagation(),t.downloadFrame()},a=o=>{o.stopPropagation();const{clipDuration:s}=e.animation.current;if(s===0||s===1/0){alert("Can't record");return}const{animation:p}=e;p.stop(),p.addCountedEventListener("ChainFinished",()=>r.stop()),p.play(),r.start()},i=()=>Ug(e.id);return h("div",{className:"QuickAction",children:[h(mr,{title:"Change Background",onClick:()=>n("background"),children:h(Ji,{})}),h(mr,{title:"Get Screenshot",onClick:l,children:h(js,{})}),h(mr,{title:"Create GIF",onClick:qg,children:h(Un,{fontSize:"large"})}),r&&h(mr,{title:"Record Current Animation",onClick:a,children:h(qt,{})}),h(mr,{title:"Download Current Model",onClick:i,children:h(Or,{})})]})}const jg=["Model","Scene","Export"].map(e=>({name:e})),Kg={Model:Tc,Scene:dg,Export:zg};function Yg(){const{tab:e,setTab:r}=Be(l=>l.sidebar.settings),t=(l,a)=>r(a),n=Kg[e];return h(ie,{children:[h(Zg,{}),h(_s,{value:e,tabs:jg,onChange:t}),h(n,{}),h("span",{className:"bottom-space"})]})}function Xg(){var p;const{target:e,setTarget:r}=zr();if(!e)return null;const{inputTarget:t}=Wt(),{loadState:n}=Kr(),l=e==null?void 0:e.id,[a,i]=dr((p=e==null?void 0:e.userData)==null?void 0:p.name);Ae(()=>{var f;i((f=e==null?void 0:e.userData)==null?void 0:f.name),!(a||!e)&&zi(l).then(c=>{i(c.name),e.userData.name=c.name})},[e]);const o=a!=null?a:l;return e&&h("div",{className:"ChainMaker-target",children:["Target",h(fe,{onClick:async()=>{var d;const f=await t();if(!f)return;const c=f[0];n((d=c.userData)==null?void 0:d.aniSelectState),r(c)},title:"Click to change",children:[h(qi,{modelId:l,alt:o}),h("span",{className:"name",children:o})]})]})}function Jg({target:e}){var s,p;const{toggle:r}=zr(),{inputAni:t}=Wt(),{activeModel:n}=_e(),l=(p=(s=e==null?void 0:e.userData)==null?void 0:s.chain)!=null?p:[],a=()=>{const f=Wi(l);e==null||e.animation.addChain(f)},i=async()=>{var D;const f=await t();if(!f)return;const[c,d,g]=f,v=Fn(c,d);(D=e.userData)==null||D.chain.push(...v),e.userData.aniSelectState=g},o=()=>{var f;r(),Kr.getState().loadState((f=n==null?void 0:n.userData)==null?void 0:f.aniSelectState)};return h("div",{className:"ChainMaker-header",children:[h("div",{className:"ChainMaker-title",children:[h(Cs,{disabled:!e,children:[h(fe,{variant:"contained",title:"Play All",onClick:a,children:h($n,{})}),h(fe,{variant:"contained",title:"Add",onClick:i,children:h($t,{})})]}),"ChainMaker"]}),h(Xg,{}),h(Ut,{onClick:o,color:"white",title:"Close Chain Maker"})]})}function Qg({ani:e}){const[r,t]=dr({timeScale:e.timeScale,reps:e.reps}),n=l=>{const{name:a,value:i}=l.target,o=a==="reps"?parseInt(i):parseFloat(i),s=isNaN(o)?1:o;e[a]=s,t(p=>({...p,[a]:s}))};return h("div",{className:"ChainAni-advanced",children:[h(Rt,{onChange:n,label:"Speed",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",step:.25,name:"timeScale"},value:r.timeScale}),h(Rt,{onChange:n,label:"Repetitions",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",name:"reps"},value:r.reps})]})}const eh={type:"number",min:0,max:100,step:.25};function Pi({value:e,label:r,onChange:t,index:n}){return h(Rt,{className:"SetNumbers-number",onChange:a=>{const i=a.currentTarget.getAttribute("index"),o=parseFloat(a.currentTarget.value);t(o,i)},value:e,label:r,size:"small",margin:"dense",variant:"outlined",inputProps:{...eh,index:n}})}const rh=({value:e,onChange:r,reset:t})=>h("div",{className:"SetNumbers",children:[h(Pi,{value:e[0],label:"Start (%)",onChange:r,index:"0"}),h(Pi,{value:e[1],label:"End (%)",onChange:r,index:"1"}),h(mr,{onClick:t,title:"Reset",children:h(Zs,{})})]});function th({ani:e}){var o;const[r,t]=dr((o=e.duration)!=null?o:[0,100]),n=s=>{t(s),e.duration=s},l=(s,p)=>{const f=[...r];f[p]=s,n(f)},a=(s,p)=>n(p),i=()=>n([0,100]);return h(Ve,{disableGutters:!0,className:"ChainAni-duration",children:[h(ie,{children:" Duration"}),h(ie,{children:[h(rh,{value:r,onChange:l,reset:i}),h("div",{className:"duration-slider",children:h(Ss,{size:"small",value:r,onChange:a})})]})]})}const _n=1024,Mr=64;function nh({index:e,part:r}){var _,k;const{activeModel:t}=_e(),n=(_=t==null?void 0:t.face)==null?void 0:_[`${r}List`];if(!n)return h(ie,{children:"N/A"});const l=(k=t.userData[`${r}Uv`])!=null?k:ds(n);if(t.userData[`${r}Uv`]=l,!l[e-1])return h(ie,{children:"N/A"});const a=fs(t.id),[i,o]=l[0].u,[s,p]=l[0].v,f=o-i,c=p-s,d=f*_n,g=c*_n,v=d/Mr,D=_n/v,C=g/v,b={width:Mr,height:C,position:"relative"},y={content:'""',position:"absolute",backgroundImage:`url(${a})`,backgroundSize:`${D}px ${D}px`,width:Mr,height:C};return h("div",{style:b,children:h(Yr,{sx:(({u:T,v:I})=>{const B=T[1]-T[0]!==f,O=T[0],z=I[0],L=O*D,U=z*D,H=B?(Mr-C)/2:0;return B?{width:C,height:Mr,"&::after":{...y,width:C,height:Mr,backgroundPosition:`left -${L}px bottom -${U}px`,transform:`rotate(90deg) translate(-${H}px, -${H}px)`,position:"absolute"}}:{width:Mr,height:C,position:"relative","&::after":{...y,backgroundPosition:`left -${L}px bottom -${U}px`}}})(l[e-1])})})}const ah=({part:e,...r})=>e==="eye"?h(ps,{...r}):h(vs,{...r});function Bi({part:e,index:r,...t}){var a;const{target:n}=zr(),l=n==null?void 0:n.face;switch(l==null?void 0:l.type){case"uv":return h("div",{...t,"data-part":e,children:r?h(ah,{part:e,texture:l[`${e}Texture`],index:r}):h(ie,{children:"Set"})});case"meshes":return!((a=l==null?void 0:l[`${e}List`])!=null&&a.length)?h("div",{style:{cursor:"default"},children:"N/A"}):h("div",{...t,"data-part":e,children:r?h(nh,{part:e,index:r}):h(ie,{children:"Set"})});default:return h(ie,{})}}const ih={type:"number",min:0,max:100,step:1},oh={marginTop:"0.2rem"};function lh({details:e,onUpdate:r,onRemove:t}){const{id:n,time:l,eyeIdx:a,mouthIdx:i}=e,[o,s]=dr(l),{inputEye:p,inputMouth:f}=Wt(),c=()=>t(n),d=v=>{const D=parseFloat(v.target.value);s(D);const C={...e,time:D};r(C)},g=async v=>{const{part:D}=v.currentTarget.dataset,C=D==="eye"?await p():await f();if(!C)return;const b=C[0]?C[0]:void 0,y={...e,[`${D}Idx`]:b};r(y)};return h(ie,{children:[h("div",{onClick:c,children:h(Gn,{})}),h(Rt,{onChange:d,inputProps:ih,value:o,margin:"dense",size:"small",variant:"standard",sx:oh}),h(Bi,{part:"eye",index:a,"data-id":n,onClick:g}),h(Bi,{part:"mouth",index:i,"data-id":n,onClick:g})]})}function sh({ani:e}){const{target:r}=zr(),{aniAction:t}=e,n=[],l=[];t.forEach(d=>{const{time:g,["face.eyeIdx"]:v,["face.mouthIdx"]:D,...C}=d;(v||D)&&n.push({id:ya(),time:g,eyeIdx:v,mouthIdx:D}),Object.keys(C).length&&l.push({time:g,...C})});const[a,i]=dr(n),o=d=>{const g=d.map(({time:y})=>y),v=l.map(({time:y})=>y),b=[...new Set([...g,...v])].sort((y,S)=>y-S).map(y=>{const S=d.find(B=>B.time===y),{eyeIdx:_,mouthIdx:k}=S,I={...l.find(B=>B.time===y),time:y};return _&&(I["face.eyeIdx"]=_),k&&(I["face.mouthIdx"]=k),I});e.aniAction=b,i(d)},s=d=>{const{id:g}=d,v=a.map(D=>D.id===g?d:D);o(v)},p=d=>{const g=a.filter(v=>v.id!==d);i(g),o(g)},f=()=>i(d=>[...d,{id:ya()}]),c=a.map(d=>h(lh,{details:d,onUpdate:s,onRemove:p},d.id));return r.face&&h(Ve,{disableGutters:!0,className:"ChainAni-face",children:[h(ie,{children:"Facial Expression"}),h("div",{className:"ChainAniFace",children:[(a==null?void 0:a.length)>0&&h(ie,{children:[h("div",{}),h("div",{children:"Time (%)"}),h("div",{children:"Eye"}),h("div",{children:"Mouth"}),c]}),h("div",{onClick:f,children:h($t,{})})]})]})}const ch=({onClick:e})=>h(mr,{onClick:e,title:"Play",children:h($n,{})});function uh({target:e,ani:r,index:t}){const{chain:n}=e.userData,l=o=>{o.stopPropagation(),n.remove(r)},a=o=>{o.stopPropagation();const s=Wi([r]);e==null||e.animation.addChain(s)},i=o=>h(Ve,{className:"ChainAni",...o.draggableProps,ref:o.innerRef,children:[h(ie,{children:[h(ch,{onClick:a}),h("div",{...o.dragHandleProps,className:"ChainAni-name",children:r.name}),h(Ut,{onClick:l,title:"Delete"})]}),h(ie,{children:[h(Qg,{ani:r}),h(th,{ani:r}),h(sh,{ani:r})]})]});return h(ml,{draggableId:r.id,index:t,children:i})}function dh({target:e}){var i;if(!((i=e==null?void 0:e.userData)!=null&&i.chain))return null;const[r,t]=br(),n=e.userData.chain;return Ae(()=>{const o=n.addEventListener("change",t);return()=>n.removeEventListener("change",o)},[]),h(dl,{onDragEnd:o=>{const{destination:s,source:p}=o;if(!s||s.index===p.index)return;const f=[...n],c=f.splice(p.index,1)[0];f.splice(s.index,0,c),n.length=0,n.push(...f)},children:h(ga,{droppableId:"chainList",children:o=>h("div",{ref:o.innerRef,...o.droppableProps,children:[n.map((s,p)=>h(uh,{target:e,index:p,ani:s},s.id)),o.placeholder]},r)})})}function fh(){const{activeModel:e}=_e(),{target:r,setTarget:t}=zr();return Ae(()=>{if(!r)return;const n=r.addEventListener("dispose",()=>t(e));return()=>r.removeEventListener("dispose",n)},[r]),Ae(()=>{r&&F.loadedModel.includes(r)||t(e)},[r,e]),h("div",{className:"ChainMaker",children:[h(Jg,{target:r}),h(dh,{target:r})]},r==null?void 0:r.uniqueId)}const ph={sx:Tn.paper};function vh({open:e}){const r=Be(l=>l.sidebar.toggle),t=zr(l=>l.open),n=h(Yr,{sx:Tn.sidebarHeader,children:[dc,uc,h(Ut,{color:"white",onClick:r,title:"Close Sidebar"})]});return h(Xi,{className:"Sidebar",open:e,onClose:r,variant:"persistent",sx:Tn.sidebar,PaperProps:ph,children:[n,t?h(fh,{}):h(Yg,{}),h(pc,{})]})}const Mi="23rem",Ni={dock:{width:Mi},Paper:{width:Mi,border:"unset",scrollbarWidth:"thin",scrollbarColor:"rgba(128, 0, 0, 0.8) rgba(255, 255, 255, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.8)",borderRadius:"2px"}}};function gh(){var l;const{mode:e,handleSelect:r,close:t}=Be(a=>a.dock),n=(l=Li[e])!=null?l:Yr;return e&&h(Xi,{className:"Dock",sx:Ni.dock,open:!!e,variant:"persistent",anchor:"right",PaperProps:{sx:Ni.Paper},children:[h(Ut,{onClick:t,title:"Close Dock"}),h(Ln,{fallback:h(Hn,{}),children:h(n,{compact:!0,onSelect:r})})]})}function hh(){const{Component:e,props:r={},close:t,onClose:n}=Wt();return h($i,{open:!!e,closeModal:n!=null?n:t,children:h(Ln,{fallback:h(Hn,{}),children:h(e,{...r})})})}const Sl=["chara-regular","chara-allies","chara-enemies","dragon-regular","dragon-special","weapon-regular","weapon-special","weapon-extra","boss-archdemon","boss-agito","boss-raid","boss-void","boss-others","model-unlisted"],_l=["ani-home","ani-quest","ani-weapon","ani-gun","ani-genericSkill","ani-uniqueSkill","ani-uniqueCombo","ani-uniqueFS","ani-uniqueVictory","ani-uniqueOther","ani-misc","ani-extra"],Il=["background-image","background-skybox","model-texture"],mh=[...Sl,..._l,...Il],bh=Object.freeze(Object.defineProperty({__proto__:null,model:Sl,animation:_l,others:Il,all:mh},Symbol.toStringTag,{value:"Module"})),In=e=>{var r;return Hl((r=bh[e])!=null?r:[])},En=cs.getState().set,An=!!indexedDB,wh=async()=>{const e=In("others"),r=In("model"),t=In("animation"),n=await e;En(n);const l=await r;En(l);const a=An&&Gl(l),i=await t;En(i),An&&Rs(i),await Wl,await a,An&&await $l(),console.info("Data Load Complete")};function Yh(){const e=Be(s=>s.sidebar),r=Be(s=>s.setLoadingMsg),t=Ul(),{activeModel:n,setActiveModel:l}=_e(),{setSource:a,setSourceName:i}=Kr(s=>s.personalAni),o=Ui("(min-width:640px)");return Ae(()=>{t&&r("Loading"),l(F.model[0]);const s=F.model.addEventListener("change",()=>{F.model.includes(n)||l(F.model[0])});return wh(),window.addEventListener("unload",()=>indexedDB==null?void 0:indexedDB.deleteDatabase("model-viewer")),r(""),()=>F.model.removeEventListener("change",s)},[]),Ae(()=>{!n||(i(n==null?void 0:n.userData.name),a(n==null?void 0:n.id))},[n]),h(ie,{children:[h("button",{title:"Settings",className:"sidebar-toggle",onClick:e.toggle,children:h(Qs,{})}),h(hh,{}),h(vh,{open:e.open}),o&&h(gh,{})]})}export{Yh as default};

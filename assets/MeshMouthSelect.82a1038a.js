var W=Object.defineProperty,A=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var F=(t,n,e)=>n in t?W(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,h=(t,n)=>{for(var e in n||(n={}))U.call(n,e)&&F(t,e,n[e]);if(m)for(var e of m(n))I.call(n,e)&&F(t,e,n[e]);return t},v=(t,n)=>A(t,Z(n));var $=(t,n)=>{var e={};for(var o in t)U.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&m)for(var o of m(t))n.indexOf(o)<0&&I.call(t,o)&&(e[o]=t[o]);return e};import{a6 as q,a7 as _,j as i,a8 as G,a as y}from"./index.477e74ca.js";import{B as J}from"./Box.142e8da4.js";import{B as K}from"./Button.9899fcda.js";const L=t=>`${_}/${t}/${t}.png`,Q=[1,2,3,4,5,6,7,8,9],B=64,V=Q.map(t=>{if(t===1)return[-280,-170];const n=(t-2)%4,e=Math.floor(t/6),o=-(24+n*128),s=-(298+e*128);return[o,s]}),D=(t,n)=>{const[e,o]=V[n-1],[s,a]=q(t),c=s*128,r=a*128,d=e-c,u=o+r;return{x:d,y:u}},tt=(t,n)=>{const{x:e,y:o}=D(t,n),s=o-B/2;return{x:e,y:s}};function N(s){var a=s,{texture:t,x:n,y:e}=a,o=$(a,["texture","x","y"]);const r={backgroundImage:`url(${L(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${n}px ${e}px`,width:B,height:B/2};return i("div",h({style:r},o))}function ut(o){var s=o,{texture:t,index:n}=s,e=$(s,["texture","index"]);const{x:a,y:c}=D(t,n);return i(N,h({texture:t,x:a,y:c,className:"EyeBox"},e))}function ht(o){var s=o,{texture:t,index:n}=s,e=$(s,["texture","index"]);const{x:a,y:c}=tt(t,n);return i(N,h({texture:t,x:a,y:c,className:"EyeBox"},e))}const R=t=>{let n=t[0],e=t[0];return t.forEach(o=>{n=o<n?o:n,e=o>e?o:e}),[n,e]},et=t=>t.map(n=>{const e=n.geometry.attributes.uv.array,o=e.filter((u,x)=>x%2===0),s=e.filter((u,x)=>x%2===1),[a,c]=R(o),[r,d]=R(s);return{u:[a,c],v:[r,d]}});const nt=t=>`${_}/${t}/${G(t)}.png`,b=1024,l=160;function ot({id:t,uvList:n,onClick:e,part:o}){const s=nt(t).replace(">",""),[a,c]=n[0].u,[r,d]=n[0].v,u=c-a,x=d-r,j=u*b,z=x*b,P=j/l,g=b/P,f=z/P,C={width:l,height:f,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},E={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${g}px ${g}px`,width:l,height:f},O=({u:p,v:M})=>{const S=p[1]-p[0]!==u,Y=p[0],H=M[0],T=Y*g,k=H*g,w=S?(l-f)/2:0;return S?{width:f,height:l,"&::after":v(h({},E),{width:f,height:l,backgroundPosition:`left -${T}px bottom -${k}px`,transform:`rotate(90deg) translate(-${w}px, -${w}px)`,position:"absolute"})}:{width:l,height:f,position:"relative","&::after":v(h({},E),{backgroundPosition:`left -${T}px bottom -${k}px`})}};return y("div",{className:"MeshFaceButton",children:[n.map((p,M)=>i("div",{style:C,onClick:e,"data-index":M+1,"data-part":o,children:i(J,{sx:O(p)})})),i(K,{"data-part":o,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const st=([t,...n])=>`${t.toUpperCase()}${n.join("")}`;function X({target:t,onSelect:n,part:e}){var c,r;const o=(c=t==null?void 0:t.face)==null?void 0:c[`${e}List`];if(!o)return null;const s=(r=t.userData[`${e}Uv`])!=null?r:et(o);t.userData[`${e}Uv`]=s;const a=d=>{const{index:u,part:x}=d.currentTarget.dataset;n(parseInt(u),x)};return o&&y("div",{className:"MeshPartSelect",children:[y("h3",{children:["Select ",st(e)]}),i(ot,{id:t.id,uvList:s,onClick:a,part:e})]})}const dt=t=>i(X,h({part:"eye"},t)),xt=t=>i(X,h({part:"mouth"},t));export{ut as E,ht as M,nt as a,dt as b,xt as c,et as g,Q as i};

var T=Object.defineProperty;var m=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var u=(t,a,o)=>a in t?T(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,k=(t,a)=>{for(var o in a||(a={}))b.call(a,o)&&u(t,o,a[o]);if(m)for(var o of m(a))h.call(a,o)&&u(t,o,a[o]);return t};var x=(t,a)=>{var o={};for(var r in t)b.call(t,r)&&a.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&m)for(var r of m(t))a.indexOf(r)<0&&h.call(t,r)&&(o[r]=t[r]);return o};import{aa as C}from"./vendor.fe85539c.js";import{T as w}from"./TabBar.19da7e4e.js";import{C as P}from"./ColorPicker.55b095b8.js";import{G as R,T as W,u as v}from"./Gallery.a5c3e4a9.js";import{j as n,a as g,F as $,v as y}from"./index.cd831344.js";import{B}from"./Box.c5a01952.js";import{U as j,f as L}from"./file2dataURL.38641c42.js";import{B as D}from"./Button.fe1a4a4d.js";import{a as F,b as z}from"./DialogTitle.c0ffc7a8.js";import"./ButtonBase.12d954da.js";import"./Popover.7a782be7.js";import"./createSvgIcon.d2201fce.js";import"./ColorButton.42dcc34b.js";const p={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},G=({src:t,value:a,name:o,onClick:r})=>n(B,{sx:p.container,"data-name":o,children:n("img",{src:t,"data-value":a,onClick:r,style:p.image})}),U=({list:t,onClick:a})=>n(R,{style:p.gallery,onClick:a,list:t,component:G}),f={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function S(r){var i=r,{onApply:t,applyLabel:a="Apply"}=i,o=x(i,["onApply","applyLabel"]);const[e,s]=C(""),l=I=>s(I.target.value),c=()=>t(e),d=n(D,{sx:f.button,variant:"contained",onClick:c,children:a});return n(W,k({value:e,onChange:l,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:d,sx:f.input},inputProps:{type:"url"},size:"small"},o))}const A={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function N({onSelect:t}){const a=v(e=>e["background-image"]),o=e=>{const{value:s}=e.target.dataset,l=`img:${s}`;t(l)},r=async e=>{const l=`img:${await L(e[0])}`;t(l)},i=e=>{if(!e)return;const s=`img:${e}`;t(s)};return g($,{children:[g(B,{sx:A.external,children:[n(j,{onChange:r}),n(S,{onApply:i})]}),n(U,{list:a,onClick:o})]})}function E({onSelect:t}){const a=v(r=>r["background-skybox"]);return n(U,{list:a,onClick:r=>{const{value:i}=r.target.dataset,e=`sky:${i}`;t(e)}})}const H=["Color","Image","Skybox"].map(t=>({name:t})),V={Color:P,Image:N,Skybox:E},_=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function nt({onAfterSelect:t}){var l;const a=_(y.background),[o,r]=C(a),i=c=>{y.background=c,t==null||t()},e=(c,d)=>r(d),s=(l=V[o])!=null?l:()=>null;return g("div",{className:"BackgroundPicker",children:[n(F,{sx:{textAlign:"center"},children:"Choose a background"}),n(w,{value:o,onChange:e,tabs:H}),n(z,{children:n(s,{onSelect:i})})]})}export{nt as default};

import{m as n,_ as B,e,a7 as D,T as I}from"./index.a124d5e1.js";import{u as M}from"./useToggleState.ee3c2e1d.js";import{L as k,u as N,S as Q}from"./lists.b7cbfbc8.js";import{F as G}from"./FacePartSelector.26483519.js";import{f as P,c as $,B as q,F as z,a as E}from"./filterConfig.c0f1f753.js";import{u as R,G as W}from"./Gallery.440c9fb2.js";import{M as _,C as j,c as A,s as r,u as b}from"./styles.c1dc14ad.js";import{B as g}from"./Box.dedfeb7a.js";import{a as H,b as J}from"./DialogTitle.fd68ab3c.js";import{I as K}from"./Close.af1c3086.js";function O({compact:i,searchQuery:s,filter:o,content:u,onSelect:a}){var f;const d=(f=R(t=>t[`chara-${u}`]))!=null?f:[],m=d.filter(({id:t})=>!t.endsWith("h")),[h,c]=n([]),[F,p]=n(!1);return B(()=>c(m),[u]),B(()=>{p(!0);async function t(){const l=s?await D(s):m;return await P(l,o)}setTimeout(async()=>{const l=await t();c(l),p(!1)})},[s,o]),d.length&&!F?e(W,{list:h,component:i?_:j,onClick:a}):e(k,{})}const C=A.find(({value:i})=>i==="chara").options,U=[],V={...r.top,"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}};function ie({compact:i,onSelect:s,onAfterSelect:o}){const u=!!indexedDB,[a,d]=n(0),m=(S,x)=>d(x),[h,c]=n(""),F=N(h,500);B(()=>{c("")},[a]);const[p,f]=n(U),[t,l]=n("Both"),[w,L]=M(!0),y=C[a].value==="regular"&&$,T=i||b("(max-width:640px)")||b("(max-height:640px)"),v=I(S=>{const{value:x}=S.currentTarget.dataset;t!=="Eyes"&&s(x,"mouth"),t!=="Mouth"&&s(x,"eye"),o==null||o()},[t]);return e(g,{className:"FaceTexture",sx:r.root,children:[e(g,{sx:V,children:[e(H,{sx:r.title,children:"Select Texture"}),e(G,{value:t,onClick:l}),e(q,{options:C,selectedIndices:[a],setIndex:m}),e(g,{sx:r.searchFilter,children:[e(g,{sx:r.search,children:[e(Q,{query:h,onChange:c,placeholder:u?"Search All":"Search"},a[0]),y&&e(K,{onClick:L,size:"large",children:e(z,{})})]}),w&&y&&e(E,{config:y,onChange:f,compact:T})]})]}),e(J,{sx:r.content,children:e(O,{compact:T,searchQuery:F,filter:p,content:C[a].value,onSelect:v})})]})}export{ie as F};

import{a5 as N,a6 as S,e as a,a7 as X}from"./index.f3648e19.js";import{B as z}from"./Box.bab79bd3.js";import{B as C}from"./Button.832365b6.js";const O=t=>`${S}/${t}/${t}.png`,Y=[1,2,3,4,5,6,7,8,9],M=64,H=Y.map(t=>{if(t===1)return[-280,-170];const o=(t-2)%4,e=Math.floor(t/6),n=-(24+o*128),s=-(298+e*128);return[n,s]}),E=(t,o)=>{const[e,n]=H[o-1],[s,c]=N(t),r=s*128,i=c*128,h=e-r,u=n+i;return{x:h,y:u}},j=(t,o)=>{const{x:e,y:n}=E(t,o),s=n-M/2;return{x:e,y:s}};function F({texture:t,x:o,y:e,...n}){const c={backgroundImage:`url(${O(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${o}px ${e}px`,width:M,height:M/2};return a("div",{style:c,...n})}function L({texture:t,index:o,...e}){const{x:n,y:s}=E(t,o);return a(F,{texture:t,x:n,y:s,className:"EyeBox",...e})}function Q({texture:t,index:o,...e}){const{x:n,y:s}=j(t,o);return a(F,{texture:t,x:n,y:s,className:"EyeBox",...e})}const P=t=>{let o=t[0],e=t[0];return t.forEach(n=>{o=n<o?n:o,e=n>e?n:e}),[o,e]},W=t=>t.map(o=>{const e=o.geometry.attributes.uv.array,n=e.filter((u,d)=>d%2===0),s=e.filter((u,d)=>d%2===1),[c,r]=P(n),[i,h]=P(s);return{u:[c,r],v:[i,h]}});const A=t=>`${S}/${t}/${X(t)}.png`,m=1024,l=160;function Z({id:t,uvList:o,onClick:e,part:n}){const s=A(t).replace(">",""),[c,r]=o[0].u,[i,h]=o[0].v,u=r-c,d=h-i,k=u*m,U=d*m,v=k/l,p=m/v,f=U/v,I={width:l,height:f,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},$={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${p}px ${p}px`,width:l,height:f},R=({u:x,v:g})=>{const b=x[1]-x[0]!==u,_=x[0],D=g[0],B=_*p,y=D*p,w=b?(l-f)/2:0;return b?{width:f,height:l,"&::after":{...$,width:f,height:l,backgroundPosition:`left -${B}px bottom -${y}px`,transform:`rotate(90deg) translate(-${w}px, -${w}px)`,position:"absolute"}}:{width:l,height:f,position:"relative","&::after":{...$,backgroundPosition:`left -${B}px bottom -${y}px`}}};return a("div",{className:"MeshFaceButton",children:[o.map((x,g)=>a("div",{style:I,onClick:e,"data-index":g+1,"data-part":n,children:a(z,{sx:R(x)})})),a(C,{"data-part":n,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const q=([t,...o])=>`${t.toUpperCase()}${o.join("")}`;function T({target:t,onSelect:o,part:e}){var r,i;const n=(r=t==null?void 0:t.face)==null?void 0:r[`${e}List`];if(!n)return null;const s=(i=t.userData[`${e}Uv`])!=null?i:W(n);t.userData[`${e}Uv`]=s;const c=h=>{const{index:u,part:d}=h.currentTarget.dataset;o(parseInt(u),d)};return n&&a("div",{className:"MeshPartSelect",children:[a("h3",{children:["Select ",q(e)]}),a(Z,{id:t.id,uvList:s,onClick:c,part:e})]})}const V=t=>a(T,{part:"eye",...t}),tt=t=>a(T,{part:"mouth",...t});export{L as E,Q as M,A as a,V as b,tt as c,W as g,Y as i};

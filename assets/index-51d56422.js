import{_ as u,h as p,o as a,D as f,p as v,M as y,P as _}from"./jsxRuntime.module-9121d302.js";import{_ as w}from"./preload-helper-45408441.js";import{u as A}from"./useIsMount-3cd333ef.js";import{u as m,g,a as S}from"./index-76ffaf5a.js";import{g as L,p as D}from"./getPersonalAni-d0a63abd.js";import{p as E,v as c,g as M,a as O}from"./viewer-7c94c9c1.js";import{c as h}from"./helper-aa3b0c96.js";import{i as P}from"./initAniSelectState-54296060.js";import"./index-d7a93f3d.js";import"./_commonjsHelpers-35101cd5.js";import"./compat.module-90d28d8c.js";import"./immer.esm-6fa25dee.js";import"./index-f60cacb5.js";import"./three-95e0c7cb.js";import"./CopyShader-e27bbfcf.js";import"./ShaderPass-ffe7d003.js";import"./Pass-b3525e48.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const b="cccccc",N="c100001_01";function d(){const n=decodeURI(window.location.hash),s=E(n),t=Object.fromEntries(s);T(t),I(n)}function T(n){const{bg:s=b,showAC:t="true",showSettings:i="true"}=n;c.background=s,m.setState({showTimeControl:g(t)}),m.setState({showSettings:g(i)})}async function I(n){c.disposeAllModels(),setTimeout(async()=>{const s=n.includes("id=")?n:n+`/id=${N}`,t=await c.loadModelFromCode(s);c.add(t);const i=t.type==="adventurer"?"Adv":"Personal";S.getState().setCategory(i),P(t);const{id:e}=t;if(!n.includes("camPos=")){const r=M(e);c.camera.position.set(...r)}const o=O(e);if(c.controls.target.set(...o),n.includes("ani=")){const r=t.animation.current.chainCode??"";r&&(t.userData.chain=h(r,"init"))}else{const r=L(e);if(r){const{code:l,name:C}=r;t.animation.addChain(l),t.userData.chain=h(l,C)}}})}const R=y(()=>w(()=>import("./index-d5a9852a.js"),["assets/index-d5a9852a.js","assets/jsxRuntime.module-9121d302.js","assets/index-76ffaf5a.js","assets/index-d7a93f3d.js","assets/_commonjsHelpers-35101cd5.js","assets/compat.module-90d28d8c.js","assets/immer.esm-6fa25dee.js","assets/viewer-7c94c9c1.js","assets/preload-helper-45408441.js","assets/three-95e0c7cb.js","assets/CopyShader-e27bbfcf.js","assets/ShaderPass-ffe7d003.js","assets/Pass-b3525e48.js","assets/useIsMount-3cd333ef.js","assets/createSvgIcon-f2a0048b.js","assets/ButtonBase-c56a8b38.js","assets/BoneManager-e22483f6.js","assets/ModelIcon-6ce365e9.js","assets/Accordion-b426e74d.js","assets/useToggleState-3fb9d00b.js","assets/Accordion-09fd7fc3.css","assets/filterConfig-b75132fe.js","assets/Gallery-44e2f555.js","assets/Popover-851dcb03.js","assets/Box-9fcd2e2c.js","assets/DialogTitle-b23f8be5.js","assets/GlowToggle-14284aac.js","assets/GlowToggle-eb519626.css","assets/lists-8bda5b9b.js","assets/Close-0ad613b5.js","assets/lists-4341b07e.css","assets/filterConfig-ea114570.css","assets/ColorButton-28f4d73a.js","assets/Button-1aaa8f1a.js","assets/SkipPrevious-6e1cb3e1.js","assets/useKey-ea23d921.js","assets/FaceSelect-23c7fcb9.js","assets/FacePartSelector-ce967422.js","assets/Selector-dc749ac1.js","assets/Selector-88a094c7.css","assets/MeshMouthSelect-f4b84919.js","assets/MeshMouthSelect-7f49998c.css","assets/FaceSelect-febe3778.css","assets/FaceTexture-8543109d.js","assets/styles-f5bd6115.js","assets/styles-6d95f099.css","assets/styles-2ff56570.css","assets/index-f60cacb5.js","assets/helper-aa3b0c96.js","assets/AddWeapon-a8e5ab16.js","assets/index-cb8eaac3.js","assets/initAniSelectState-54296060.js","assets/AddWeapon-45b642d6.css","assets/BoneManager-bf3fbd2c.css","assets/getPersonalAni-d0a63abd.js","assets/TabBar-ba457ef1.js","assets/aniFunction-ccfc2e7d.js","assets/index-0f03617c.css"])),k=y(()=>w(()=>import("./index-f6193722.js"),["assets/index-f6193722.js","assets/jsxRuntime.module-9121d302.js","assets/useToggleState-3fb9d00b.js","assets/index-76ffaf5a.js","assets/index-d7a93f3d.js","assets/_commonjsHelpers-35101cd5.js","assets/compat.module-90d28d8c.js","assets/immer.esm-6fa25dee.js","assets/viewer-7c94c9c1.js","assets/preload-helper-45408441.js","assets/three-95e0c7cb.js","assets/CopyShader-e27bbfcf.js","assets/ShaderPass-ffe7d003.js","assets/Pass-b3525e48.js","assets/GlowToggle-14284aac.js","assets/GlowToggle-eb519626.css","assets/Button-1aaa8f1a.js","assets/ButtonBase-c56a8b38.js","assets/Popover-851dcb03.js","assets/SkipPrevious-6e1cb3e1.js","assets/createSvgIcon-f2a0048b.js","assets/Close-0ad613b5.js","assets/index-0a450c69.css"]));function B(){const n=A(),s=u(),t=u(),{loadingMsg:i,showTimeControl:e,showSettings:o,showFrameRate:r}=m();return p(()=>(n&&D.then(d),window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d))),p(()=>{s.current.appendChild(c.canvas),c.stats.dom.style.position="",t.current.appendChild(c.stats.dom)},[]),a(v,{children:[o&&a(f,{fallback:null,children:a(R,{})}),a("div",{className:"mount",ref:l=>s.current=l}),a("div",{className:"stats",style:{display:r?"unset":"none"},ref:l=>t.current=l}),i&&a("div",{className:"loading-msg",children:i}),e&&a(f,{fallback:null,children:a(k,{})})]})}_(a(B,{}),document.getElementById("app"));

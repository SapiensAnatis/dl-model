import{L as S,u as F,S as N}from"./lists.7426debc.js";import{e,a3 as G,y as C,_ as y,a9 as L,aa as R,v as M,i as T,b as j,ab as $}from"./index.00b83f8a.js";import{f as E,B as H,F as P,a as q}from"./filterConfig.fb0b7ff7.js";import{G as z}from"./GlowToggle.649320c8.js";import{g as O}from"./index.e9b91058.js";import{u as Q,G as V}from"./Gallery.4876f15f.js";import{u as A}from"./useToggleState.ca36b7c7.js";/* empty css               */import{M as Y}from"./ModelIcon.932a98b8.js";import{B}from"./Box.caa4915b.js";import{a as _,b as J}from"./DialogTitle.7652f36a.js";import{I as K}from"./Close.de6bd57d.js";const f={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh","& svg":{color:"rgba(16, 16, 16, 0.8)"}},top:{display:"flex",flexWrap:"wrap",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)"},searchFilter:{marginTop:"0.2rem",display:"flex",flexDirection:"column",width:"100%",minWidth:"20rem",alignItems:"center",justifyContent:"center","& .MuiTextField-root":{justifyContent:"center"}},search:{display:"flex",width:"100%",justifyContent:"center"},title:{padding:"0.5rem 1rem",textAlign:"center",flexGrow:.1,margin:"auto"},content:{padding:"0.3rem",textAlign:"center",minHeight:"60vh"}},k=[{value:"weapon",label:"Weapon",icon:"img/appIcon/weapon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"},{value:"extra",label:"Extra"}]},{value:"chara",label:"Adventurer",icon:"img/appIcon/chara.png",options:[{value:"regular",label:"Regular"},{value:"allies",label:"Allies"},{value:"enemies",label:"Enemies"}]},{value:"dragon",label:"Dragon",icon:"img/appIcon/dragon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"}]},{value:"boss",label:"Boss",icon:"img/appIcon/boss.png",options:[{value:"archdemon",label:"Archdemon",icon:"img/appIcon/archdemon.png"},{value:"agito",label:"Agito",icon:"img/appIcon/agito.png"},{value:"raid",label:"Raid",icon:"img/appIcon/raid.png"},{value:"void",label:"Void",icon:"img/appIcon/void.png"},{value:"others",label:"Others"}]}],U=o=>{let t=k;const n=[];return o.forEach(r=>{const a=t[r],i=a==null?void 0:a.value;i!==void 0&&(n.push(i),t=a.options)}),n.join("-")},X={Left:"\u21D0",Right:"\u21D2"},I=({side:o,onClick:t})=>e("div",{className:"WeaponButton-addBtn","data-side":o,onClick:t,children:X[o]});const Z=o=>o.stopPropagation();function ee({id:o,name:t,noIcon:n,onClick:r}){const[a,i]=A(!1),[l,d]=A(!1),v=!n&&e(Y,{modelId:o,className:"WeaponButton-icon"}),p=a&&e("div",{className:"WeaponButton-grip",onClick:Z,children:[e("input",{type:"checkbox",id:`grip-${o}`,checked:l,onChange:d}),e("label",{htmlFor:`grip-${o}`,children:"Reverse Grip"})]}),u=m=>{m.stopPropagation();const{side:s}=m.currentTarget.dataset;r({side:s,id:o,name:t,reverse:l})};return e("div",{className:"WeaponButton",children:[v,a?e("div",{className:"WeaponButton-add",onClick:i,children:[p,e("div",{className:"WeaponButton-addBtnGroup",children:[e(I,{side:"Left",onClick:u}),e("div",{children:"ADD"}),e(I,{side:"Right",onClick:u})]})]}):e("div",{className:"WeaponButton-name",onClick:i,children:t})]})}const oe=[];function ne({target:o,content:t,searchQuery:n,searchAll:r,filter:a=oe}){var m;const i=(m=Q(s=>s[t]))!=null?m:[],[l,d]=C([]),[v,p]=C(!1);y(()=>d(i),[t]),y(()=>{p(!0);async function s(){if(r)return n?await L(n):i;const c=await R(i,n);return await E(c,a)}setTimeout(async()=>{const c=await s();d(c),p(!1)})},[n,a,r]);const u=async({side:s,id:c,name:x,reverse:b})=>{var w;const g=`jWeapon${s[0]}`;if(!(o!=null&&o.bones.list.includes(g)))return;const h=await M.loadDLModel(c);h.userData.name=x,b&&(h.rotation.y=Math.PI),(w=o.attachment[g])==null||w.forEach(D=>D.dispose()),o.attach(h,g),h.outline.code=o.outline.code,h.material.code=o.material.code,T(h)};return i.length&&!v?e(V,{list:l,component:ee,onClick:u}):e(S,{})}var ae=G(ne);const W=[];function fe({target:o}){const{activeModel:t}=j();o!=null||(o=t);const{indices:n,setIndex:r,showFilter:a,toggleFilter:i,searchAll:l,toggleSearchAll:d}=$(),v=!!indexedDB,[p,u]=C(""),m=F(p,500),[s,c]=C(W),x=U(n),b=O(x);y(()=>c(W),[a,n]),y(()=>{u(""),l&&d()},[n]);const g=n.join();return e(B,{className:"AddWeapon",sx:f.root,children:[e(B,{sx:f.top,children:[e(_,{sx:f.title,children:"Add Weapon"}),e(H,{options:k,selectedIndices:n,setIndex:r}),e(B,{sx:f.searchFilter,children:[e(B,{sx:f.search,children:[v&&e(z,{type:"text",value:"All",checked:l,onClick:d}),e(N,{query:p,onChange:u},g),b&&!l&&e(K,{onClick:i,size:"large",children:e(P,{})})]}),!l&&a&&b&&e(q,{config:b,onChange:c},g)]})]}),e(J,{sx:f.content,children:e(ae,{target:o,searchQuery:m,filter:s,content:x,searchAll:l})})]})}export{fe as A};

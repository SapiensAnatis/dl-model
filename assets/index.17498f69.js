import{a as s,j as n,F as c,y as h,n as y,V as B,v as C}from"./index.f8c4de94.js";import{u as T}from"./useKey.862f7c7f.js";import{A as p}from"./Accordion.10f5dcc5.js";/* empty css               */import{M as b}from"./ModelIcon.b4033d7c.js";import{B as M}from"./Button.c93f2412.js";import{C as D}from"./Check.f49fe084.js";import{B as I}from"./Box.27770192.js";import{a as N,b as k}from"./DialogTitle.0f83679b.js";import"./useToggleState.f480992e.js";import"./createSvgIcon.9b983f02.js";import"./ButtonBase.469832f9.js";function j({list:e,label:i,defaultOpen:o=!1,onSelect:a}){return s(p,{disableGutters:!0,defaultOpen:o,className:"BoneChildren",children:[n(c,{children:i}),n(c,{children:e.map(t=>n(f,{target:t,onSelect:a},t.uniqueId))})]})}function f({target:e,onSelect:i}){if(!e)return null;const[o,a]=T();h(()=>{const r=e.addEventListener("AttachmentChanged",a);return()=>e.removeEventListener("AttachmentChanged",r)},[]),h(()=>{e.userData.name||y(e.id).then(r=>{e.userData.name=r==null?void 0:r.name,a()})},[]);const t=e.id,l=e==null?void 0:e.userData.name,x=l!=null?l:t,g=n(b,{modelId:t,alt:l!=null?l:t,className:"ModelTree-icon"}),m=B(e.attachment.list.map(r=>r.parentBone)),v=()=>i(e),u=s(c,{children:[g,n("div",{className:"target-name",children:x}),n(M,{title:"Select",variant:"contained",onClick:v,children:n(D,{})})]});return m.length?s(p,{disableGutters:!0,className:"ModelTree",children:[u,n(c,{children:m.map(r=>n(j,{defaultOpen:m.length===1,label:r,onSelect:i,list:e.attachment[r]}))})]},o):n("div",{className:"ModelTree",children:u},o)}const d={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function S({onSelect:e=console.log,onAfterSelect:i}){const o=C.model,a=t=>{e(t),i==null||i()};return s(I,{sx:d.root,className:"TargetPicker",children:[n(N,{sx:d.title,children:"Select Target"}),n(k,{sx:d.content,children:o.length?o.map(t=>n(f,{target:t,onSelect:a},t.uniqueId)):"No model"})]})}export{S as default};

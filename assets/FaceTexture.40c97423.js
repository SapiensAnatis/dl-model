var N=Object.defineProperty,Q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var L=(a,e,t)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,v=(a,e)=>{for(var t in e||(e={}))P.call(e,t)&&L(a,t,e[t]);if(w)for(var t of w(e))$.call(e,t)&&L(a,t,e[t]);return a},D=(a,e)=>Q(a,G(e));import{p as i,d as S,j as s,a9 as q,F as z,a as g}from"./index.1535c0ce.js";import{u as E}from"./useToggleState.6db2f030.js";import{L as R,u as W,S as A}from"./lists.5acc2258.js";import{F as H}from"./FacePartSelector.e75918e3.js";import{f as J,c as K,B as O,F as U,a as V}from"./filterConfig.b4a0347d.js";import{u as X,G as Y}from"./Gallery.f60e5bd5.js";import{M as Z,C as _,c as ee,s as n,u as I}from"./styles.cb9ced60.js";import{B as F}from"./Box.ffac8dbc.js";import{a as te,b as ae}from"./DialogTitle.8cc13dc5.js";import{I as se}from"./Close.ec71d757.js";function oe({compact:a,searchQuery:e,filter:t,content:u,onSelect:r}){var x;const d=(x=X(o=>o[`chara-${u}`]))!=null?x:[],m=d.filter(({id:o})=>!o.endsWith("h")),[h,c]=i([]),[y,p]=i(!1);return S(()=>c(m),[u]),S(()=>{p(!0);async function o(){const l=e?await q(e):m;return await J(l,t)}setTimeout(async()=>{const l=await o();c(l),p(!1)})},[e,t]),d.length&&!y?s(Y,{list:h,component:a?Z:_,onClick:r}):s(R,{})}const B=ee.find(({value:a})=>a==="chara").options,re=[],ne=D(v({},n.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function Fe({compact:a,onSelect:e,onAfterSelect:t}){const u=!!indexedDB,[r,d]=i(0),m=(b,f)=>d(f),[h,c]=i(""),y=W(h,500);S(()=>{c("")},[r]);const[p,x]=i(re),[o,l]=i("Both"),[M,j]=E(!0),C=B[r].value==="regular"&&K,T=a||I("(max-width:640px)")||I("(max-height:640px)"),k=z(b=>{const{value:f}=b.currentTarget.dataset;o!=="Eyes"&&e(f,"mouth"),o!=="Mouth"&&e(f,"eye"),t==null||t()},[o]);return g(F,{className:"FaceTexture",sx:n.root,children:[g(F,{sx:ne,children:[s(te,{sx:n.title,children:"Select Texture"}),s(H,{value:o,onClick:l}),s(O,{options:B,selectedIndices:[r],setIndex:m}),g(F,{sx:n.searchFilter,children:[g(F,{sx:n.search,children:[s(A,{query:h,onChange:c,placeholder:u?"Search All":"Search"},r[0]),C&&s(se,{onClick:j,size:"large",children:s(U,{})})]}),M&&C&&s(V,{config:C,onChange:x,compact:T})]})]}),s(ae,{sx:n.content,children:s(oe,{compact:T,searchQuery:y,filter:p,content:B[r].value,onSelect:k})})]})}export{Fe as F};

import{a as i,h as C,o as e,T as D}from"./jsxRuntime.module-9121d302.js";import{u as I}from"./useToggleState-3fb9d00b.js";import{L as M,u as k,S as N}from"./lists-8bda5b9b.js";import{F as Q}from"./FacePartSelector-ce967422.js";import{f as G,c as P,B as $,F as q,a as z}from"./filterConfig-b75132fe.js";import{u as E,G as R}from"./Gallery-44e2f555.js";import{M as W,C as j,c as A,s as n,u as S}from"./styles-f5bd6115.js";import{s as H}from"./index-f60cacb5.js";import{B as x}from"./Box-9fcd2e2c.js";import{a as J,b as K}from"./DialogTitle-b23f8be5.js";import{I as O}from"./Close-0ad613b5.js";function U({compact:c,searchQuery:s,filter:r,content:u,onSelect:a}){const d=E(o=>o[`chara-${u}`])??[],m=d.filter(({id:o})=>!o.endsWith("h")),[h,l]=i([]),[g,p]=i(!1);return C(()=>l(m),[u]),C(()=>{p(!0);async function o(){const t=s?await H(s):m;return await G(t,r)}setTimeout(async()=>{const t=await o();l(t),p(!1)})},[s,r]),d.length&&!g?e(R,{list:h,component:c?W:j,onClick:a}):e(M,{})}const y=A.find(({value:c})=>c==="chara").options,V=[],X={...n.top,"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}};function ce({compact:c,onSelect:s,onAfterSelect:r}){const u=!!indexedDB,[a,d]=i(0),m=(T,f)=>d(f),[h,l]=i(""),g=k(h,500);C(()=>{l("")},[a]);const[p,o]=i(V),[t,b]=i("Both"),[w,L]=I(!0),F=y[a].value==="regular"&&P,B=c||S("(max-width:640px)")||S("(max-height:640px)"),v=D(T=>{const{value:f}=T.currentTarget.dataset;t!=="Eyes"&&s(f,"mouth"),t!=="Mouth"&&s(f,"eye"),r==null||r()},[t]);return e(x,{className:"FaceTexture",sx:n.root,children:[e(x,{sx:X,children:[e(J,{sx:n.title,children:"Select Texture"}),e(Q,{value:t,onClick:b}),e($,{options:y,selectedIndices:[a],setIndex:m}),e(x,{sx:n.searchFilter,children:[e(x,{sx:n.search,children:[e(N,{query:h,onChange:l,placeholder:u?"Search All":"Search"},a[0]),F&&e(O,{onClick:L,size:"large",children:e(q,{})})]}),w&&F&&e(z,{config:F,onChange:o,compact:B})]})]}),e(K,{sx:n.content,children:e(U,{compact:B,searchQuery:g,filter:p,content:y[a].value,onSelect:v})})]})}export{ce as F};

import{m as n,y as B,e,a8 as D,A as I}from"./index.bbdc88de.js";import{u as M}from"./useToggleState.765c3168.js";import{L as k,u as N,S as Q}from"./lists.c0a7edd8.js";import{F as G}from"./FacePartSelector.5a343307.js";import{f as P,c as $,B as q,F as z,a as A}from"./filterConfig.3aa11b27.js";import{u as E,G as R}from"./Gallery.a7eb8310.js";import{M as W,C as j,c as H,s as r,u as b}from"./styles.0d1cb164.js";import{B as g}from"./Box.b3b6d93c.js";import{a as J,b as K}from"./DialogTitle.e11d84a3.js";import{I as O}from"./Close.8b779315.js";function U({compact:i,searchQuery:s,filter:o,content:u,onSelect:a}){var f;const d=(f=E(t=>t[`chara-${u}`]))!=null?f:[],m=d.filter(({id:t})=>!t.endsWith("h")),[h,c]=n([]),[y,p]=n(!1);return B(()=>c(m),[u]),B(()=>{p(!0);async function t(){const l=s?await D(s):m;return await P(l,o)}setTimeout(async()=>{const l=await t();c(l),p(!1)})},[s,o]),d.length&&!y?e(R,{list:h,component:i?W:j,onClick:a}):e(k,{})}const C=H.find(({value:i})=>i==="chara").options,V=[],X={...r.top,"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}};function ie({compact:i,onSelect:s,onAfterSelect:o}){const u=!!indexedDB,[a,d]=n(0),m=(T,x)=>d(x),[h,c]=n(""),y=N(h,500);B(()=>{c("")},[a]);const[p,f]=n(V),[t,l]=n("Both"),[w,L]=M(!0),F=C[a].value==="regular"&&$,S=i||b("(max-width:640px)")||b("(max-height:640px)"),v=I(T=>{const{value:x}=T.currentTarget.dataset;t!=="Eyes"&&s(x,"mouth"),t!=="Mouth"&&s(x,"eye"),o==null||o()},[t]);return e(g,{className:"FaceTexture",sx:r.root,children:[e(g,{sx:X,children:[e(J,{sx:r.title,children:"Select Texture"}),e(G,{value:t,onClick:l}),e(q,{options:C,selectedIndices:[a],setIndex:m}),e(g,{sx:r.searchFilter,children:[e(g,{sx:r.search,children:[e(Q,{query:h,onChange:c,placeholder:u?"Search All":"Search"},a[0]),F&&e(O,{onClick:L,size:"large",children:e(z,{})})]}),w&&F&&e(A,{config:F,onChange:f,compact:S})]})]}),e(K,{sx:r.content,children:e(U,{compact:S,searchQuery:y,filter:p,content:C[a].value,onSelect:v})})]})}export{ie as F};

import{L as F,u as N,S as j}from"./lists.2b1c450e.js";import{j as o,a as d,a4 as G,m as y,y as W,aa as L,ab as R,v as M,i as T,b as $,ac as z}from"./index.4d2bee0c.js";import{f as E,B as H,F as P,a as q}from"./filterConfig.eac7c6a5.js";import{G as O}from"./GlowToggle.547a70a7.js";import{g as Q}from"./index.307a6ae6.js";import{u as V,G as Y}from"./Gallery.80030fc0.js";import{u as k}from"./useToggleState.44138f4a.js";/* empty css               */import{M as J}from"./ModelIcon.497554d4.js";import{B as w}from"./Box.2d3d7b24.js";import{a as K,b as U}from"./DialogTitle.3ef5a3e7.js";import{I as X}from"./Close.b54953c1.js";const v={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh","& svg":{color:"rgba(16, 16, 16, 0.8)"}},top:{display:"flex",flexWrap:"wrap",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)"},searchFilter:{marginTop:"0.2rem",display:"flex",flexDirection:"column",width:"100%",minWidth:"20rem",alignItems:"center",justifyContent:"center","& .MuiTextField-root":{justifyContent:"center"}},search:{display:"flex",width:"100%",justifyContent:"center"},title:{padding:"0.5rem 1rem",textAlign:"center",flexGrow:.1,margin:"auto"},content:{padding:"0.3rem",textAlign:"center",minHeight:"60vh"}},D=[{value:"weapon",label:"Weapon",icon:"img/appIcon/weapon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"},{value:"extra",label:"Extra"}]},{value:"chara",label:"Adventurer",icon:"img/appIcon/chara.png",options:[{value:"regular",label:"Regular"},{value:"allies",label:"Allies"},{value:"enemies",label:"Enemies"}]},{value:"dragon",label:"Dragon",icon:"img/appIcon/dragon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"}]},{value:"boss",label:"Boss",icon:"img/appIcon/boss.png",options:[{value:"archdemon",label:"Archdemon",icon:"img/appIcon/archdemon.png"},{value:"agito",label:"Agito",icon:"img/appIcon/agito.png"},{value:"raid",label:"Raid",icon:"img/appIcon/raid.png"},{value:"void",label:"Void",icon:"img/appIcon/void.png"},{value:"others",label:"Others"}]}],Z=e=>{let t=D;const n=[];return e.forEach(s=>{const a=t[s],i=a==null?void 0:a.value;i!==void 0&&(n.push(i),t=a.options)}),n.join("-")},_={Left:"\u21D0",Right:"\u21D2"},A=({side:e,onClick:t})=>o("div",{className:"WeaponButton-addBtn","data-side":e,onClick:t,children:_[e]});const ee=e=>e.stopPropagation();function oe({id:e,name:t,noIcon:n,onClick:s}){const[a,i]=k(!1),[r,p]=k(!1),b=!n&&o(J,{modelId:e,className:"WeaponButton-icon"}),u=a&&d("div",{className:"WeaponButton-grip",onClick:ee,children:[o("input",{type:"checkbox",id:`grip-${e}`,checked:r,onChange:p}),o("label",{htmlFor:`grip-${e}`,children:"Reverse Grip"})]}),m=g=>{g.stopPropagation();const{side:l}=g.currentTarget.dataset;s({side:l,id:e,name:t,reverse:r})};return d("div",{className:"WeaponButton",children:[b,a?d("div",{className:"WeaponButton-add",onClick:i,children:[u,d("div",{className:"WeaponButton-addBtnGroup",children:[o(A,{side:"Left",onClick:m}),o("div",{children:"ADD"}),o(A,{side:"Right",onClick:m})]})]}):o("div",{className:"WeaponButton-name",onClick:i,children:t})]})}const ne=[];function ae({target:e,content:t,searchQuery:n,searchAll:s,filter:a=ne}){var g;const i=(g=V(l=>l[t]))!=null?g:[],[r,p]=y([]),[b,u]=y(!1);W(()=>p(i),[t]),W(()=>{u(!0);async function l(){if(s)return n?await L(n):i;const c=await R(i,n);return await E(c,a)}setTimeout(async()=>{const c=await l();p(c),u(!1)})},[n,a,s]);const m=async({side:l,id:c,name:B,reverse:x})=>{var C;const h=`jWeapon${l[0]}`;if(!(e!=null&&e.bones.list.includes(h)))return;const f=await M.loadDLModel(c);f.userData.name=B,x&&(f.rotation.y=Math.PI),(C=e.attachment[h])==null||C.forEach(S=>S.dispose()),e.attach(f,h),f.outline.code=e.outline.code,f.material.code=e.material.code,T(f)};return i.length&&!b?o(Y,{list:r,component:oe,onClick:m}):o(F,{})}var te=G(ae);const I=[];function ve({target:e}){const{activeModel:t}=$();e!=null||(e=t);const{indices:n,setIndex:s,showFilter:a,toggleFilter:i,searchAll:r,toggleSearchAll:p}=z(),b=!!indexedDB,[u,m]=y(""),g=N(u,500),[l,c]=y(I),B=Z(n),x=Q(B);W(()=>c(I),[a,n]),W(()=>{m(""),r&&p()},[n]);const h=n.join();return d(w,{className:"AddWeapon",sx:v.root,children:[d(w,{sx:v.top,children:[o(K,{sx:v.title,children:"Add Weapon"}),o(H,{options:D,selectedIndices:n,setIndex:s}),d(w,{sx:v.searchFilter,children:[d(w,{sx:v.search,children:[b&&o(O,{type:"text",value:"All",checked:r,onClick:p}),o(j,{query:u,onChange:m},h),x&&!r&&o(X,{onClick:i,size:"large",children:o(P,{})})]}),!r&&a&&x&&o(q,{config:x,onChange:c},h)]})]}),o(U,{sx:v.content,children:o(te,{target:e,searchQuery:g,filter:l,content:B,searchAll:r})})]})}export{ve as A};

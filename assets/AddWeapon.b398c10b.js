import{L as S,u as F,S as N}from"./lists.d57a550a.js";import{e,a2 as G,n as C,h as y,a8 as L,a9 as R,v as M,i as T,b as j,aa as $}from"./index.8890f67e.js";import{f as E,B as H,F as P,a as q}from"./filterConfig.cbebd578.js";import{G as z}from"./GlowToggle.00233a42.js";import{g as O}from"./index.0c1716d6.js";import{u as Q,G as V}from"./Gallery.498c624d.js";import{u as A}from"./useToggleState.59f50837.js";/* empty css               */import{M as Y}from"./ModelIcon.00cd3084.js";import{B}from"./Box.ce35e29d.js";import{a as J,b as K}from"./DialogTitle.551f27a6.js";import{I as U}from"./Close.19592e53.js";const f={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh","& svg":{color:"rgba(16, 16, 16, 0.8)"}},top:{display:"flex",flexWrap:"wrap",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)"},searchFilter:{marginTop:"0.2rem",display:"flex",flexDirection:"column",width:"100%",minWidth:"20rem",alignItems:"center",justifyContent:"center","& .MuiTextField-root":{justifyContent:"center"}},search:{display:"flex",width:"100%",justifyContent:"center"},title:{padding:"0.5rem 1rem",textAlign:"center",flexGrow:.1,margin:"auto"},content:{padding:"0.3rem",textAlign:"center",minHeight:"60vh"}},k=[{value:"weapon",label:"Weapon",icon:"img/appIcon/weapon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"},{value:"extra",label:"Extra"}]},{value:"chara",label:"Adventurer",icon:"img/appIcon/chara.png",options:[{value:"regular",label:"Regular"},{value:"allies",label:"Allies"},{value:"enemies",label:"Enemies"}]},{value:"dragon",label:"Dragon",icon:"img/appIcon/dragon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"}]},{value:"boss",label:"Boss",icon:"img/appIcon/boss.png",options:[{value:"archdemon",label:"Archdemon",icon:"img/appIcon/archdemon.png"},{value:"agito",label:"Agito",icon:"img/appIcon/agito.png"},{value:"raid",label:"Raid",icon:"img/appIcon/raid.png"},{value:"void",label:"Void",icon:"img/appIcon/void.png"},{value:"others",label:"Others"}]}],X=o=>{let t=k;const n=[];return o.forEach(c=>{const a=t[c],i=a==null?void 0:a.value;i!==void 0&&(n.push(i),t=a.options)}),n.join("-")},Z={Left:"\u21D0",Right:"\u21D2"},I=({side:o,onClick:t})=>e("div",{className:"WeaponButton-addBtn","data-side":o,onClick:t,children:Z[o]});const _=o=>o.stopPropagation();function ee({id:o,name:t,noIcon:n,onClick:c}){const[a,i]=A(!1),[l,d]=A(!1),v=!n&&e(Y,{modelId:o,className:"WeaponButton-icon"}),p=a&&e("div",{className:"WeaponButton-grip",onClick:_,children:[e("input",{type:"checkbox",id:`grip-${o}`,checked:l,onChange:d}),e("label",{htmlFor:`grip-${o}`,children:"Reverse Grip"})]}),m=u=>{u.stopPropagation();const{side:s}=u.currentTarget.dataset;c({side:s,id:o,name:t,reverse:l})};return e("div",{className:"WeaponButton",children:[v,a?e("div",{className:"WeaponButton-add",onClick:i,children:[p,e("div",{className:"WeaponButton-addBtnGroup",children:[e(I,{side:"Left",onClick:m}),e("div",{children:"ADD"}),e(I,{side:"Right",onClick:m})]})]}):e("div",{className:"WeaponButton-name",onClick:i,children:t})]})}const oe=[];function ne({target:o,content:t,searchQuery:n,searchAll:c,filter:a=oe}){var u;const i=(u=Q(s=>s[t]))!=null?u:[],[l,d]=C([]),[v,p]=C(!1);return y(()=>d(i),[t]),y(()=>{p(!0);async function s(){if(c)return n?await L(n):i;const r=await R(i,n);return await E(r,a)}setTimeout(async()=>{const r=await s();d(r),p(!1)})},[n,a,c]),v?e(S,{}):e(V,{list:l,component:ee,onClick:async({side:s,id:r,name:x,reverse:b})=>{var w;const g=`jWeapon${s[0]}`;if(!(o!=null&&o.bones.list.includes(g)))return;const h=await M.loadDLModel(r);h.userData.name=x,b&&(h.rotation.y=Math.PI),(w=o.attachment[g])==null||w.forEach(D=>D.dispose()),o.attach(h,g),h.outline.code=o.outline.code,h.material.code=o.material.code,T(h)}})}const ae=G(ne),W=[];function fe({target:o}){const{activeModel:t}=j();o!=null||(o=t);const{indices:n,setIndex:c,showFilter:a,toggleFilter:i,searchAll:l,toggleSearchAll:d}=$(),v=!!indexedDB,[p,m]=C(""),u=F(p,500),[s,r]=C(W),x=X(n),b=O(x);y(()=>r(W),[a,n]),y(()=>{m(""),l&&d()},[n]);const g=n.join();return e(B,{className:"AddWeapon",sx:f.root,children:[e(B,{sx:f.top,children:[e(J,{sx:f.title,children:"Add Weapon"}),e(H,{options:k,selectedIndices:n,setIndex:c}),e(B,{sx:f.searchFilter,children:[e(B,{sx:f.search,children:[v&&e(z,{type:"text",value:"All",checked:l,onClick:d}),e(N,{query:p,onChange:m},g),b&&!l&&e(U,{onClick:i,size:"large",children:e(P,{})})]}),!l&&a&&b&&e(q,{config:b,onChange:r},g)]})]}),e(K,{sx:f.content,children:e(ae,{target:o,searchQuery:u,filter:s,content:x,searchAll:l})})]})}export{fe as A};

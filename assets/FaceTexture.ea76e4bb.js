import{y as n,s as B,o as e,a7 as D,q as I}from"./index.069d4c3c.js";import{u as M}from"./useToggleState.4edeb9c0.js";import{L as k,u as N,S as Q}from"./lists.b40b4c0c.js";import{F as q}from"./FacePartSelector.77aaf5e6.js";import{f as G,c as P,B as $,F as z,a as E}from"./filterConfig.669c86b5.js";import{u as R,G as W}from"./Gallery.2e2bfbdd.js";import{M as j,C as A,c as H,s as r,u as b}from"./styles.8fbb9b1c.js";import{B as g}from"./Box.49ef3a2f.js";import{a as J,b as K}from"./DialogTitle.ecd172ed.js";import{I as O}from"./Close.421acb5f.js";function U({compact:i,searchQuery:s,filter:o,content:u,onSelect:a}){var f;const d=(f=R(t=>t[`chara-${u}`]))!=null?f:[],m=d.filter(({id:t})=>!t.endsWith("h")),[h,c]=n([]),[y,p]=n(!1);return B(()=>c(m),[u]),B(()=>{p(!0);async function t(){const l=s?await D(s):m;return await G(l,o)}setTimeout(async()=>{const l=await t();c(l),p(!1)})},[s,o]),d.length&&!y?e(W,{list:h,component:i?j:A,onClick:a}):e(k,{})}const C=H.find(({value:i})=>i==="chara").options,V=[],X={...r.top,"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}};function ie({compact:i,onSelect:s,onAfterSelect:o}){const u=!!indexedDB,[a,d]=n(0),m=(T,x)=>d(x),[h,c]=n(""),y=N(h,500);B(()=>{c("")},[a]);const[p,f]=n(V),[t,l]=n("Both"),[w,L]=M(!0),F=C[a].value==="regular"&&P,S=i||b("(max-width:640px)")||b("(max-height:640px)"),v=I(T=>{const{value:x}=T.currentTarget.dataset;t!=="Eyes"&&s(x,"mouth"),t!=="Mouth"&&s(x,"eye"),o==null||o()},[t]);return e(g,{className:"FaceTexture",sx:r.root,children:[e(g,{sx:X,children:[e(J,{sx:r.title,children:"Select Texture"}),e(q,{value:t,onClick:l}),e($,{options:C,selectedIndices:[a],setIndex:m}),e(g,{sx:r.searchFilter,children:[e(g,{sx:r.search,children:[e(Q,{query:h,onChange:c,placeholder:u?"Search All":"Search"},a[0]),F&&e(O,{onClick:L,size:"large",children:e(z,{})})]}),w&&F&&e(E,{config:F,onChange:f,compact:S})]})]}),e(K,{sx:r.content,children:e(U,{compact:S,searchQuery:y,filter:p,content:C[a].value,onSelect:v})})]})}export{ie as F};

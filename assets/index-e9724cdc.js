import{h as v,v as B}from"./viewer-7c94c9c1.js";import{o as n,p as l,h as p}from"./jsxRuntime.module-9121d302.js";import{u as y}from"./useKey-ea23d921.js";import{A as h}from"./Accordion-b426e74d.js";/* empty css               */import{M as C}from"./ModelIcon-6ce365e9.js";import{a as T}from"./index-f60cacb5.js";import{B as b}from"./Button-1aaa8f1a.js";import{C as M}from"./Check-d9877cdf.js";import{a as D,b as I}from"./DialogTitle-b23f8be5.js";import{B as N}from"./Box-9fcd2e2c.js";import"./preload-helper-45408441.js";import"./three-95e0c7cb.js";import"./CopyShader-e27bbfcf.js";import"./ShaderPass-ffe7d003.js";import"./Pass-b3525e48.js";import"./_commonjsHelpers-35101cd5.js";import"./useToggleState-3fb9d00b.js";import"./createSvgIcon-f2a0048b.js";import"./ButtonBase-c56a8b38.js";function k({list:e,label:i,defaultOpen:o=!1,onSelect:a}){return n(h,{disableGutters:!0,defaultOpen:o,className:"BoneChildren",children:[n(l,{children:i}),n(l,{children:e.map(t=>n(u,{target:t,onSelect:a},t.uniqueId))})]})}function u({target:e,onSelect:i}){if(!e)return null;const[o,a]=y();p(()=>{const r=e.addEventListener("AttachmentChanged",a);return()=>e.removeEventListener("AttachmentChanged",r)},[]),p(()=>{e.userData.name||T(e.id).then(r=>{e.userData.name=r==null?void 0:r.name,a()})},[]);const t=e.id,c=e==null?void 0:e.userData.name,f=c??t,x=n(C,{modelId:t,alt:c??t,className:"ModelTree-icon"}),m=v(e.attachment.list.map(r=>r.parentBone)),g=()=>i(e),d=n(l,{children:[x,n("div",{className:"target-name",children:f}),n(b,{title:"Select",variant:"contained",onClick:g,children:n(M,{})})]});return m.length?n(h,{disableGutters:!0,className:"ModelTree",children:[d,n(l,{children:m.map(r=>n(k,{defaultOpen:m.length===1,label:r,onSelect:i,list:e.attachment[r]}))})]},o):n("div",{className:"ModelTree",children:d},o)}const s={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function R({onSelect:e=console.log,onAfterSelect:i}){const o=B.model,a=t=>{e(t),i==null||i()};return n(N,{sx:s.root,className:"TargetPicker",children:[n(D,{sx:s.title,children:"Select Target"}),n(I,{sx:s.content,children:o.length?o.map(t=>n(u,{target:t,onSelect:a},t.uniqueId)):"No model"})]})}export{R as default};

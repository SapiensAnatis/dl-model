import{a,j as r,F as c,y as u,n as T,V as M,v}from"./index.7a99b0aa.js";import{u as y}from"./useKey.1520f9e3.js";import{A as p}from"./Accordion.daeb9b69.js";/* empty css               */import{M as B}from"./ModelIcon.6f676c5c.js";import{B as w}from"./Button.0f0450b0.js";import{C}from"./Check.8f023b69.js";import{B as k}from"./Box.0b61d97a.js";import{a as A,b as D}from"./DialogTitle.022a24eb.js";import"./useToggleState.0b49d53b.js";import"./createSvgIcon.4141c5a0.js";import"./ButtonBase.bf608435.js";function I({list:e,label:t,defaultOpen:i=!1,onSelect:d}){return a(p,{disableGutters:!0,defaultOpen:i,className:"BoneChildren",children:[r(c,{children:t}),r(c,{children:e.map(o=>r(f,{target:o,onSelect:d},o.uniqueId))})]})}function f({target:e,onSelect:t}){if(!e)return null;const[i,d]=y();u(()=>{const n=e.addEventListener("AttachmentChanged",d);return()=>e.removeEventListener("AttachmentChanged",n)},[]),u(()=>{e.userData.name||T(e.id).then(n=>{e.userData.name=n==null?void 0:n.name,d()})},[]);const o=e.id,l=e==null?void 0:e.userData.name,g=l!=null?l:o,x=r(B,{modelId:o,alt:l!=null?l:o,className:"ModelTree-icon"}),m=M(e.attachment.list.map(n=>n.parentBone)),b=()=>t(e),h=a(c,{children:[x,r("div",{className:"target-name",children:g}),r(w,{title:"Select",variant:"contained",onClick:b,children:r(C,{})})]});return m.length?a(p,{disableGutters:!0,className:"ModelTree",children:[h,r(c,{children:m.map(n=>r(I,{defaultOpen:m.length===1,label:n,onSelect:t,list:e.attachment[n]}))})]},i):r("div",{className:"ModelTree",children:h},i)}const s={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function S({onSelect:e=console.log,onAfterSelect:t}){const i=v.model,d=o=>{e(o),t==null||t()};return a(k,{sx:s.root,className:"TargetPicker",children:[r(A,{sx:s.title,children:"Select Target"}),r(D,{sx:s.content,children:i.length?i.map(o=>r(f,{target:o,onSelect:d},o.uniqueId)):"No model"})]})}export{S as default};

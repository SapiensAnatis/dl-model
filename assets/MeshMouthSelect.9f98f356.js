var W=Object.defineProperty,A=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var k=(t,o,e)=>o in t?W(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,h=(t,o)=>{for(var e in o||(o={}))U.call(o,e)&&k(t,e,o[e]);if(m)for(var e of m(o))I.call(o,e)&&k(t,e,o[e]);return t},$=(t,o)=>A(t,Z(o));var M=(t,o)=>{var e={};for(var n in t)U.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&I.call(t,n)&&(e[n]=t[n]);return e};import{a6 as q,a7 as _,j as i,a8 as G,a as B}from"./index.1359323b.js";import{B as J}from"./Box.27808658.js";import{B as K}from"./Button.2aaca719.js";const L=t=>`${_}/${t}/${t}.png`,Q=[1,2,3,4,5,6,7,8,9],y=64,V=Q.map(t=>{if(t===1)return[-280,-170];const o=(t-2)%4,e=Math.floor(t/6),n=-(24+o*128),s=-(298+e*128);return[n,s]}),j=(t,o)=>{const[e,n]=V[o-1],[s,a]=q(t),c=s*128,r=a*128,d=e-c,u=n+r;return{x:d,y:u}},tt=(t,o)=>{const{x:e,y:n}=j(t,o),s=n-y/2;return{x:e,y:s}};function D(s){var a=s,{texture:t,x:o,y:e}=a,n=M(a,["texture","x","y"]);const r={backgroundImage:`url(${L(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${o}px ${e}px`,width:y,height:y/2};return i("div",h({style:r},n))}function ut(n){var s=n,{texture:t,index:o}=s,e=M(s,["texture","index"]);const{x:a,y:c}=j(t,o);return i(D,h({texture:t,x:a,y:c,className:"EyeBox"},e))}function ht(n){var s=n,{texture:t,index:o}=s,e=M(s,["texture","index"]);const{x:a,y:c}=tt(t,o);return i(D,h({texture:t,x:a,y:c,className:"EyeBox"},e))}const R=t=>{let o=t[0],e=t[0];return t.forEach(n=>{o=n<o?n:o,e=n>e?n:e}),[o,e]},et=t=>t.map(o=>{const e=o.geometry.attributes.uv.array,n=e.filter((u,x)=>x%2===0),s=e.filter((u,x)=>x%2===1),[a,c]=R(n),[r,d]=R(s);return{u:[a,c],v:[r,d]}});const ot=t=>`${_}/${t}/${G(t)}.png`,b=1024,l=160;function nt({id:t,uvList:o,onClick:e,part:n}){const s=ot(t).replace(">",""),[a,c]=o[0].u,[r,d]=o[0].v,u=c-a,x=d-r,X=u*b,z=x*b,w=X/l,g=b/w,f=z/w,C={width:l,height:f,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},P={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${g}px ${g}px`,width:l,height:f},O=({u:p,v})=>{const S=p[1]-p[0]!==u,Y=p[0],H=v[0],E=Y*g,F=H*g,T=S?(l-f)/2:0;return S?{width:f,height:l,"&::after":$(h({},P),{width:f,height:l,backgroundPosition:`left -${E}px bottom -${F}px`,transform:`rotate(90deg) translate(-${T}px, -${T}px)`,position:"absolute"})}:{width:l,height:f,position:"relative","&::after":$(h({},P),{backgroundPosition:`left -${E}px bottom -${F}px`})}};return B("div",{className:"MeshFaceButton",children:[o.map((p,v)=>i("div",{style:C,onClick:e,"data-index":v+1,"data-part":n,children:i(J,{sx:O(p)})})),i(K,{"data-part":n,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const st=([t,...o])=>`${t.toUpperCase()}${o.join("")}`;function N({target:t,onSelect:o,part:e}){var c,r;const n=(c=t==null?void 0:t.face)==null?void 0:c[`${e}List`];if(!n)return null;const s=(r=t.userData[`${e}Uv`])!=null?r:et(n);t.userData[`${e}Uv`]=s;const a=d=>{const{index:u,part:x}=d.currentTarget.dataset;o(parseInt(u),x)};return n&&B("div",{className:"MeshPartSelect",children:[B("h3",{children:["Select ",st(e)]}),i(nt,{id:t.id,uvList:s,onClick:a,part:e})]})}const dt=t=>i(N,h({part:"eye"},t)),xt=t=>i(N,h({part:"mouth"},t));export{ut as E,ht as M,ot as a,dt as b,xt as c,et as g,Q as i};

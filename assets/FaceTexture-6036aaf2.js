import{n as i,h as C,o as e,a7 as D,T as I}from"./index-43909fc9.js";import{u as M}from"./useToggleState-1757e6b3.js";import{L as k,u as N,S as Q}from"./lists-82f6e2e5.js";import{F as G}from"./FacePartSelector-09689c16.js";import{f as P,c as $,B as q,F as z,a as E}from"./filterConfig-4dc2ed2b.js";import{u as R,G as W}from"./Gallery-d980bbd9.js";import{M as j,C as A,c as H,s as n,u as S}from"./styles-38a8ffa6.js";import{B as x}from"./Box-a8123e06.js";import{a as J,b as K}from"./DialogTitle-9448bc2b.js";import{I as O}from"./Close-23e06b1d.js";function U({compact:c,searchQuery:o,filter:r,content:u,onSelect:a}){const d=R(s=>s[`chara-${u}`])??[],h=d.filter(({id:s})=>!s.endsWith("h")),[m,l]=i([]),[g,p]=i(!1);return C(()=>l(h),[u]),C(()=>{p(!0);async function s(){const t=o?await D(o):h;return await P(t,r)}setTimeout(async()=>{const t=await s();l(t),p(!1)})},[o,r]),d.length&&!g?e(W,{list:m,component:c?j:A,onClick:a}):e(k,{})}const y=H.find(({value:c})=>c==="chara").options,V=[],X={...n.top,"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}};function ie({compact:c,onSelect:o,onAfterSelect:r}){const u=!!indexedDB,[a,d]=i(0),h=(T,f)=>d(f),[m,l]=i(""),g=N(m,500);C(()=>{l("")},[a]);const[p,s]=i(V),[t,b]=i("Both"),[w,L]=M(!0),F=y[a].value==="regular"&&$,B=c||S("(max-width:640px)")||S("(max-height:640px)"),v=I(T=>{const{value:f}=T.currentTarget.dataset;t!=="Eyes"&&o(f,"mouth"),t!=="Mouth"&&o(f,"eye"),r==null||r()},[t]);return e(x,{className:"FaceTexture",sx:n.root,children:[e(x,{sx:X,children:[e(J,{sx:n.title,children:"Select Texture"}),e(G,{value:t,onClick:b}),e(q,{options:y,selectedIndices:[a],setIndex:h}),e(x,{sx:n.searchFilter,children:[e(x,{sx:n.search,children:[e(Q,{query:m,onChange:l,placeholder:u?"Search All":"Search"},a[0]),F&&e(O,{onClick:L,size:"large",children:e(z,{})})]}),w&&F&&e(E,{config:F,onChange:s,compact:B})]})]}),e(K,{sx:n.content,children:e(U,{compact:B,searchQuery:g,filter:p,content:y[a].value,onSelect:v})})]})}export{ie as F};

import{L as S,u as F,S as N}from"./lists.2efbafd6.js";import{e,a3 as G,m as w,y,a9 as L,aa as R,v as j,i as M,a as T,ab as $}from"./index.223bc57e.js";import{f as z,B as E,F as H,a as P}from"./filterConfig.91ae4cec.js";import{G as q}from"./GlowToggle.1b7ac5b6.js";import{g as O}from"./index.c0780612.js";import{u as Q,G as V}from"./Gallery.a2146396.js";import{u as C}from"./useToggleState.c859dcd8.js";/* empty css               */import{M as Y}from"./ModelIcon.ff04347d.js";import{B}from"./Box.d3a54034.js";import{a as J,b as K}from"./DialogTitle.3a561e84.js";import{I as U}from"./Close.938352c4.js";const f={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh","& svg":{color:"rgba(16, 16, 16, 0.8)"}},top:{display:"flex",flexWrap:"wrap",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)"},searchFilter:{marginTop:"0.2rem",display:"flex",flexDirection:"column",width:"100%",minWidth:"20rem",alignItems:"center",justifyContent:"center","& .MuiTextField-root":{justifyContent:"center"}},search:{display:"flex",width:"100%",justifyContent:"center"},title:{padding:"0.5rem 1rem",textAlign:"center",flexGrow:.1,margin:"auto"},content:{padding:"0.3rem",textAlign:"center",minHeight:"60vh"}},I=[{value:"weapon",label:"Weapon",icon:"img/appIcon/weapon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"},{value:"extra",label:"Extra"}]},{value:"chara",label:"Adventurer",icon:"img/appIcon/chara.png",options:[{value:"regular",label:"Regular"},{value:"allies",label:"Allies"},{value:"enemies",label:"Enemies"}]},{value:"dragon",label:"Dragon",icon:"img/appIcon/dragon.png",options:[{value:"regular",label:"Regular"},{value:"special",label:"Special"}]},{value:"boss",label:"Boss",icon:"img/appIcon/boss.png",options:[{value:"archdemon",label:"Archdemon",icon:"img/appIcon/archdemon.png"},{value:"agito",label:"Agito",icon:"img/appIcon/agito.png"},{value:"raid",label:"Raid",icon:"img/appIcon/raid.png"},{value:"void",label:"Void",icon:"img/appIcon/void.png"},{value:"others",label:"Others"}]}],X=o=>{let a=I;const n=[];return o.forEach(s=>{const t=a[s],i=t==null?void 0:t.value;i!==void 0&&(n.push(i),a=t.options)}),n.join("-")},Z={Left:"\u21D0",Right:"\u21D2"},k=({side:o,onClick:a})=>e("div",{className:"WeaponButton-addBtn","data-side":o,onClick:a,children:Z[o]});const _=o=>o.stopPropagation();function ee({id:o,name:a,noIcon:n,onClick:s}){const[t,i]=C(!1),[r,d]=C(!1),v=!n&&e(Y,{modelId:o,className:"WeaponButton-icon"}),p=t&&e("div",{className:"WeaponButton-grip",onClick:_,children:[e("input",{type:"checkbox",id:`grip-${o}`,checked:r,onChange:d}),e("label",{htmlFor:`grip-${o}`,children:"Reverse Grip"})]}),u=m=>{m.stopPropagation();const{side:l}=m.currentTarget.dataset;s({side:l,id:o,name:a,reverse:r})};return e("div",{className:"WeaponButton",children:[v,t?e("div",{className:"WeaponButton-add",onClick:i,children:[p,e("div",{className:"WeaponButton-addBtnGroup",children:[e(k,{side:"Left",onClick:u}),e("div",{children:"ADD"}),e(k,{side:"Right",onClick:u})]})]}):e("div",{className:"WeaponButton-name",onClick:i,children:a})]})}const oe=[];function ne({target:o,content:a,searchQuery:n,searchAll:s,filter:t=oe}){var m;const i=(m=Q(l=>l[a]))!=null?m:[],[r,d]=w([]),[v,p]=w(!1);y(()=>d(i),[a]),y(()=>{p(!0);async function l(){if(s)return n?await L(n):i;const c=await R(i,n);return await z(c,t)}setTimeout(async()=>{const c=await l();d(c),p(!1)})},[n,t,s]);const u=async({side:l,id:c,name:x,reverse:b})=>{var W;const g=`jWeapon${l[0]}`;if(!(o!=null&&o.bones.list.includes(g)))return;const h=await j.loadDLModel(c);h.userData.name=x,b&&(h.rotation.y=Math.PI),(W=o.attachment[g])==null||W.forEach(D=>D.dispose()),o.attach(h,g),h.outline.code=o.outline.code,h.material.code=o.material.code,M(h)};return i.length&&!v?e(V,{list:r,component:ee,onClick:u}):e(S,{})}var te=G(ne);const A=[];function fe({target:o}){const{activeModel:a}=T();o!=null||(o=a);const{indices:n,setIndex:s,showFilter:t,toggleFilter:i,searchAll:r,toggleSearchAll:d}=$(),v=!!indexedDB,[p,u]=w(""),m=F(p,500),[l,c]=w(A),x=X(n),b=O(x);y(()=>c(A),[t,n]),y(()=>{u(""),r&&d()},[n]);const g=n.join();return e(B,{className:"AddWeapon",sx:f.root,children:[e(B,{sx:f.top,children:[e(J,{sx:f.title,children:"Add Weapon"}),e(E,{options:I,selectedIndices:n,setIndex:s}),e(B,{sx:f.searchFilter,children:[e(B,{sx:f.search,children:[v&&e(q,{type:"text",value:"All",checked:r,onClick:d}),e(N,{query:p,onChange:u},g),b&&!r&&e(U,{onClick:i,size:"large",children:e(H,{})})]}),!r&&t&&b&&e(P,{config:b,onChange:c},g)]})]}),e(K,{sx:f.content,children:e(te,{target:o,searchQuery:m,filter:l,content:x,searchAll:r})})]})}export{fe as A};

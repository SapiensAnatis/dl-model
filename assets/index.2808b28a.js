import{ad as H,e as n,m as v,y as b,j as u,k as g,H as O,n as W,ae as E,v as j}from"./index.bbdc88de.js";import{L as V,W as L,u as R,S as F}from"./lists.c0a7edd8.js";import{S as x}from"./Stretcher.24b93169.js";import{a as _,b as Q,T as K}from"./TabBar.0dc934e6.js";import{B as f}from"./Button.c1282d81.js";/* empty css               */import{h as Y,M as X}from"./ModelIcon.1a6d0578.js";import{G as N,u as h}from"./Gallery.a7eb8310.js";import{s as J,g as Z}from"./aniFunction.01c6a4bc.js";import{S as q}from"./Selector.d04e158a.js";import{u as ee}from"./useKey.e8e745e6.js";import{U as ne,f as te}from"./file2dataURL.6b6bce20.js";import{u as ie}from"./useToggleState.765c3168.js";import{C as oe}from"./Check.caa06f60.js";import{c as U}from"./createSvgIcon.e4bc897e.js";import{B as M}from"./Box.b3b6d93c.js";import{a as ae,b as re}from"./DialogTitle.e11d84a3.js";import"./Close.8b779315.js";import"./ButtonBase.28afb12d.js";import"./Popover.c2ffe643.js";import"./GlowToggle.5e2b86fd.js";const ce=e=>e&&new Promise(t=>{new H().load(e,t)});var le=U(n("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),se=U(n("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),de=U(n("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload");function ue({icon:e="",subIcon:t="",title:a,subtitle:r="",onClick:i,...o}){const c=e&&n("div",{className:"IconButton-icons",children:[n("img",{className:"IconButton-mainIcon",src:e,alt:a,loading:"lazy"}),t&&n("img",{className:"IconButton-subIcon",src:t,alt:t,loading:"lazy"})]}),d=n("div",{className:"IconButton-description",children:[r&&n("h5",{className:"IconButton-subtitle",children:r}),n("h3",{className:"IconButton-title",children:a})]});return n(f,{variant:"outlined",className:"IconButton",onClick:i,startIcon:c,...o,children:d})}function G({icon:e,user:t,name:a,fullName:r=a,subtitle:i="",code:o,onClick:c}){const d=Y(t)?`img/icon/${t}.png`:"",l=e?`img/aniIcon/${e}.png`:d;return n(ue,{icon:l,subIcon:e&&d,title:a,subtitle:i,onClick:c,"data-code":o,"data-name":r})}function me({icon:e,user:t,code:a,fullName:r,onClick:i}){return n(G,{icon:e,user:t,name:r,code:a,onClick:i})}function pe({query:e,onSelect:t}){const[a,r]=v([]),[i,o]=v(!0);return b(()=>{o(!0),setTimeout(async()=>{const c=await J(e);r(c),o(!1)})},[e]),n("div",{className:"AniSearchResult",children:[n(x,{}),i?n(V,{}):n(N,{list:a,component:me,onClick:t})]})}const he=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function T({tabs:e,value:t,onChange:a}){return n(Q,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:t,onChange:(i,o)=>a(o),children:e.map(({label:i,name:o})=>n(_,{label:i!=null?i:o,value:o},o))})}const ge={minHeight:"3rem"};function k({name:e,code:t,onClick:a,fullName:r,...i}){return n(f,{className:"AniSelect-Btn",variant:"contained","data-code":t,"data-name":r!=null?r:e,onClick:a,sx:ge,...i,children:e})}const fe=["Male","Female"];function Ae({value:e,onClick:t}){return n(q,{type:"text",options:fe,value:e,onClick:t})}function ve({onSelect:e}){const{gender:t,setGender:a}=u(i=>i.advAni.home),r=h(i=>i["ani-home"]);return n("div",{className:"HomeAni",children:[n("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),n("div",{className:"AniSelect-simpleBtns",children:r.common.map(({name:i,code:o})=>n(k,{name:i,code:o,onClick:e,className:"AniSelect-Btn"},i))}),n("hr",{}),n("div",{className:"HomeAni-groupTitle",children:[n("h3",{children:"Gender Specific"}),n(Ae,{value:t,onClick:a})]}),n("div",{className:"AniSelect-simpleBtns",children:r[t].map(({name:i,code:o})=>n(k,{name:i,code:o,fullName:`${t} ${i}`,onClick:e,className:"AniSelect-Btn"},i))})]})}function A({list:e,onClick:t}){return n(N,{list:e,component:k,onClick:t})}function be({onSelect:e}){const t=h(a=>a["ani-quest"]);return n(A,{list:t,onClick:e})}const B=["Long","Close","Rapid"],ye=B.map(e=>`img/appIcon/gun_${e}.png`);function xe({value:e,onClick:t}){return n(q,{type:"icon",options:B,icons:ye,labels:B,value:e,onClick:t})}const Se=L.map(e=>`img/appIcon/weapon_${e}.png`);function S({value:e,onClick:t}){return n(q,{type:"icon",options:L,icons:Se,value:e,onClick:t})}const Ce={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function we({onSelect:e}){const{type:t,setType:a,gunMode:r,setGunMode:i}=u(s=>s.advAni.weapon),o=h(s=>s["ani-weapon"]),c=h(s=>s["ani-gun"]),d=o[t].map(s=>({...s,fullName:`${t} ${s.name}`})),l=c[r].map(s=>({...s,fullName:`${Ce[r]} Manacaster ${s.name}`}));return n("div",{className:"WeaponAni",children:[n(S,{value:t,onClick:a}),n(A,{list:d,onClick:e}),t==="Manacaster"&&n(g,{children:[n(xe,{value:r,onClick:i}),n(A,{list:l,onClick:e})]})]})}function ke({onSelect:e}){const{type:t,setType:a}=u(o=>o.advAni.genericSkill),i=h(o=>o["ani-genericSkill"])[t].map(o=>({...o,fullName:`${t} ${o.name}`}));return n("div",{className:"GenericSkills",children:[n(S,{value:t,onClick:a}),n(A,{list:i,onClick:e})]})}function P({list:e,onClick:t}){return n(N,{list:e,component:G,onClick:t})}const Be=e=>({...e,fullName:`${e.name} Victory`}),Ne=e=>({...e,fullName:`${e.name} ${e.subtitle||""} Combo`}),qe=e=>({...e,fullName:`${e.name} ${e.subtitle||""} Force Strike`}),Ue=e=>({...e,fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),Ie={uniqueCombo:Ne,uniqueFS:qe,uniqueVictory:Be,uniqueSkill:Ue};function y({name:e,onSelect:t}){var s,m;const a=`ani-${e}`,r=(s=h(p=>p[a]))!=null?s:{},{setGroupWeaponType:i}=u(p=>p.advAni.groupByWeapon),o=p=>i(e,p),c=u(p=>p.advAni.groupByWeapon[e]);c!=null||o(Object.keys(r)[0]);const d=Ie[e],l=d?(m=r[c])==null?void 0:m.map(d):r[c];return n("div",{className:"AniGroup",children:[n(S,{value:c,onClick:o}),n(P,{list:l,onClick:t},c)]})}function $e({onSelect:e}){const t=h(a=>a["ani-misc"]);return n(A,{list:t,onClick:e})}function Me({expanded:e,user:t,name:a,animations:r,onClick:i,onSelect:o}){return n(g,{children:[n("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":t,onClick:i,children:[n(X,{modelId:t,alt:a}),n("h3",{children:a})]}),e&&n("div",{className:"UniqueAniGroup-details",children:n(A,{list:r,onClick:o})})]})}function Le({onSelect:e}){const t=h(l=>l["ani-uniqueOther"]),{type:a,setType:r,selected:i,setSelected:o}=u(l=>l.advAni.uniqueOther),c=t[a],d=l=>{const{user:s}=l.currentTarget.dataset;o(s===i?"":s)};return n(g,{children:n("div",{className:"OtherUniqueAni",children:[n(S,{value:a,onClick:r}),n("hr",{}),n("div",{className:"OtherUniqueAni-groups",children:c.map(l=>n(Me,{expanded:i===l.user,...l,onClick:d,onSelect:e}))})]})})}const Ge={home:ve,quest:be,weapon:we,genericSkill:ke,uniqueSkill:e=>n(y,{...e,name:"uniqueSkill"}),uniqueVictory:e=>n(y,{...e,name:"uniqueVictory"}),uniqueFS:e=>n(y,{...e,name:"uniqueFS"}),uniqueCombo:e=>n(y,{...e,name:"uniqueCombo"}),uniqueOther:Le,misc:$e};function Te({onSelect:e}){var i;const{category:t,setCategory:a}=u(o=>o.advAni),r=(i=Ge[t])!=null?i:x;return n("div",{className:"AniSelect-categories",children:[n(T,{tabs:he,value:t,onChange:a}),n("div",{className:"AniSelect-subCategory",children:n(r,{onSelect:e})})]})}function Pe(){const{source:e,setSource:t,sourceName:a,setSourceName:r}=u(l=>l.personalAni),{inputModel:i}=O(),o=(l,s)=>{r(s),t(l)},c=async()=>{const l=await i();l&&o(...l)};b(()=>{a||setTimeout(async()=>{const l=await W(e);l!=null&&l.id&&r(l.name)})},[e]);const d=["b","w","e"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return n("div",{className:"PersonalAni-source",children:[e&&n("img",{src:d,alt:e},e),n("div",{children:[n("h3",{children:a}),n(f,{variant:"outlined",onClick:c,children:"Change Source"})]})]})}function ze({onSelect:e}){const t=!!indexedDB,{source:a}=u(o=>o.personalAni),[r,i]=v([]);return b(()=>{i([]),setTimeout(async()=>{var d;if(!a)return;const c=((d=E(a))!=null?d:t?await Z(a):[]).map(l=>({...l,user:void 0}));i(c)})},[a]),n(P,{list:r,onClick:e})}function De({onSelect:e}){return n("div",{className:"PersonalAnimation",children:[n(Pe,{}),n(ze,{onSelect:e})]})}function He({onSelect:e}){const{category:t,setCategory:a}=u(o=>o.extraAni),r=h(o=>o["ani-extra"]),i=Object.keys(r).map(o=>({name:o}));return n("div",{className:"AniSelect-categories",children:[n(T,{tabs:i,value:t,onChange:a}),n("div",{className:"AniSelect-subCategory",children:n(A,{list:r[t],onClick:e})})]})}function Oe({initText:e,onChange:t=r=>{},...a}){const[r,i]=v(e),[o,c]=ie(),d=s=>{const{value:m}=s.target;i(m),t(s)},l=s=>{s.keyCode===13&&c()};return b(()=>{i(e)},[e]),o?n(g,{children:[n(f,{title:"Save",onClick:c,children:n(oe,{})}),n("input",{value:r,onChange:d,onKeyUp:l,...a})]}):n(g,{children:[n(f,{title:"Edit",onClick:c,children:n(se,{})}),n("div",{...a,children:r})]})}function We({list:e,onSelect:t}){const a=i=>{const{value:o}=i.target,{uuid:c}=i.target.dataset,d=e.find(l=>l.uuid===c);d.name=o},r=i=>{const{uuid:o}=i.target.dataset,c=e.findIndex(d=>d.uuid===o);c!==-1&&e.splice(c,1)};return n("div",{className:"AnimationList",children:e==null?void 0:e.map(i=>n(g,{children:[n(Oe,{initText:i.name,onChange:a,className:"AnimationList-aniName","data-uuid":i.uuid}),n(f,{"data-code":`ex:${i.uuid}`,"data-name":i.name,onClick:t,variant:"contained",title:"Select this animation",children:"Select"}),n(f,{"data-uuid":i.uuid,onClick:r,variant:"contained",title:"Delete this animation",children:n(le,{})})]}))})}function Ee({onSelect:e}){const{userData:t}=j,[a,r]=ee();return b(()=>{const o=t.ani.addEventListener("change",r);return()=>t.ani.removeEventListener("change",o)}),n("div",{className:"UploadedAni",children:[n(ne,{title:"Upload fbx files containing animations applied on DL models",label:"Upload Animations",multiple:!0,mimeType:".fbx",onChange:async o=>{const c=Array.from(o),d=await Promise.all(c.map(te)),s=(await Promise.all(d.map(ce))).flatMap(m=>m.animations);t.ani.push(...s)}}),n(We,{list:t.ani,onSelect:e},a)]})}const w={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem",overflowX:"hidden"}};const je=[{name:"Adv"},{name:"Personal"},{name:"Extra"},{name:"Upload",icon:n(de,{}),label:""}],Ve={Adv:Te,Personal:De,Extra:He,Upload:Ee};function pn({onSelect:e=()=>{},onAfterSelect:t}){var I;const{category:a,setCategory:r,getCurrentState:i}=u(),o=!!indexedDB,[c,d]=v(""),l=R(c,500),s=($,C)=>r(C),m=$=>{const{code:C,name:z}=$.currentTarget.dataset,D=i();e(C,z,D),t==null||t()},p=(I=Ve[a])!=null?I:x;return n(M,{className:"AniSelect",sx:w.root,children:[n(M,{sx:w.title,children:[n(ae,{children:"Select an Animation"}),o&&n(F,{placeholder:"Search",query:c,onChange:d})]}),c?n(pe,{query:l,onSelect:m}):n(g,{children:[n(K,{value:a,onChange:s,tabs:je}),n(re,{sx:w.content,children:[n(x,{}),n(p,{onSelect:m})]})]})]})}export{pn as default};
